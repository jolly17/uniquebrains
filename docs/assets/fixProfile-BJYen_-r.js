import{s as t}from"./index-Bj_VF9kJ.js";import"./react-vendor-CJ32hqYR.js";import"./supabase-vendor-1EnARKVZ.js";async function n(e,o="parent"){try{console.log("ğŸ” Checking profile for user:",e);const{data:r,error:l}=await t.from("profiles").select("*").eq("id",e).single();if(l)return console.error("âŒ Error fetching profile:",l),{success:!1,error:l};if(console.log("ğŸ“‹ Current profile:",r),r.role!==o){console.log(`ğŸ”§ Fixing role from '${r.role}' to '${o}'`);const{error:s}=await t.from("profiles").update({role:o}).eq("id",e);return s?(console.error("âŒ Error updating role:",s),{success:!1,error:s}):(console.log("âœ… Role updated successfully!"),{success:!0,updated:!0,oldRole:r.role,newRole:o})}else return console.log("âœ… Role is already correct"),{success:!0,updated:!1,role:r.role}}catch(r){return console.error("âŒ Unexpected error:",r),{success:!1,error:r}}}async function i(){try{const{data:e,error:o}=await t.from("profiles").select("id, email, first_name, last_name, role, created_at").order("created_at",{ascending:!1});if(o){console.error("âŒ Error fetching profiles:",o);return}return console.log("ğŸ“‹ All profiles:"),console.table(e),e}catch(e){console.error("âŒ Unexpected error:",e)}}typeof window<"u"&&(window.checkAndFixProfile=n,window.listAllProfiles=i);export{n as checkAndFixProfile,i as listAllProfiles};
