import{s as n}from"./index-Bq8BD0QQ.js";import"./react-vendor-BVfAdPAr.js";import"./supabase-vendor-C7RrnluU.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"5e1b4006d2aaf59ecdc5eaf2206794a8bc2a50bd"};var r=new e.Error().stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="ffea1fd7-92a2-42e8-8b6b-ea8b759a28b3",e._sentryDebugIdIdentifier="sentry-dbid-ffea1fd7-92a2-42e8-8b6b-ea8b759a28b3")}catch{}})();async function t(e,r="parent"){try{console.log("ðŸ” Checking profile for user:",e);const{data:o,error:l}=await n.from("profiles").select("*").eq("id",e).single();if(l)return console.error("âŒ Error fetching profile:",l),{success:!1,error:l};if(console.log("ðŸ“‹ Current profile:",o),o.role!==r){console.log(`ðŸ”§ Fixing role from '${o.role}' to '${r}'`);const{error:s}=await n.from("profiles").update({role:r}).eq("id",e);return s?(console.error("âŒ Error updating role:",s),{success:!1,error:s}):(console.log("âœ… Role updated successfully!"),{success:!0,updated:!0,oldRole:o.role,newRole:r})}else return console.log("âœ… Role is already correct"),{success:!0,updated:!1,role:o.role}}catch(o){return console.error("âŒ Unexpected error:",o),{success:!1,error:o}}}async function a(){try{const{data:e,error:r}=await n.from("profiles").select("id, email, first_name, last_name, role, created_at").order("created_at",{ascending:!1});if(r){console.error("âŒ Error fetching profiles:",r);return}return console.log("ðŸ“‹ All profiles:"),console.table(e),e}catch(e){console.error("âŒ Unexpected error:",e)}}typeof window<"u"&&(window.checkAndFixProfile=t,window.listAllProfiles=a);export{t as checkAndFixProfile,a as listAllProfiles};
//# sourceMappingURL=fixProfile-Cmxxt79m.js.map
