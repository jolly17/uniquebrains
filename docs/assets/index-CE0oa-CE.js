const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/fixProfile-CcoEUVAW.js","assets/react-vendor-BdWzKMIX.js","assets/supabase-vendor-j04vPBtc.js"])))=>i.map(i=>d[i]);
var Mm=Object.defineProperty;var Pm=(e,s,r)=>s in e?Mm(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r;var Tt=(e,s,r)=>Pm(e,typeof s!="symbol"?s+"":s,r);import{r as j,b as Am,u as bs,L as he,O as Om,d as Il,e as $i,f as Ar,B as Lm,R as Fm,h as Ne,N as Jt,i as $m}from"./react-vendor-BdWzKMIX.js";import{c as Bm}from"./supabase-vendor-j04vPBtc.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"fb9bde061931f43df46e7b49571833f6a118cd79"};var s=new e.Error().stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="12b64fd6-553b-4ffa-8e37-df01adcd2082",e._sentryDebugIdIdentifier="sentry-dbid-12b64fd6-553b-4ffa-8e37-df01adcd2082")}catch{}})();(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var Rl={exports:{}},ai={};/**
 * @license React
 * react-jsx-dev-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var e=j,s=Symbol.for("react.element"),r=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.for("react.offscreen"),g=Symbol.iterator,p="@@iterator";function N(b){if(b===null||typeof b!="object")return null;var P=g&&b[g]||b[p];return typeof P=="function"?P:null}var y=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function E(b){{for(var P=arguments.length,q=new Array(P>1?P-1:0),te=1;te<P;te++)q[te-1]=arguments[te];R("error",b,q)}}function R(b,P,q){{var te=y.ReactDebugCurrentFrame,ye=te.getStackAddendum();ye!==""&&(P+="%s",q=q.concat([ye]));var Se=q.map(function(de){return String(de)});Se.unshift("Warning: "+P),Function.prototype.apply.call(console[b],console,Se)}}var A=!1,_=!1,C=!1,S=!1,I=!1,F;F=Symbol.for("react.module.reference");function U(b){return!!(typeof b=="string"||typeof b=="function"||b===t||b===o||I||b===i||b===u||b===d||S||b===h||A||_||C||typeof b=="object"&&b!==null&&(b.$$typeof===f||b.$$typeof===m||b.$$typeof===a||b.$$typeof===l||b.$$typeof===c||b.$$typeof===F||b.getModuleId!==void 0))}function T(b,P,q){var te=b.displayName;if(te)return te;var ye=P.displayName||P.name||"";return ye!==""?q+"("+ye+")":q}function w(b){return b.displayName||"Context"}function v(b){if(b==null)return null;if(typeof b.tag=="number"&&E("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof b=="function")return b.displayName||b.name||null;if(typeof b=="string")return b;switch(b){case t:return"Fragment";case r:return"Portal";case o:return"Profiler";case i:return"StrictMode";case u:return"Suspense";case d:return"SuspenseList"}if(typeof b=="object")switch(b.$$typeof){case l:var P=b;return w(P)+".Consumer";case a:var q=b;return w(q._context)+".Provider";case c:return T(b,b.render,"ForwardRef");case m:var te=b.displayName||null;return te!==null?te:v(b.type)||"Memo";case f:{var ye=b,Se=ye._payload,de=ye._init;try{return v(de(Se))}catch{return null}}}return null}var D=Object.assign,H=0,z,$,O,V,M,B,W;function Q(){}Q.__reactDisabledLog=!0;function me(){{if(H===0){z=console.log,$=console.info,O=console.warn,V=console.error,M=console.group,B=console.groupCollapsed,W=console.groupEnd;var b={configurable:!0,enumerable:!0,value:Q,writable:!0};Object.defineProperties(console,{info:b,log:b,warn:b,error:b,group:b,groupCollapsed:b,groupEnd:b})}H++}}function je(){{if(H--,H===0){var b={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:D({},b,{value:z}),info:D({},b,{value:$}),warn:D({},b,{value:O}),error:D({},b,{value:V}),group:D({},b,{value:M}),groupCollapsed:D({},b,{value:B}),groupEnd:D({},b,{value:W})})}H<0&&E("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var ze=y.ReactCurrentDispatcher,Me;function Pe(b,P,q){{if(Me===void 0)try{throw Error()}catch(ye){var te=ye.stack.trim().match(/\n( *(at )?)/);Me=te&&te[1]||""}return`
`+Me+b}}var Ye=!1,Fe;{var mr=typeof WeakMap=="function"?WeakMap:Map;Fe=new mr}function dr(b,P){if(!b||Ye)return"";{var q=Fe.get(b);if(q!==void 0)return q}var te;Ye=!0;var ye=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var Se;Se=ze.current,ze.current=null,me();try{if(P){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(Ge){te=Ge}Reflect.construct(b,[],de)}else{try{de.call()}catch(Ge){te=Ge}b.call(de.prototype)}}else{try{throw Error()}catch(Ge){te=Ge}b()}}catch(Ge){if(Ge&&te&&typeof Ge.stack=="string"){for(var le=Ge.stack.split(`
`),Be=te.stack.split(`
`),De=le.length-1,we=Be.length-1;De>=1&&we>=0&&le[De]!==Be[we];)we--;for(;De>=1&&we>=0;De--,we--)if(le[De]!==Be[we]){if(De!==1||we!==1)do if(De--,we--,we<0||le[De]!==Be[we]){var os=`
`+le[De].replace(" at new "," at ");return b.displayName&&os.includes("<anonymous>")&&(os=os.replace("<anonymous>",b.displayName)),typeof b=="function"&&Fe.set(b,os),os}while(De>=1&&we>=0);break}}}finally{Ye=!1,ze.current=Se,je(),Error.prepareStackTrace=ye}var gr=b?b.displayName||b.name:"",Ks=gr?Pe(gr):"";return typeof b=="function"&&Fe.set(b,Ks),Ks}function Js(b,P,q){return dr(b,!1)}function ts(b){var P=b.prototype;return!!(P&&P.isReactComponent)}function $e(b,P,q){if(b==null)return"";if(typeof b=="function")return dr(b,ts(b));if(typeof b=="string")return Pe(b);switch(b){case u:return Pe("Suspense");case d:return Pe("SuspenseList")}if(typeof b=="object")switch(b.$$typeof){case c:return Js(b.render);case m:return $e(b.type,P,q);case f:{var te=b,ye=te._payload,Se=te._init;try{return $e(Se(ye),P,q)}catch{}}}return""}var ns=Object.prototype.hasOwnProperty,k={},K=y.ReactDebugCurrentFrame;function ae(b){if(b){var P=b._owner,q=$e(b.type,b._source,P?P.type:null);K.setExtraStackFrame(q)}else K.setExtraStackFrame(null)}function Y(b,P,q,te,ye){{var Se=Function.call.bind(ns);for(var de in b)if(Se(b,de)){var le=void 0;try{if(typeof b[de]!="function"){var Be=Error((te||"React class")+": "+q+" type `"+de+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof b[de]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Be.name="Invariant Violation",Be}le=b[de](P,de,te,q,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(De){le=De}le&&!(le instanceof Error)&&(ae(ye),E("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",te||"React class",q,de,typeof le),ae(null)),le instanceof Error&&!(le.message in k)&&(k[le.message]=!0,ae(ye),E("Failed %s type: %s",q,le.message),ae(null))}}}var be=Array.isArray;function J(b){return be(b)}function _e(b){{var P=typeof Symbol=="function"&&Symbol.toStringTag,q=P&&b[Symbol.toStringTag]||b.constructor.name||"Object";return q}}function Ve(b){try{return ie(b),!1}catch{return!0}}function ie(b){return""+b}function ds(b){if(Ve(b))return E("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",_e(b)),ie(b)}var is=y.ReactCurrentOwner,ys={key:!0,ref:!0,__self:!0,__source:!0},xs,fr,Es;Es={};function Ct(b){if(ns.call(b,"ref")){var P=Object.getOwnPropertyDescriptor(b,"ref").get;if(P&&P.isReactWarning)return!1}return b.ref!==void 0}function wn(b){if(ns.call(b,"key")){var P=Object.getOwnPropertyDescriptor(b,"key").get;if(P&&P.isReactWarning)return!1}return b.key!==void 0}function Un(b,P){if(typeof b.ref=="string"&&is.current&&P&&is.current.stateNode!==P){var q=v(is.current.type);Es[q]||(E('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',v(is.current.type),b.ref),Es[q]=!0)}}function vm(b,P){{var q=function(){xs||(xs=!0,E("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",P))};q.isReactWarning=!0,Object.defineProperty(b,"key",{get:q,configurable:!0})}}function xm(b,P){{var q=function(){fr||(fr=!0,E("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",P))};q.isReactWarning=!0,Object.defineProperty(b,"ref",{get:q,configurable:!0})}}var Cm=function(b,P,q,te,ye,Se,de){var le={$$typeof:s,type:b,key:P,ref:q,props:de,_owner:Se};return le._store={},Object.defineProperty(le._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(le,"_self",{configurable:!1,enumerable:!1,writable:!1,value:te}),Object.defineProperty(le,"_source",{configurable:!1,enumerable:!1,writable:!1,value:ye}),Object.freeze&&(Object.freeze(le.props),Object.freeze(le)),le};function Tm(b,P,q,te,ye){{var Se,de={},le=null,Be=null;q!==void 0&&(ds(q),le=""+q),wn(P)&&(ds(P.key),le=""+P.key),Ct(P)&&(Be=P.ref,Un(P,ye));for(Se in P)ns.call(P,Se)&&!ys.hasOwnProperty(Se)&&(de[Se]=P[Se]);if(b&&b.defaultProps){var De=b.defaultProps;for(Se in De)de[Se]===void 0&&(de[Se]=De[Se])}if(le||Be){var we=typeof b=="function"?b.displayName||b.name||"Unknown":b;le&&vm(de,we),Be&&xm(de,we)}return Cm(b,le,Be,ye,te,is.current,de)}}var Vn=y.ReactCurrentOwner,Oo=y.ReactDebugCurrentFrame;function hr(b){if(b){var P=b._owner,q=$e(b.type,b._source,P?P.type:null);Oo.setExtraStackFrame(q)}else Oo.setExtraStackFrame(null)}var In;In=!1;function Rn(b){return typeof b=="object"&&b!==null&&b.$$typeof===s}function Lo(){{if(Vn.current){var b=v(Vn.current.type);if(b)return`

Check the render method of \``+b+"`."}return""}}function km(b){{if(b!==void 0){var P=b.fileName.replace(/^.*[\\\/]/,""),q=b.lineNumber;return`

Check your code at `+P+":"+q+"."}return""}}var Fo={};function _m(b){{var P=Lo();if(!P){var q=typeof b=="string"?b:b.displayName||b.name;q&&(P=`

Check the top-level render call using <`+q+">.")}return P}}function $o(b,P){{if(!b._store||b._store.validated||b.key!=null)return;b._store.validated=!0;var q=_m(P);if(Fo[q])return;Fo[q]=!0;var te="";b&&b._owner&&b._owner!==Vn.current&&(te=" It was passed a child from "+v(b._owner.type)+"."),hr(b),E('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',q,te),hr(null)}}function Bo(b,P){{if(typeof b!="object")return;if(J(b))for(var q=0;q<b.length;q++){var te=b[q];Rn(te)&&$o(te,P)}else if(Rn(b))b._store&&(b._store.validated=!0);else if(b){var ye=N(b);if(typeof ye=="function"&&ye!==b.entries)for(var Se=ye.call(b),de;!(de=Se.next()).done;)Rn(de.value)&&$o(de.value,P)}}}function Dm(b){{var P=b.type;if(P==null||typeof P=="string")return;var q;if(typeof P=="function")q=P.propTypes;else if(typeof P=="object"&&(P.$$typeof===c||P.$$typeof===m))q=P.propTypes;else return;if(q){var te=v(P);Y(q,b.props,"prop",te,b)}else if(P.PropTypes!==void 0&&!In){In=!0;var ye=v(P);E("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",ye||"Unknown")}typeof P.getDefaultProps=="function"&&!P.getDefaultProps.isReactClassApproved&&E("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function wm(b){{for(var P=Object.keys(b.props),q=0;q<P.length;q++){var te=P[q];if(te!=="children"&&te!=="key"){hr(b),E("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",te),hr(null);break}}b.ref!==null&&(hr(b),E("Invalid attribute `ref` supplied to `React.Fragment`."),hr(null))}}var qo={};function Um(b,P,q,te,ye,Se){{var de=U(b);if(!de){var le="";(b===void 0||typeof b=="object"&&b!==null&&Object.keys(b).length===0)&&(le+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Be=km(ye);Be?le+=Be:le+=Lo();var De;b===null?De="null":J(b)?De="array":b!==void 0&&b.$$typeof===s?(De="<"+(v(b.type)||"Unknown")+" />",le=" Did you accidentally export a JSX literal instead of a component?"):De=typeof b,E("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",De,le)}var we=Tm(b,P,q,ye,Se);if(we==null)return we;if(de){var os=P.children;if(os!==void 0)if(te)if(J(os)){for(var gr=0;gr<os.length;gr++)Bo(os[gr],b);Object.freeze&&Object.freeze(os)}else E("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Bo(os,b)}if(ns.call(P,"key")){var Ks=v(b),Ge=Object.keys(P).filter(function(Rm){return Rm!=="key"}),Mn=Ge.length>0?"{key: someKey, "+Ge.join(": ..., ")+": ...}":"{key: someKey}";if(!qo[Ks+Mn]){var Im=Ge.length>0?"{"+Ge.join(": ..., ")+": ...}":"{}";E(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Mn,Ks,Im,Ks),qo[Ks+Mn]=!0}}return b===t?wm(we):Dm(we),we}}var Vm=Um;ai.Fragment=t,ai.jsxDEV=Vm})();Rl.exports=ai;var n=Rl.exports,li={},Pn=Am;{var kt=Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;li.createRoot=function(e,s){kt.usingClientEntryPoint=!0;try{return Pn.createRoot(e,s)}finally{kt.usingClientEntryPoint=!1}},li.hydrateRoot=function(e,s,r){kt.usingClientEntryPoint=!0;try{return Pn.hydrateRoot(e,s,r)}finally{kt.usingClientEntryPoint=!1}}}const qm="modulepreload",Hm=function(e){return"/"+e},Ho={},Wm=function(s,r,t){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(r.map(c=>{if(c=Hm(c),c in Ho)return;Ho[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":qm,u||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),u)return new Promise((f,h)=>{m.addEventListener("load",f),m.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&o(l.reason);return s().catch(o)})},zm="https://wxfxvuvlpjxnyxhpquyw.supabase.co",Ym="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind4Znh2dXZscGp4bnl4aHBxdXl3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUxODkyNzEsImV4cCI6MjA4MDc2NTI3MX0.rdFXyHC-7W5JRa-AtNeU82p1vPGI8oOWuQdQZASFD0c",x=Bm(zm,Ym,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storage:window.localStorage,storageKey:"uniquebrains-auth",flowType:"pkce"},db:{schema:"public"},global:{headers:{"x-application-name":"uniquebrains"}}});async function Gm({email:e,password:s,firstName:r,lastName:t,role:i="student"}){try{if(!e||!s||!r||!t)return{user:null,session:null,error:{message:"All fields are required"}};if(s.length<8)return{user:null,session:null,error:{message:"Password must be at least 8 characters long"}};if(!["instructor","student","admin"].includes(i))return{user:null,session:null,error:{message:"Invalid role specified. Only students and instructors can create accounts."}};const{data:a,error:l}=await x.auth.signUp({email:e,password:s,options:{data:{first_name:r,last_name:t,role:i},emailRedirectTo:`${window.location.origin}/auth/callback`}});if(l)return{user:null,session:null,error:l};if(a.user){const{error:c}=await x.from("profiles").insert({id:a.user.id,email:e,first_name:r,last_name:t,role:i});c&&c.code!=="23505"&&console.error("Error creating profile:",c)}return{user:a.user,session:a.session,error:null}}catch(o){return console.error("Sign up error:",o),{user:null,session:null,error:o}}}async function Jm(e,s){try{if(!e||!s)return{user:null,session:null,profile:null,error:{message:"Email and password are required"}};const{data:r,error:t}=await x.auth.signInWithPassword({email:e,password:s});if(t)return{user:null,session:null,profile:null,error:t};const{data:i,error:o}=await x.from("profiles").select("*").eq("id",r.user.id).single();return o?(console.error("Error fetching profile:",o),{user:r.user,session:r.session,profile:null,error:{message:"Profile not found"}}):{user:r.user,session:r.session,profile:i,error:null}}catch(r){return console.error("Sign in error:",r),{user:null,session:null,profile:null,error:r}}}async function Km(){try{const{error:e}=await x.auth.signOut();return{error:e}}catch(e){return console.error("Sign out error:",e),{error:e}}}async function Xm(){try{const{data:{session:e},error:s}=await x.auth.getSession();return s?{session:null,user:null,error:s}:{session:e,user:(e==null?void 0:e.user)||null,error:null}}catch(e){return console.error("Get session error:",e),{session:null,user:null,error:e}}}async function An(){try{const{data:{user:e},error:s}=await x.auth.getUser();if(s||!e)return{profile:null,error:s||{message:"Not authenticated"}};const{data:r,error:t}=await x.from("profiles").select("*").eq("id",e.id).single();return t?{profile:null,error:t}:{profile:r,error:null}}catch(e){return console.error("Get profile error:",e),{profile:null,error:e}}}function Zm(e){const{data:{subscription:s}}=x.auth.onAuthStateChange(e);return s}const G=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,ce=globalThis,er="10.38.0";function lr(){return hn(ce),ce}function hn(e){const s=e.__SENTRY__=e.__SENTRY__||{};return s.version=s.version||er,s[er]=s[er]||{}}function Or(e,s,r=ce){const t=r.__SENTRY__=r.__SENTRY__||{},i=t[er]=t[er]||{};return i[e]||(i[e]=s())}const Qm=["debug","info","warn","error","log","assert","trace"],ed="Sentry Logger ",Kt={};function cr(e){if(!("console"in ce))return e();const s=ce.console,r={},t=Object.keys(Kt);t.forEach(i=>{const o=Kt[i];r[i]=s[i],s[i]=o});try{return e()}finally{t.forEach(i=>{s[i]=r[i]})}}function sd(){qi().enabled=!0}function rd(){qi().enabled=!1}function Ml(){return qi().enabled}function td(...e){Bi("log",...e)}function nd(...e){Bi("warn",...e)}function id(...e){Bi("error",...e)}function Bi(e,...s){G&&Ml()&&cr(()=>{ce.console[e](`${ed}[${e}]:`,...s)})}function qi(){return G?Or("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const L={enable:sd,disable:rd,isEnabled:Ml,log:td,warn:nd,error:id},Pl=50,nr="?",Wo=/\(error: (.*)\)/,zo=/captureMessage|captureException/;function Al(...e){const s=e.sort((r,t)=>r[0]-t[0]).map(r=>r[1]);return(r,t=0,i=0)=>{const o=[],a=r.split(`
`);for(let l=t;l<a.length;l++){let c=a[l];c.length>1024&&(c=c.slice(0,1024));const u=Wo.test(c)?c.replace(Wo,"$1"):c;if(!u.match(/\S*Error: /)){for(const d of s){const m=d(u);if(m){o.push(m);break}}if(o.length>=Pl+i)break}}return ad(o.slice(i))}}function od(e){return Array.isArray(e)?Al(...e):e}function ad(e){if(!e.length)return[];const s=Array.from(e);return/sentryWrapped/.test(_t(s).function||"")&&s.pop(),s.reverse(),zo.test(_t(s).function||"")&&(s.pop(),zo.test(_t(s).function||"")&&s.pop()),s.slice(0,Pl).map(r=>({...r,filename:r.filename||_t(s).filename,function:r.function||nr}))}function _t(e){return e[e.length-1]||{}}const On="<anonymous>";function Us(e){try{return!e||typeof e!="function"?On:e.name||On}catch{return On}}function Yo(e){const s=e.exception;if(s){const r=[];try{return s.values.forEach(t=>{t.stacktrace.frames&&r.push(...t.stacktrace.frames)}),r}catch{return}}}function Ol(e){return"__v_isVNode"in e&&e.__v_isVNode?"[VueVNode]":"[VueViewModel]"}const Ot={},Go={};function Ws(e,s){Ot[e]=Ot[e]||[],Ot[e].push(s)}function zs(e,s){if(!Go[e]){Go[e]=!0;try{s()}catch(r){G&&L.error(`Error while instrumenting ${e}`,r)}}}function us(e,s){const r=e&&Ot[e];if(r)for(const t of r)try{t(s)}catch(i){G&&L.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Us(t)}
Error:`,i)}}let Ln=null;function Ll(e){const s="error";Ws(s,e),zs(s,ld)}function ld(){Ln=ce.onerror,ce.onerror=function(e,s,r,t,i){return us("error",{column:t,error:i,line:r,msg:e,url:s}),Ln?Ln.apply(this,arguments):!1},ce.onerror.__SENTRY_INSTRUMENTED__=!0}let Fn=null;function Fl(e){const s="unhandledrejection";Ws(s,e),zs(s,cd)}function cd(){Fn=ce.onunhandledrejection,ce.onunhandledrejection=function(e){return us("unhandledrejection",e),Fn?Fn.apply(this,arguments):!0},ce.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const $l=Object.prototype.toString;function gn(e){switch($l.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Vs(e,Error)}}function Lr(e,s){return $l.call(e)===`[object ${s}]`}function Bl(e){return Lr(e,"ErrorEvent")}function Jo(e){return Lr(e,"DOMError")}function ud(e){return Lr(e,"DOMException")}function ks(e){return Lr(e,"String")}function Hi(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function kr(e){return e===null||Hi(e)||typeof e!="object"&&typeof e!="function"}function st(e){return Lr(e,"Object")}function pn(e){return typeof Event<"u"&&Vs(e,Event)}function md(e){return typeof Element<"u"&&Vs(e,Element)}function dd(e){return Lr(e,"RegExp")}function Fr(e){return!!(e!=null&&e.then&&typeof e.then=="function")}function fd(e){return st(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function Vs(e,s){try{return e instanceof s}catch{return!1}}function ql(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue||e.__v_isVNode))}function Wi(e){return typeof Request<"u"&&Vs(e,Request)}const zi=ce,hd=80;function Xe(e,s={}){if(!e)return"<unknown>";try{let r=e;const t=5,i=[];let o=0,a=0;const l=" > ",c=l.length;let u;const d=Array.isArray(s)?s:s.keyAttrs,m=!Array.isArray(s)&&s.maxStringLength||hd;for(;r&&o++<t&&(u=gd(r,d),!(u==="html"||o>1&&a+i.length*c+u.length>=m));)i.push(u),a+=u.length,r=r.parentNode;return i.reverse().join(l)}catch{return"<unknown>"}}function gd(e,s){const r=e,t=[];if(!(r!=null&&r.tagName))return"";if(zi.HTMLElement&&r instanceof HTMLElement&&r.dataset){if(r.dataset.sentryComponent)return r.dataset.sentryComponent;if(r.dataset.sentryElement)return r.dataset.sentryElement}t.push(r.tagName.toLowerCase());const i=s!=null&&s.length?s.filter(a=>r.getAttribute(a)).map(a=>[a,r.getAttribute(a)]):null;if(i!=null&&i.length)i.forEach(a=>{t.push(`[${a[0]}="${a[1]}"]`)});else{r.id&&t.push(`#${r.id}`);const a=r.className;if(a&&ks(a)){const l=a.split(/\s+/);for(const c of l)t.push(`.${c}`)}}const o=["aria-label","type","name","title","alt"];for(const a of o){const l=r.getAttribute(a);l&&t.push(`[${a}="${l}"]`)}return t.join("")}function $r(){try{return zi.document.location.href}catch{return""}}function Hl(e){if(!zi.HTMLElement)return null;let s=e;const r=5;for(let t=0;t<r;t++){if(!s)return null;if(s instanceof HTMLElement){if(s.dataset.sentryComponent)return s.dataset.sentryComponent;if(s.dataset.sentryElement)return s.dataset.sentryElement}s=s.parentNode}return null}function Ke(e,s,r){if(!(s in e))return;const t=e[s];if(typeof t!="function")return;const i=r(t);typeof i=="function"&&Wl(i,t);try{e[s]=i}catch{G&&L.log(`Failed to replace method "${s}" in object`,e)}}function Ze(e,s,r){try{Object.defineProperty(e,s,{value:r,writable:!0,configurable:!0})}catch{G&&L.log(`Failed to add non-enumerable property "${s}" to object`,e)}}function Wl(e,s){try{const r=s.prototype||{};e.prototype=s.prototype=r,Ze(e,"__sentry_original__",s)}catch{}}function Yi(e){return e.__sentry_original__}function zl(e){if(gn(e))return{message:e.message,name:e.name,stack:e.stack,...Xo(e)};if(pn(e)){const s={type:e.type,target:Ko(e.target),currentTarget:Ko(e.currentTarget),...Xo(e)};return typeof CustomEvent<"u"&&Vs(e,CustomEvent)&&(s.detail=e.detail),s}else return e}function Ko(e){try{return md(e)?Xe(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function Xo(e){if(typeof e=="object"&&e!==null){const s={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s}else return{}}function pd(e){const s=Object.keys(zl(e));return s.sort(),s[0]?s.join(", "):"[object has no keys]"}let pr;function ut(e){if(pr!==void 0)return pr?pr(e):e();const s=Symbol.for("__SENTRY_SAFE_RANDOM_ID_WRAPPER__"),r=ce;return s in r&&typeof r[s]=="function"?(pr=r[s],pr(e)):(pr=null,e())}function Ls(){return ut(()=>Math.random())}function mt(){return ut(()=>Date.now())}function ci(e,s=0){return typeof e!="string"||s===0||e.length<=s?e:`${e.slice(0,s)}...`}function Zo(e,s){if(!Array.isArray(e))return"";const r=[];for(let t=0;t<e.length;t++){const i=e[t];try{ql(i)?r.push(Ol(i)):r.push(String(i))}catch{r.push("[value cannot be serialized]")}}return r.join(s)}function Lt(e,s,r=!1){return ks(e)?dd(s)?s.test(e):ks(s)?r?e===s:e.includes(s):!1:!1}function _s(e,s=[],r=!1){return s.some(t=>Lt(e,t,r))}function Nd(){const e=ce;return e.crypto||e.msCrypto}let $n;function bd(){return Ls()*16}function ss(e=Nd()){try{if(e!=null&&e.randomUUID)return ut(()=>e.randomUUID()).replace(/-/g,"")}catch{}return $n||($n="10000000100040008000"+1e11),$n.replace(/[018]/g,s=>(s^(bd()&15)>>s/4).toString(16))}function Yl(e){var s,r;return(r=(s=e.exception)==null?void 0:s.values)==null?void 0:r[0]}function Xs(e){const{message:s,event_id:r}=e;if(s)return s;const t=Yl(e);return t?t.type&&t.value?`${t.type}: ${t.value}`:t.type||t.value||r||"<unknown>":r||"<unknown>"}function ui(e,s,r){const t=e.exception=e.exception||{},i=t.values=t.values||[],o=i[0]=i[0]||{};o.value||(o.value=s||""),o.type||(o.type="Error")}function _r(e,s){const r=Yl(e);if(!r)return;const t={type:"generic",handled:!0},i=r.mechanism;if(r.mechanism={...t,...i,...s},s&&"data"in s){const o={...i==null?void 0:i.data,...s.data};r.mechanism.data=o}}function Qo(e){if(yd(e))return!0;try{Ze(e,"__sentry_captured__",!0)}catch{}return!1}function yd(e){try{return e.__sentry_captured__}catch{}}const Gl=1e3;function ur(){return mt()/Gl}function Ed(){const{performance:e}=ce;if(!(e!=null&&e.now)||!e.timeOrigin)return ur;const s=e.timeOrigin;return()=>(s+ut(()=>e.now()))/Gl}let ea;function Ae(){return(ea??(ea=Ed()))()}let Bn=null;function jd(){var a;const{performance:e}=ce;if(!(e!=null&&e.now))return;const s=3e5,r=ut(()=>e.now()),t=mt(),i=e.timeOrigin;if(typeof i=="number"&&Math.abs(i+r-t)<s)return i;const o=(a=e.timing)==null?void 0:a.navigationStart;return typeof o=="number"&&Math.abs(o+r-t)<s?o:t-r}function Qe(){return Bn===null&&(Bn=jd()),Bn}function Sd(e){const s=Ae(),r={sid:ss(),init:!0,timestamp:s,started:s,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>xd(r)};return e&&Dr(r,e),r}function Dr(e,s={}){if(s.user&&(!e.ipAddress&&s.user.ip_address&&(e.ipAddress=s.user.ip_address),!e.did&&!s.did&&(e.did=s.user.id||s.user.email||s.user.username)),e.timestamp=s.timestamp||Ae(),s.abnormal_mechanism&&(e.abnormal_mechanism=s.abnormal_mechanism),s.ignoreDuration&&(e.ignoreDuration=s.ignoreDuration),s.sid&&(e.sid=s.sid.length===32?s.sid:ss()),s.init!==void 0&&(e.init=s.init),!e.did&&s.did&&(e.did=`${s.did}`),typeof s.started=="number"&&(e.started=s.started),e.ignoreDuration)e.duration=void 0;else if(typeof s.duration=="number")e.duration=s.duration;else{const r=e.timestamp-e.started;e.duration=r>=0?r:0}s.release&&(e.release=s.release),s.environment&&(e.environment=s.environment),!e.ipAddress&&s.ipAddress&&(e.ipAddress=s.ipAddress),!e.userAgent&&s.userAgent&&(e.userAgent=s.userAgent),typeof s.errors=="number"&&(e.errors=s.errors),s.status&&(e.status=s.status)}function vd(e,s){let r={};e.status==="ok"&&(r={status:"exited"}),Dr(e,r)}function xd(e){return{sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}function dt(e,s,r=2){if(!s||typeof s!="object"||r<=0)return s;if(e&&Object.keys(s).length===0)return e;const t={...e};for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=dt(t[i],s[i],r-1));return t}function Is(){return ss()}function Ds(){return ss().substring(16)}const mi="_sentrySpan";function wr(e,s){s?Ze(e,mi,s):delete e[mi]}function Xt(e){return e[mi]}const Cd=100;class Ss{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:Is(),sampleRand:Ls()}}clone(){const s=new Ss;return s._breadcrumbs=[...this._breadcrumbs],s._tags={...this._tags},s._attributes={...this._attributes},s._extra={...this._extra},s._contexts={...this._contexts},this._contexts.flags&&(s._contexts.flags={values:[...this._contexts.flags.values]}),s._user=this._user,s._level=this._level,s._session=this._session,s._transactionName=this._transactionName,s._fingerprint=this._fingerprint,s._eventProcessors=[...this._eventProcessors],s._attachments=[...this._attachments],s._sdkProcessingMetadata={...this._sdkProcessingMetadata},s._propagationContext={...this._propagationContext},s._client=this._client,s._lastEventId=this._lastEventId,s._conversationId=this._conversationId,wr(s,Xt(this)),s}setClient(s){this._client=s}setLastEventId(s){this._lastEventId=s}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(s){this._scopeListeners.push(s)}addEventProcessor(s){return this._eventProcessors.push(s),this}setUser(s){return this._user=s||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Dr(this._session,{user:s}),this._notifyScopeListeners(),this}getUser(){return this._user}setConversationId(s){return this._conversationId=s||void 0,this._notifyScopeListeners(),this}setTags(s){return this._tags={...this._tags,...s},this._notifyScopeListeners(),this}setTag(s,r){return this.setTags({[s]:r})}setAttributes(s){return this._attributes={...this._attributes,...s},this._notifyScopeListeners(),this}setAttribute(s,r){return this.setAttributes({[s]:r})}removeAttribute(s){return s in this._attributes&&(delete this._attributes[s],this._notifyScopeListeners()),this}setExtras(s){return this._extra={...this._extra,...s},this._notifyScopeListeners(),this}setExtra(s,r){return this._extra={...this._extra,[s]:r},this._notifyScopeListeners(),this}setFingerprint(s){return this._fingerprint=s,this._notifyScopeListeners(),this}setLevel(s){return this._level=s,this._notifyScopeListeners(),this}setTransactionName(s){return this._transactionName=s,this._notifyScopeListeners(),this}setContext(s,r){return r===null?delete this._contexts[s]:this._contexts[s]=r,this._notifyScopeListeners(),this}setSession(s){return s?this._session=s:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(s){if(!s)return this;const r=typeof s=="function"?s(this):s,t=r instanceof Ss?r.getScopeData():st(r)?s:void 0,{tags:i,attributes:o,extra:a,user:l,contexts:c,level:u,fingerprint:d=[],propagationContext:m,conversationId:f}=t||{};return this._tags={...this._tags,...i},this._attributes={...this._attributes,...o},this._extra={...this._extra,...a},this._contexts={...this._contexts,...c},l&&Object.keys(l).length&&(this._user=l),u&&(this._level=u),d.length&&(this._fingerprint=d),m&&(this._propagationContext=m),f&&(this._conversationId=f),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,this._conversationId=void 0,wr(this,void 0),this._attachments=[],this.setPropagationContext({traceId:Is(),sampleRand:Ls()}),this._notifyScopeListeners(),this}addBreadcrumb(s,r){var o;const t=typeof r=="number"?r:Cd;if(t<=0)return this;const i={timestamp:ur(),...s,message:s.message?ci(s.message,2048):s.message};return this._breadcrumbs.push(i),this._breadcrumbs.length>t&&(this._breadcrumbs=this._breadcrumbs.slice(-t),(o=this._client)==null||o.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(s){return this._attachments.push(s),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:Xt(this),conversationId:this._conversationId}}setSDKProcessingMetadata(s){return this._sdkProcessingMetadata=dt(this._sdkProcessingMetadata,s,2),this}setPropagationContext(s){return this._propagationContext=s,this}getPropagationContext(){return this._propagationContext}captureException(s,r){const t=(r==null?void 0:r.event_id)||ss();if(!this._client)return G&&L.warn("No client configured on scope - will not capture exception!"),t;const i=new Error("Sentry syntheticException");return this._client.captureException(s,{originalException:s,syntheticException:i,...r,event_id:t},this),t}captureMessage(s,r,t){const i=(t==null?void 0:t.event_id)||ss();if(!this._client)return G&&L.warn("No client configured on scope - will not capture message!"),i;const o=(t==null?void 0:t.syntheticException)??new Error(s);return this._client.captureMessage(s,r,{originalException:s,syntheticException:o,...t,event_id:i},this),i}captureEvent(s,r){const t=(r==null?void 0:r.event_id)||ss();return this._client?(this._client.captureEvent(s,{...r,event_id:t},this),t):(G&&L.warn("No client configured on scope - will not capture event!"),t)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(s=>{s(this)}),this._notifyingListeners=!1)}}function Td(){return Or("defaultCurrentScope",()=>new Ss)}function kd(){return Or("defaultIsolationScope",()=>new Ss)}class _d{constructor(s,r){let t;s?t=s:t=new Ss;let i;r?i=r:i=new Ss,this._stack=[{scope:t}],this._isolationScope=i}withScope(s){const r=this._pushScope();let t;try{t=s(r)}catch(i){throw this._popScope(),i}return Fr(t)?t.then(i=>(this._popScope(),i),i=>{throw this._popScope(),i}):(this._popScope(),t)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const s=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:s}),s}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function Ur(){const e=lr(),s=hn(e);return s.stack=s.stack||new _d(Td(),kd())}function Dd(e){return Ur().withScope(e)}function wd(e,s){const r=Ur();return r.withScope(()=>(r.getStackTop().scope=e,s(e)))}function sa(e){return Ur().withScope(()=>e(Ur().getIsolationScope()))}function Ud(){return{withIsolationScope:sa,withScope:Dd,withSetScope:wd,withSetIsolationScope:(e,s)=>sa(s),getCurrentScope:()=>Ur().getScope(),getIsolationScope:()=>Ur().getIsolationScope()}}function Br(e){const s=hn(e);return s.acs?s.acs:Ud()}function Ee(){const e=lr();return Br(e).getCurrentScope()}function ms(){const e=lr();return Br(e).getIsolationScope()}function Vd(){return Or("globalScope",()=>new Ss)}function Nn(...e){const s=lr(),r=Br(s);if(e.length===2){const[t,i]=e;return t?r.withSetScope(t,i):r.withScope(i)}return r.withScope(e[0])}function ue(){return Ee().getClient()}function Id(e){const s=e.getPropagationContext(),{traceId:r,parentSpanId:t,propagationSpanId:i}=s,o={trace_id:r,span_id:i||Ds()};return t&&(o.parent_span_id=t),o}const ps="sentry.source",Gi="sentry.sample_rate",Jl="sentry.previous_trace_sample_rate",Rs="sentry.op",Re="sentry.origin",rt="sentry.idle_span_finish_reason",ft="sentry.measurement_unit",ht="sentry.measurement_value",ra="sentry.custom_span_name",Ji="sentry.profile_id",qr="sentry.exclusive_time",Rd="sentry.link.type",Md="gen_ai.conversation.id",Pd=0,Ki=1,Ie=2;function Ad(e){if(e<400&&e>=100)return{code:Ki};if(e>=400&&e<500)switch(e){case 401:return{code:Ie,message:"unauthenticated"};case 403:return{code:Ie,message:"permission_denied"};case 404:return{code:Ie,message:"not_found"};case 409:return{code:Ie,message:"already_exists"};case 413:return{code:Ie,message:"failed_precondition"};case 429:return{code:Ie,message:"resource_exhausted"};case 499:return{code:Ie,message:"cancelled"};default:return{code:Ie,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:Ie,message:"unimplemented"};case 503:return{code:Ie,message:"unavailable"};case 504:return{code:Ie,message:"deadline_exceeded"};default:return{code:Ie,message:"internal_error"}}return{code:Ie,message:"internal_error"}}function Kl(e,s){e.setAttribute("http.response.status_code",s);const r=Ad(s);r.message!=="unknown_error"&&e.setStatus(r)}const Xl="_sentryScope",Zl="_sentryIsolationScope";function Od(e){try{const s=ce.WeakRef;if(typeof s=="function")return new s(e)}catch{}return e}function Ld(e){if(e){if(typeof e=="object"&&"deref"in e&&typeof e.deref=="function")try{return e.deref()}catch{return}return e}}function Fd(e,s,r){e&&(Ze(e,Zl,Od(r)),Ze(e,Xl,s))}function Zt(e){const s=e;return{scope:s[Xl],isolationScope:Ld(s[Zl])}}const Xi="sentry-",$d=/^sentry-/,Bd=8192;function Ql(e){const s=Hd(e);if(!s)return;const r=Object.entries(s).reduce((t,[i,o])=>{if(i.match($d)){const a=i.slice(Xi.length);t[a]=o}return t},{});if(Object.keys(r).length>0)return r}function qd(e){if(!e)return;const s=Object.entries(e).reduce((r,[t,i])=>(i&&(r[`${Xi}${t}`]=i),r),{});return Wd(s)}function Hd(e){if(!(!e||!ks(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((s,r)=>{const t=ta(r);return Object.entries(t).forEach(([i,o])=>{s[i]=o}),s},{}):ta(e)}function ta(e){return e.split(",").map(s=>{const r=s.indexOf("=");if(r===-1)return[];const t=s.slice(0,r),i=s.slice(r+1);return[t,i].map(o=>{try{return decodeURIComponent(o.trim())}catch{return}})}).reduce((s,[r,t])=>(r&&t&&(s[r]=t),s),{})}function Wd(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((s,[r,t],i)=>{const o=`${encodeURIComponent(r)}=${encodeURIComponent(t)}`,a=i===0?o:`${s},${o}`;return a.length>Bd?(G&&L.warn(`Not adding key: ${r} with val: ${t} to baggage header due to exceeding baggage size limits.`),s):a},"")}const zd=/^o(\d+)\./,Yd=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)((?:\[[:.%\w]+\]|[\w.-]+))(?::(\d+))?\/(.+)/;function Gd(e){return e==="http"||e==="https"}function Hr(e,s=!1){const{host:r,path:t,pass:i,port:o,projectId:a,protocol:l,publicKey:c}=e;return`${l}://${c}${s&&i?`:${i}`:""}@${r}${o?`:${o}`:""}/${t&&`${t}/`}${a}`}function Jd(e){const s=Yd.exec(e);if(!s){cr(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[r,t,i="",o="",a="",l=""]=s.slice(1);let c="",u=l;const d=u.split("/");if(d.length>1&&(c=d.slice(0,-1).join("/"),u=d.pop()),u){const m=u.match(/^\d+/);m&&(u=m[0])}return ec({host:o,pass:i,path:c,projectId:u,port:a,protocol:r,publicKey:t})}function ec(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Kd(e){if(!G)return!0;const{port:s,projectId:r,protocol:t}=e;return["protocol","publicKey","host","projectId"].find(a=>e[a]?!1:(L.error(`Invalid Sentry Dsn: ${a} missing`),!0))?!1:r.match(/^\d+$/)?Gd(t)?s&&isNaN(parseInt(s,10))?(L.error(`Invalid Sentry Dsn: Invalid port ${s}`),!1):!0:(L.error(`Invalid Sentry Dsn: Invalid protocol ${t}`),!1):(L.error(`Invalid Sentry Dsn: Invalid projectId ${r}`),!1)}function Xd(e){const s=e.match(zd);return s==null?void 0:s[1]}function Zd(e){const s=e.getOptions(),{host:r}=e.getDsn()||{};let t;return s.orgId?t=String(s.orgId):r&&(t=Xd(r)),t}function Qd(e){const s=typeof e=="string"?Jd(e):ec(e);if(!(!s||!Kd(s)))return s}function ir(e){if(typeof e=="boolean")return Number(e);const s=typeof e=="string"?parseFloat(e):e;if(!(typeof s!="number"||isNaN(s)||s<0||s>1))return s}const sc=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function ef(e){if(!e)return;const s=e.match(sc);if(!s)return;let r;return s[3]==="1"?r=!0:s[3]==="0"&&(r=!1),{traceId:s[1],parentSampled:r,parentSpanId:s[2]}}function sf(e,s){const r=ef(e),t=Ql(s);if(!(r!=null&&r.traceId))return{traceId:Is(),sampleRand:Ls()};const i=rf(r,t);t&&(t.sample_rand=i.toString());const{traceId:o,parentSpanId:a,parentSampled:l}=r;return{traceId:o,parentSpanId:a,sampled:l,dsc:t||{},sampleRand:i}}function rc(e=Is(),s=Ds(),r){let t="";return r!==void 0&&(t=r?"-1":"-0"),`${e}-${s}${t}`}function tc(e=Is(),s=Ds(),r){return`00-${e}-${s}-${r?"01":"00"}`}function rf(e,s){const r=ir(s==null?void 0:s.sample_rand);if(r!==void 0)return r;const t=ir(s==null?void 0:s.sample_rate);return t&&(e==null?void 0:e.parentSampled)!==void 0?e.parentSampled?Ls()*t:t+Ls()*(1-t):Ls()}const nc=0,Zi=1;let na=!1;function tf(e){const{spanId:s,traceId:r}=e.spanContext(),{data:t,op:i,parent_span_id:o,status:a,origin:l,links:c}=ge(e);return{parent_span_id:o,span_id:s,trace_id:r,data:t,op:i,status:a,origin:l,links:c}}function nf(e){const{spanId:s,traceId:r,isRemote:t}=e.spanContext(),i=t?s:ge(e).parent_span_id,o=Zt(e).scope,a=t?(o==null?void 0:o.getPropagationContext().propagationSpanId)||Ds():s;return{parent_span_id:i,span_id:a,trace_id:r}}function of(e){const{traceId:s,spanId:r}=e.spanContext(),t=Ys(e);return rc(s,r,t)}function af(e){const{traceId:s,spanId:r}=e.spanContext(),t=Ys(e);return tc(s,r,t)}function ic(e){if(e&&e.length>0)return e.map(({context:{spanId:s,traceId:r,traceFlags:t,...i},attributes:o})=>({span_id:s,trace_id:r,sampled:t===Zi,attributes:o,...i}))}function sr(e){return typeof e=="number"?ia(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?ia(e.getTime()):Ae()}function ia(e){return e>9999999999?e/1e3:e}function ge(e){var t;if(cf(e))return e.getSpanJSON();const{spanId:s,traceId:r}=e.spanContext();if(lf(e)){const{attributes:i,startTime:o,name:a,endTime:l,status:c,links:u}=e,d="parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?(t=e.parentSpanContext)==null?void 0:t.spanId:void 0;return{span_id:s,trace_id:r,data:i,description:a,parent_span_id:d,start_timestamp:sr(o),timestamp:sr(l)||void 0,status:oc(c),op:i[Rs],origin:i[Re],links:ic(u)}}return{span_id:s,trace_id:r,start_timestamp:0,data:{}}}function lf(e){const s=e;return!!s.attributes&&!!s.startTime&&!!s.name&&!!s.endTime&&!!s.status}function cf(e){return typeof e.getSpanJSON=="function"}function Ys(e){const{traceFlags:s}=e.spanContext();return s===Zi}function oc(e){if(!(!e||e.code===Pd))return e.code===Ki?"ok":e.message||"internal_error"}const rr="_sentryChildSpans",di="_sentryRootSpan";function ac(e,s){const r=e[di]||e;Ze(s,di,r),e[rr]?e[rr].add(s):Ze(e,rr,new Set([s]))}function uf(e,s){e[rr]&&e[rr].delete(s)}function Ft(e){const s=new Set;function r(t){if(!s.has(t)&&Ys(t)){s.add(t);const i=t[rr]?Array.from(t[rr]):[];for(const o of i)r(o)}}return r(e),Array.from(s)}function Le(e){return e[di]||e}function We(){const e=lr(),s=Br(e);return s.getActiveSpan?s.getActiveSpan():Xt(Ee())}function fi(){na||(cr(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),na=!0)}let oa=!1;function mf(){if(oa)return;function e(){const s=We(),r=s&&Le(s);if(r){const t="internal_error";G&&L.log(`[Tracing] Root span: ${t} -> Global error occurred`),r.setStatus({code:Ie,message:t})}}e.tag="sentry_tracingErrorCallback",oa=!0,Ll(e),Fl(e)}function Ns(e){var r;if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const s=e||((r=ue())==null?void 0:r.getOptions());return!!s&&(s.tracesSampleRate!=null||!!s.tracesSampler)}function aa(e){L.log(`Ignoring span ${e.op} - ${e.description} because it matches \`ignoreSpans\`.`)}function Qt(e,s){if(!(s!=null&&s.length)||!e.description)return!1;for(const r of s){if(ff(r)){if(Lt(e.description,r))return G&&aa(e),!0;continue}if(!r.name&&!r.op)continue;const t=r.name?Lt(e.description,r.name):!0,i=r.op?e.op&&Lt(e.op,r.op):!0;if(t&&i)return G&&aa(e),!0}return!1}function df(e,s){const r=s.parent_span_id,t=s.span_id;if(r)for(const i of e)i.parent_span_id===t&&(i.parent_span_id=r)}function ff(e){return typeof e=="string"||e instanceof RegExp}const Qi="production",lc="_frozenDsc";function $t(e,s){Ze(e,lc,s)}function cc(e,s){const r=s.getOptions(),{publicKey:t}=s.getDsn()||{},i={environment:r.environment||Qi,release:r.release,public_key:t,trace_id:e,org_id:Zd(s)};return s.emit("createDsc",i),i}function uc(e,s){const r=s.getPropagationContext();return r.dsc||cc(r.traceId,e)}function Ms(e){var g;const s=ue();if(!s)return{};const r=Le(e),t=ge(r),i=t.data,o=r.spanContext().traceState,a=(o==null?void 0:o.get("sentry.sample_rate"))??i[Gi]??i[Jl];function l(p){return(typeof a=="number"||typeof a=="string")&&(p.sample_rate=`${a}`),p}const c=r[lc];if(c)return l(c);const u=o==null?void 0:o.get("sentry.dsc"),d=u&&Ql(u);if(d)return l(d);const m=cc(e.spanContext().traceId,s),f=i[ps],h=t.description;return f!=="url"&&h&&(m.transaction=h),Ns()&&(m.sampled=String(Ys(r)),m.sample_rand=(o==null?void 0:o.get("sentry.sample_rand"))??((g=Zt(r).scope)==null?void 0:g.getPropagationContext().sampleRand.toString())),l(m),s.emit("createDsc",m,r),m}class qs{constructor(s={}){this._traceId=s.traceId||Is(),this._spanId=s.spanId||Ds()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:nc}}end(s){}setAttribute(s,r){return this}setAttributes(s){return this}setStatus(s){return this}updateName(s){return this}isRecording(){return!1}addEvent(s,r,t){return this}addLink(s){return this}addLinks(s){return this}recordException(s,r){}}function hs(e,s=100,r=1/0){try{return hi("",e,s,r)}catch(t){return{ERROR:`**non-serializable** (${t})`}}}function mc(e,s=3,r=100*1024){const t=hs(e,s);return Nf(t)>r?mc(e,s-1,r):t}function hi(e,s,r=1/0,t=1/0,i=bf()){const[o,a]=i;if(s==null||["boolean","string"].includes(typeof s)||typeof s=="number"&&Number.isFinite(s))return s;const l=hf(e,s);if(!l.startsWith("[object "))return l;if(s.__sentry_skip_normalization__)return s;const c=typeof s.__sentry_override_normalization_depth__=="number"?s.__sentry_override_normalization_depth__:r;if(c===0)return l.replace("object ","");if(o(s))return"[Circular ~]";const u=s;if(u&&typeof u.toJSON=="function")try{const h=u.toJSON();return hi("",h,c-1,t,i)}catch{}const d=Array.isArray(s)?[]:{};let m=0;const f=zl(s);for(const h in f){if(!Object.prototype.hasOwnProperty.call(f,h))continue;if(m>=t){d[h]="[MaxProperties ~]";break}const g=f[h];d[h]=hi(h,g,c-1,t,i),m++}return a(s),d}function hf(e,s){try{if(e==="domain"&&s&&typeof s=="object"&&s._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&s===global)return"[Global]";if(typeof window<"u"&&s===window)return"[Window]";if(typeof document<"u"&&s===document)return"[Document]";if(ql(s))return Ol(s);if(fd(s))return"[SyntheticEvent]";if(typeof s=="number"&&!Number.isFinite(s))return`[${s}]`;if(typeof s=="function")return`[Function: ${Us(s)}]`;if(typeof s=="symbol")return`[${String(s)}]`;if(typeof s=="bigint")return`[BigInt: ${String(s)}]`;const r=gf(s);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(r){return`**non-serializable** (${r})`}}function gf(e){const s=Object.getPrototypeOf(e);return s!=null&&s.constructor?s.constructor.name:"null prototype"}function pf(e){return~-encodeURI(e).split(/%..|./).length}function Nf(e){return pf(JSON.stringify(e))}function bf(){const e=new WeakSet;function s(t){return e.has(t)?!0:(e.add(t),!1)}function r(t){e.delete(t)}return[s,r]}function Gs(e,s=[]){return[e,s]}function yf(e,s){const[r,t]=e;return[r,[...t,s]]}function gi(e,s){const r=e[1];for(const t of r){const i=t[0].type;if(s(t,i))return!0}return!1}function Ef(e,s){return gi(e,(r,t)=>s.includes(t))}function pi(e){const s=hn(ce);return s.encodePolyfill?s.encodePolyfill(e):new TextEncoder().encode(e)}function dc(e){const[s,r]=e;let t=JSON.stringify(s);function i(o){typeof t=="string"?t=typeof o=="string"?t+o:[pi(t),o]:t.push(typeof o=="string"?pi(o):o)}for(const o of r){const[a,l]=o;if(i(`
${JSON.stringify(a)}
`),typeof l=="string"||l instanceof Uint8Array)i(l);else{let c;try{c=JSON.stringify(l)}catch{c=JSON.stringify(hs(l))}i(c)}}return typeof t=="string"?t:jf(t)}function jf(e){const s=e.reduce((i,o)=>i+o.length,0),r=new Uint8Array(s);let t=0;for(const i of e)r.set(i,t),t+=i.length;return r}function Sf(e){return[{type:"span"},e]}function vf(e){const s=typeof e.data=="string"?pi(e.data):e.data;return[{type:"attachment",length:s.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},s]}const xf={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function la(e){return xf[e]}function eo(e){if(!(e!=null&&e.sdk))return;const{name:s,version:r}=e.sdk;return{name:s,version:r}}function fc(e,s,r,t){var o;const i=(o=e.sdkProcessingMetadata)==null?void 0:o.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...s&&{sdk:s},...!!r&&t&&{dsn:Hr(t)},...i&&{trace:i}}}function Cf(e,s){var t,i,o,a;if(!s)return e;const r=e.sdk||{};return e.sdk={...r,name:r.name||s.name,version:r.version||s.version,integrations:[...((t=e.sdk)==null?void 0:t.integrations)||[],...s.integrations||[]],packages:[...((i=e.sdk)==null?void 0:i.packages)||[],...s.packages||[]],settings:(o=e.sdk)!=null&&o.settings||s.settings?{...(a=e.sdk)==null?void 0:a.settings,...s.settings}:void 0},e}function Tf(e,s,r,t){const i=eo(r),o={sent_at:new Date().toISOString(),...i&&{sdk:i},...!!t&&s&&{dsn:Hr(s)}},a="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return Gs(o,[a])}function kf(e,s,r,t){const i=eo(r),o=e.type&&e.type!=="replay_event"?e.type:"event";Cf(e,r==null?void 0:r.sdk);const a=fc(e,i,t,s);return delete e.sdkProcessingMetadata,Gs(a,[[{type:o},e]])}function _f(e,s){function r(h){return!!h.trace_id&&!!h.public_key}const t=Ms(e[0]),i=s==null?void 0:s.getDsn(),o=s==null?void 0:s.getOptions().tunnel,a={sent_at:new Date().toISOString(),...r(t)&&{trace:t},...!!o&&i&&{dsn:Hr(i)}},{beforeSendSpan:l,ignoreSpans:c}=(s==null?void 0:s.getOptions())||{},u=c!=null&&c.length?e.filter(h=>!Qt(ge(h),c)):e,d=e.length-u.length;d&&(s==null||s.recordDroppedEvent("before_send","span",d));const m=l?h=>{const g=ge(h),p=l(g);return p||(fi(),g)}:ge,f=[];for(const h of u){const g=m(h);g&&f.push(Sf(g))}return Gs(a,f)}function Df(e){if(!G)return;const{description:s="< unknown name >",op:r="< unknown op >",parent_span_id:t}=ge(e),{spanId:i}=e.spanContext(),o=Ys(e),a=Le(e),l=a===e,c=`[Tracing] Starting ${o?"sampled":"unsampled"} ${l?"root ":""}span`,u=[`op: ${r}`,`name: ${s}`,`ID: ${i}`];if(t&&u.push(`parent ID: ${t}`),!l){const{op:d,description:m}=ge(a);u.push(`root ID: ${a.spanContext().spanId}`),d&&u.push(`root op: ${d}`),m&&u.push(`root description: ${m}`)}L.log(`${c}
  ${u.join(`
  `)}`)}function wf(e){if(!G)return;const{description:s="< unknown name >",op:r="< unknown op >"}=ge(e),{spanId:t}=e.spanContext(),o=Le(e)===e,a=`[Tracing] Finishing "${r}" ${o?"root ":""}span "${s}" with ID ${t}`;L.log(a)}function Uf(e,s,r,t=We()){const i=t&&Le(t);i&&(G&&L.log(`[Measurement] Setting measurement on root span: ${e} = ${s} ${r}`),i.addEvent(e,{[ht]:s,[ft]:r}))}function ca(e){if(!e||e.length===0)return;const s={};return e.forEach(r=>{const t=r.attributes||{},i=t[ft],o=t[ht];typeof i=="string"&&typeof o=="number"&&(s[r.name]={value:o,unit:i})}),s}const ua=1e3;class bn{constructor(s={}){this._traceId=s.traceId||Is(),this._spanId=s.spanId||Ds(),this._startTime=s.startTimestamp||Ae(),this._links=s.links,this._attributes={},this.setAttributes({[Re]:"manual",[Rs]:s.op,...s.attributes}),this._name=s.name,s.parentSpanId&&(this._parentSpanId=s.parentSpanId),"sampled"in s&&(this._sampled=s.sampled),s.endTimestamp&&(this._endTime=s.endTimestamp),this._events=[],this._isStandaloneSpan=s.isStandalone,this._endTime&&this._onSpanEnded()}addLink(s){return this._links?this._links.push(s):this._links=[s],this}addLinks(s){return this._links?this._links.push(...s):this._links=s,this}recordException(s,r){}spanContext(){const{_spanId:s,_traceId:r,_sampled:t}=this;return{spanId:s,traceId:r,traceFlags:t?Zi:nc}}setAttribute(s,r){return r===void 0?delete this._attributes[s]:this._attributes[s]=r,this}setAttributes(s){return Object.keys(s).forEach(r=>this.setAttribute(r,s[r])),this}updateStartTime(s){this._startTime=sr(s)}setStatus(s){return this._status=s,this}updateName(s){return this._name=s,this.setAttribute(ps,"custom"),this}end(s){this._endTime||(this._endTime=sr(s),wf(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[Rs],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:oc(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Re],profile_id:this._attributes[Ji],exclusive_time:this._attributes[qr],measurements:ca(this._events),is_segment:this._isStandaloneSpan&&Le(this)===this||void 0,segment_id:this._isStandaloneSpan?Le(this).spanContext().spanId:void 0,links:ic(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(s,r,t){G&&L.log("[Tracing] Adding an event to span:",s);const i=ma(r)?r:t||Ae(),o=ma(r)?{}:r||{},a={name:s,time:sr(i),attributes:o};return this._events.push(a),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const s=ue();if(s&&s.emit("spanEnd",this),!(this._isStandaloneSpan||this===Le(this)))return;if(this._isStandaloneSpan){this._sampled?If(_f([this],s)):(G&&L.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),s&&s.recordDroppedEvent("sample_rate","span"));return}const t=this._convertSpanToTransaction();t&&(Zt(this).scope||Ee()).captureEvent(t)}_convertSpanToTransaction(){var d;if(!da(ge(this)))return;this._name||(G&&L.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:s,isolationScope:r}=Zt(this),t=(d=s==null?void 0:s.getScopeData().sdkProcessingMetadata)==null?void 0:d.normalizedRequest;if(this._sampled!==!0)return;const o=Ft(this).filter(m=>m!==this&&!Vf(m)).map(m=>ge(m)).filter(da),a=this._attributes[ps];delete this._attributes[ra],o.forEach(m=>{delete m.data[ra]});const l={contexts:{trace:tf(this)},spans:o.length>ua?o.sort((m,f)=>m.start_timestamp-f.start_timestamp).slice(0,ua):o,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:s,capturedSpanIsolationScope:r,dynamicSamplingContext:Ms(this)},request:t,...a&&{transaction_info:{source:a}}},c=ca(this._events);return c&&Object.keys(c).length&&(G&&L.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),l.measurements=c),l}}function ma(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function da(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function Vf(e){return e instanceof bn&&e.isStandaloneSpan()}function If(e){const s=ue();if(!s)return;const r=e[1];if(!r||r.length===0){s.recordDroppedEvent("before_send","span");return}s.sendEnvelope(e)}function Rf(e,s,r=()=>{},t=()=>{}){let i;try{i=e()}catch(o){throw s(o),r(),o}return Mf(i,s,r,t)}function Mf(e,s,r,t){return Fr(e)?e.then(i=>(r(),t(i),i),i=>{throw s(i),r(),i}):(r(),t(e),e)}function Pf(e,s,r){if(!Ns(e))return[!1];let t,i;typeof e.tracesSampler=="function"?(i=e.tracesSampler({...s,inheritOrSampleWith:l=>typeof s.parentSampleRate=="number"?s.parentSampleRate:typeof s.parentSampled=="boolean"?Number(s.parentSampled):l}),t=!0):s.parentSampled!==void 0?i=s.parentSampled:typeof e.tracesSampleRate<"u"&&(i=e.tracesSampleRate,t=!0);const o=ir(i);if(o===void 0)return G&&L.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(i)} of type ${JSON.stringify(typeof i)}.`),[!1];if(!o)return G&&L.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,o,t];const a=r<o;return a||G&&L.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(i)})`),[a,o,t]}const hc="__SENTRY_SUPPRESS_TRACING__";function Af(e,s){const r=ro();if(r.startSpan)return r.startSpan(e,s);const t=pc(e),{forceTransaction:i,parentSpan:o,scope:a}=e,l=a==null?void 0:a.clone();return Nn(l,()=>Lf(o)(()=>{const u=Ee(),d=Nc(u,o),f=e.onlyIfParent&&!d?new qs:gc({parentSpan:d,spanArguments:t,forceTransaction:i,scope:u});return wr(u,f),Rf(()=>s(f),()=>{const{status:h}=ge(f);f.isRecording()&&(!h||h==="ok")&&f.setStatus({code:Ie,message:"internal_error"})},()=>{f.end()})}))}function Wr(e){const s=ro();if(s.startInactiveSpan)return s.startInactiveSpan(e);const r=pc(e),{forceTransaction:t,parentSpan:i}=e;return(e.scope?a=>Nn(e.scope,a):i!==void 0?a=>so(i,a):a=>a())(()=>{const a=Ee(),l=Nc(a,i);return e.onlyIfParent&&!l?new qs:gc({parentSpan:l,spanArguments:r,forceTransaction:t,scope:a})})}function so(e,s){const r=ro();return r.withActiveSpan?r.withActiveSpan(e,s):Nn(t=>(wr(t,e||void 0),s(t)))}function gc({parentSpan:e,spanArguments:s,forceTransaction:r,scope:t}){if(!Ns()){const a=new qs;if(r||!e){const l={sampled:"false",sample_rate:"0",transaction:s.name,...Ms(a)};$t(a,l)}return a}const i=ms();let o;if(e&&!r)o=Of(e,t,s),ac(e,o);else if(e){const a=Ms(e),{traceId:l,spanId:c}=e.spanContext(),u=Ys(e);o=fa({traceId:l,parentSpanId:c,...s},t,u),$t(o,a)}else{const{traceId:a,dsc:l,parentSpanId:c,sampled:u}={...i.getPropagationContext(),...t.getPropagationContext()};o=fa({traceId:a,parentSpanId:c,...s},t,u),l&&$t(o,l)}return Df(o),Fd(o,t,i),o}function pc(e){const r={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const t={...r};return t.startTimestamp=sr(e.startTime),delete t.startTime,t}return r}function ro(){const e=lr();return Br(e)}function fa(e,s,r){var g;const t=ue(),i=(t==null?void 0:t.getOptions())||{},{name:o=""}=e,a={spanAttributes:{...e.attributes},spanName:o,parentSampled:r};t==null||t.emit("beforeSampling",a,{decision:!1});const l=a.parentSampled??r,c=a.spanAttributes,u=s.getPropagationContext(),[d,m,f]=s.getScopeData().sdkProcessingMetadata[hc]?[!1]:Pf(i,{name:o,parentSampled:l,attributes:c,parentSampleRate:ir((g=u.dsc)==null?void 0:g.sample_rate)},u.sampleRand),h=new bn({...e,attributes:{[ps]:"custom",[Gi]:m!==void 0&&f?m:void 0,...c},sampled:d});return!d&&t&&(G&&L.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),t.recordDroppedEvent("sample_rate","transaction")),t&&t.emit("spanStart",h),h}function Of(e,s,r){const{spanId:t,traceId:i}=e.spanContext(),o=s.getScopeData().sdkProcessingMetadata[hc]?!1:Ys(e),a=o?new bn({...r,parentSpanId:t,traceId:i,sampled:o}):new qs({traceId:i});ac(e,a);const l=ue();return l&&(l.emit("spanStart",a),r.endTimestamp&&l.emit("spanEnd",a)),a}function Nc(e,s){if(s)return s;if(s===null)return;const r=Xt(e);if(!r)return;const t=ue();return(t?t.getOptions():{}).parentSpanIsAlwaysRootSpan?Le(r):r}function Lf(e){return e!==void 0?s=>so(e,s):s=>s()}const Bt={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},Ff="heartbeatFailed",$f="idleTimeout",Bf="finalTimeout",qf="externalFinish";function bc(e,s={}){const r=new Map;let t=!1,i,o=qf,a=!s.disableAutoFinish;const l=[],{idleTimeout:c=Bt.idleTimeout,finalTimeout:u=Bt.finalTimeout,childSpanTimeout:d=Bt.childSpanTimeout,beforeSpanEnd:m,trimIdleSpanEndTimestamp:f=!0}=s,h=ue();if(!h||!Ns()){const S=new qs,I={sample_rate:"0",sampled:"false",...Ms(S)};return $t(S,I),S}const g=Ee(),p=We(),N=Hf(e);N.end=new Proxy(N.end,{apply(S,I,F){if(m&&m(N),I instanceof qs)return;const[U,...T]=F,w=U||Ae(),v=sr(w),D=Ft(N).filter(M=>M!==N),H=ge(N);if(!D.length||!f)return C(v),Reflect.apply(S,I,[v,...T]);const z=h.getOptions().ignoreSpans,$=D==null?void 0:D.reduce((M,B)=>{const W=ge(B);return!W.timestamp||z&&Qt(W,z)?M:M?Math.max(M,W.timestamp):W.timestamp},void 0),O=H.start_timestamp,V=Math.min(O?O+u/1e3:1/0,Math.max(O||-1/0,Math.min(v,$||1/0)));return C(V),Reflect.apply(S,I,[V,...T])}});function y(){i&&(clearTimeout(i),i=void 0)}function E(S){y(),i=setTimeout(()=>{!t&&r.size===0&&a&&(o=$f,N.end(S))},c)}function R(S){i=setTimeout(()=>{!t&&a&&(o=Ff,N.end(S))},d)}function A(S){y(),r.set(S,!0);const I=Ae();R(I+d/1e3)}function _(S){if(r.has(S)&&r.delete(S),r.size===0){const I=Ae();E(I+c/1e3)}}function C(S){t=!0,r.clear(),l.forEach(D=>D()),wr(g,p);const I=ge(N),{start_timestamp:F}=I;if(!F)return;I.data[rt]||N.setAttribute(rt,o);const T=I.status;(!T||T==="unknown")&&N.setStatus({code:Ki}),L.log(`[Tracing] Idle span "${I.op}" finished`);const w=Ft(N).filter(D=>D!==N);let v=0;w.forEach(D=>{D.isRecording()&&(D.setStatus({code:Ie,message:"cancelled"}),D.end(S),G&&L.log("[Tracing] Cancelling span since span ended early",JSON.stringify(D,void 0,2)));const H=ge(D),{timestamp:z=0,start_timestamp:$=0}=H,O=$<=S,V=(u+c)/1e3,M=z-$<=V;if(G){const B=JSON.stringify(D,void 0,2);O?M||L.log("[Tracing] Discarding span since it finished after idle span final timeout",B):L.log("[Tracing] Discarding span since it happened after idle span was finished",B)}(!M||!O)&&(uf(N,D),v++)}),v>0&&N.setAttribute("sentry.idle_span_discarded_spans",v)}return l.push(h.on("spanStart",S=>{if(t||S===N||ge(S).timestamp||S instanceof bn&&S.isStandaloneSpan())return;Ft(N).includes(S)&&A(S.spanContext().spanId)})),l.push(h.on("spanEnd",S=>{t||_(S.spanContext().spanId)})),l.push(h.on("idleSpanEnableAutoFinish",S=>{S===N&&(a=!0,E(),r.size&&R())})),s.disableAutoFinish||E(),setTimeout(()=>{t||(N.setStatus({code:Ie,message:"deadline_exceeded"}),o=Bf,N.end())},u),N}function Hf(e){const s=Wr(e);return wr(Ee(),s),G&&L.log("[Tracing] Started span is an idle span"),s}const qn=0,ha=1,ga=2;function yn(e){return new tt(s=>{s(e)})}function to(e){return new tt((s,r)=>{r(e)})}class tt{constructor(s){this._state=qn,this._handlers=[],this._runExecutor(s)}then(s,r){return new tt((t,i)=>{this._handlers.push([!1,o=>{if(!s)t(o);else try{t(s(o))}catch(a){i(a)}},o=>{if(!r)i(o);else try{t(r(o))}catch(a){i(a)}}]),this._executeHandlers()})}catch(s){return this.then(r=>r,s)}finally(s){return new tt((r,t)=>{let i,o;return this.then(a=>{o=!1,i=a,s&&s()},a=>{o=!0,i=a,s&&s()}).then(()=>{if(o){t(i);return}r(i)})})}_executeHandlers(){if(this._state===qn)return;const s=this._handlers.slice();this._handlers=[],s.forEach(r=>{r[0]||(this._state===ha&&r[1](this._value),this._state===ga&&r[2](this._value),r[0]=!0)})}_runExecutor(s){const r=(o,a)=>{if(this._state===qn){if(Fr(a)){a.then(t,i);return}this._state=o,this._value=a,this._executeHandlers()}},t=o=>{r(ha,o)},i=o=>{r(ga,o)};try{s(t,i)}catch(o){i(o)}}}function Wf(e,s,r,t=0){try{const i=Ni(s,r,e,t);return Fr(i)?i:yn(i)}catch(i){return to(i)}}function Ni(e,s,r,t){const i=r[t];if(!e||!i)return e;const o=i({...e},s);return G&&o===null&&L.log(`Event processor "${i.id||"?"}" dropped event`),Fr(o)?o.then(a=>Ni(a,s,r,t+1)):Ni(o,s,r,t+1)}let Cs,pa,Na,Ps;function zf(e){const s=ce._sentryDebugIds,r=ce._debugIds;if(!s&&!r)return{};const t=s?Object.keys(s):[],i=r?Object.keys(r):[];if(Ps&&t.length===pa&&i.length===Na)return Ps;pa=t.length,Na=i.length,Ps={},Cs||(Cs={});const o=(a,l)=>{for(const c of a){const u=l[c],d=Cs==null?void 0:Cs[c];if(d&&Ps&&u)Ps[d[0]]=u,Cs&&(Cs[c]=[d[0],u]);else if(u){const m=e(c);for(let f=m.length-1;f>=0;f--){const h=m[f],g=h==null?void 0:h.filename;if(g&&Ps&&Cs){Ps[g]=u,Cs[c]=[g,u];break}}}}};return s&&o(t,s),r&&o(i,r),Ps}function Yf(e,s){const{fingerprint:r,span:t,breadcrumbs:i,sdkProcessingMetadata:o}=s;Jf(e,s),t&&Zf(e,t),Qf(e,r),Kf(e,i),Xf(e,o)}function ba(e,s){const{extra:r,tags:t,attributes:i,user:o,contexts:a,level:l,sdkProcessingMetadata:c,breadcrumbs:u,fingerprint:d,eventProcessors:m,attachments:f,propagationContext:h,transactionName:g,span:p}=s;Gr(e,"extra",r),Gr(e,"tags",t),Gr(e,"attributes",i),Gr(e,"user",o),Gr(e,"contexts",a),e.sdkProcessingMetadata=dt(e.sdkProcessingMetadata,c,2),l&&(e.level=l),g&&(e.transactionName=g),p&&(e.span=p),u.length&&(e.breadcrumbs=[...e.breadcrumbs,...u]),d.length&&(e.fingerprint=[...e.fingerprint,...d]),m.length&&(e.eventProcessors=[...e.eventProcessors,...m]),f.length&&(e.attachments=[...e.attachments,...f]),e.propagationContext={...e.propagationContext,...h}}function Gr(e,s,r){e[s]=dt(e[s],r,1)}function Gf(e,s){const r=Vd().getScopeData();return e&&ba(r,e.getScopeData()),s&&ba(r,s.getScopeData()),r}function Jf(e,s){const{extra:r,tags:t,user:i,contexts:o,level:a,transactionName:l}=s;Object.keys(r).length&&(e.extra={...r,...e.extra}),Object.keys(t).length&&(e.tags={...t,...e.tags}),Object.keys(i).length&&(e.user={...i,...e.user}),Object.keys(o).length&&(e.contexts={...o,...e.contexts}),a&&(e.level=a),l&&e.type!=="transaction"&&(e.transaction=l)}function Kf(e,s){const r=[...e.breadcrumbs||[],...s];e.breadcrumbs=r.length?r:void 0}function Xf(e,s){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...s}}function Zf(e,s){e.contexts={trace:nf(s),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:Ms(s),...e.sdkProcessingMetadata};const r=Le(s),t=ge(r).description;t&&!e.transaction&&e.type==="transaction"&&(e.transaction=t)}function Qf(e,s){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],s&&(e.fingerprint=e.fingerprint.concat(s)),e.fingerprint.length||delete e.fingerprint}function yc(e,s,r,t,i,o){const{normalizeDepth:a=3,normalizeMaxBreadth:l=1e3}=e,c={...s,event_id:s.event_id||r.event_id||ss(),timestamp:s.timestamp||ur()},u=r.integrations||e.integrations.map(N=>N.name);eh(c,e),th(c,u),i&&i.emit("applyFrameMetadata",s),s.type===void 0&&sh(c,e.stackParser);const d=ih(t,r.captureContext);r.mechanism&&_r(c,r.mechanism);const m=i?i.getEventProcessors():[],f=Gf(o,d),h=[...r.attachments||[],...f.attachments];h.length&&(r.attachments=h),Yf(c,f);const g=[...m,...f.eventProcessors];return Wf(g,c,r).then(N=>(N&&rh(N),typeof a=="number"&&a>0?nh(N,a,l):N))}function eh(e,s){var l,c;const{environment:r,release:t,dist:i,maxValueLength:o}=s;e.environment=e.environment||r||Qi,!e.release&&t&&(e.release=t),!e.dist&&i&&(e.dist=i);const a=e.request;a!=null&&a.url&&o&&(a.url=ci(a.url,o)),o&&((c=(l=e.exception)==null?void 0:l.values)==null||c.forEach(u=>{u.value&&(u.value=ci(u.value,o))}))}function sh(e,s){var t,i;const r=zf(s);(i=(t=e.exception)==null?void 0:t.values)==null||i.forEach(o=>{var a,l;(l=(a=o.stacktrace)==null?void 0:a.frames)==null||l.forEach(c=>{c.filename&&(c.debug_id=r[c.filename])})})}function rh(e){var t,i;const s={};if((i=(t=e.exception)==null?void 0:t.values)==null||i.forEach(o=>{var a,l;(l=(a=o.stacktrace)==null?void 0:a.frames)==null||l.forEach(c=>{c.debug_id&&(c.abs_path?s[c.abs_path]=c.debug_id:c.filename&&(s[c.filename]=c.debug_id),delete c.debug_id)})}),Object.keys(s).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const r=e.debug_meta.images;Object.entries(s).forEach(([o,a])=>{r.push({type:"sourcemap",code_file:o,debug_id:a})})}function th(e,s){s.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...s])}function nh(e,s,r){var i,o;if(!e)return null;const t={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(a=>({...a,...a.data&&{data:hs(a.data,s,r)}}))},...e.user&&{user:hs(e.user,s,r)},...e.contexts&&{contexts:hs(e.contexts,s,r)},...e.extra&&{extra:hs(e.extra,s,r)}};return(i=e.contexts)!=null&&i.trace&&t.contexts&&(t.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(t.contexts.trace.data=hs(e.contexts.trace.data,s,r))),e.spans&&(t.spans=e.spans.map(a=>({...a,...a.data&&{data:hs(a.data,s,r)}}))),(o=e.contexts)!=null&&o.flags&&t.contexts&&(t.contexts.flags=hs(e.contexts.flags,3,r)),t}function ih(e,s){if(!s)return e;const r=e?e.clone():new Ss;return r.update(s),r}function oh(e){if(e)return ah(e)?{captureContext:e}:ch(e)?{captureContext:e}:e}function ah(e){return e instanceof Ss||typeof e=="function"}const lh=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function ch(e){return Object.keys(e).some(s=>lh.includes(s))}function gt(e,s){return Ee().captureException(e,oh(s))}function Ec(e,s){return Ee().captureEvent(e,s)}function jc(e,s){ms().setContext(e,s)}function ya(e){ms().setUser(e)}function uh(){const e=ue();return(e==null?void 0:e.getOptions().enabled)!==!1&&!!(e!=null&&e.getTransport())}function mh(e){ms().addEventProcessor(e)}function Ea(e){const s=ms(),r=Ee(),{userAgent:t}=ce.navigator||{},i=Sd({user:r.getUser()||s.getUser(),...t&&{userAgent:t},...e}),o=s.getSession();return(o==null?void 0:o.status)==="ok"&&Dr(o,{status:"exited"}),Sc(),s.setSession(i),i}function Sc(){const e=ms(),r=Ee().getSession()||e.getSession();r&&vd(r),vc(),e.setSession()}function vc(){const e=ms(),s=ue(),r=e.getSession();r&&s&&s.captureSession(r)}function ja(e=!1){if(e){Sc();return}vc()}const dh="7";function fh(e){const s=e.protocol?`${e.protocol}:`:"",r=e.port?`:${e.port}`:"";return`${s}//${e.host}${r}${e.path?`/${e.path}`:""}/api/`}function hh(e){return`${fh(e)}${e.projectId}/envelope/`}function gh(e,s){const r={sentry_version:dh};return e.publicKey&&(r.sentry_key=e.publicKey),s&&(r.sentry_client=`${s.name}/${s.version}`),new URLSearchParams(r).toString()}function ph(e,s,r){return s||`${hh(e)}?${gh(e,r)}`}const Sa=[];function Nh(e){const s={};return e.forEach(r=>{const{name:t}=r,i=s[t];i&&!i.isDefaultInstance&&r.isDefaultInstance||(s[t]=r)}),Object.values(s)}function bh(e){const s=e.defaultIntegrations||[],r=e.integrations;s.forEach(i=>{i.isDefaultInstance=!0});let t;if(Array.isArray(r))t=[...s,...r];else if(typeof r=="function"){const i=r(s);t=Array.isArray(i)?i:[i]}else t=s;return Nh(t)}function yh(e,s){const r={};return s.forEach(t=>{t&&xc(e,t,r)}),r}function va(e,s){for(const r of s)r!=null&&r.afterAllSetup&&r.afterAllSetup(e)}function xc(e,s,r){if(r[s.name]){G&&L.log(`Integration skipped because it was already installed: ${s.name}`);return}if(r[s.name]=s,!Sa.includes(s.name)&&typeof s.setupOnce=="function"&&(s.setupOnce(),Sa.push(s.name)),s.setup&&typeof s.setup=="function"&&s.setup(e),typeof s.preprocessEvent=="function"){const t=s.preprocessEvent.bind(s);e.on("preprocessEvent",(i,o)=>t(i,o,e))}if(typeof s.processEvent=="function"){const t=s.processEvent.bind(s),i=Object.assign((o,a)=>t(o,a,e),{id:s.name});e.addEventProcessor(i)}G&&L.log(`Integration installed: ${s.name}`)}function Eh(e){return[{type:"log",item_count:e.length,content_type:"application/vnd.sentry.items.log+json"},{items:e}]}function jh(e,s,r,t){const i={};return s!=null&&s.sdk&&(i.sdk={name:s.sdk.name,version:s.sdk.version}),r&&t&&(i.dsn=Hr(t)),Gs(i,[Eh(e)])}function Cc(e,s){const r=s??Sh(e)??[];if(r.length===0)return;const t=e.getOptions(),i=jh(r,t._metadata,t.tunnel,e.getDsn());Tc().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(i)}function Sh(e){return Tc().get(e)}function Tc(){return Or("clientToLogBufferMap",()=>new WeakMap)}function vh(e){return[{type:"trace_metric",item_count:e.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:e}]}function xh(e,s,r,t){const i={};return s!=null&&s.sdk&&(i.sdk={name:s.sdk.name,version:s.sdk.version}),r&&t&&(i.dsn=Hr(t)),Gs(i,[vh(e)])}function kc(e,s){const r=s??Ch(e)??[];if(r.length===0)return;const t=e.getOptions(),i=xh(r,t._metadata,t.tunnel,e.getDsn());_c().set(e,[]),e.emit("flushMetrics"),e.sendEnvelope(i)}function Ch(e){return _c().get(e)}function _c(){return Or("clientToMetricBufferMap",()=>new WeakMap)}const no=Symbol.for("SentryBufferFullError");function io(e=100){const s=new Set;function r(){return s.size<e}function t(a){s.delete(a)}function i(a){if(!r())return to(no);const l=a();return s.add(l),l.then(()=>t(l),()=>t(l)),l}function o(a){if(!s.size)return yn(!0);const l=Promise.allSettled(Array.from(s)).then(()=>!0);if(!a)return l;const c=[l,new Promise(u=>setTimeout(()=>u(!1),a))];return Promise.race(c)}return{get $(){return Array.from(s)},add:i,drain:o}}const Th=60*1e3;function kh(e,s=mt()){const r=parseInt(`${e}`,10);if(!isNaN(r))return r*1e3;const t=Date.parse(`${e}`);return isNaN(t)?Th:t-s}function _h(e,s){return e[s]||e.all||0}function Dc(e,s,r=mt()){return _h(e,s)>r}function wc(e,{statusCode:s,headers:r},t=mt()){const i={...e},o=r==null?void 0:r["x-sentry-rate-limits"],a=r==null?void 0:r["retry-after"];if(o)for(const l of o.trim().split(",")){const[c,u,,,d]=l.split(":",5),m=parseInt(c,10),f=(isNaN(m)?60:m)*1e3;if(!u)i.all=t+f;else for(const h of u.split(";"))h==="metric_bucket"?(!d||d.split(";").includes("custom"))&&(i[h]=t+f):i[h]=t+f}else a?i.all=t+kh(a,t):s===429&&(i.all=t+60*1e3);return i}const Uc=64;function Dh(e,s,r=io(e.bufferSize||Uc)){let t={};const i=a=>r.drain(a);function o(a){const l=[];if(gi(a,(m,f)=>{const h=la(f);Dc(t,h)?e.recordDroppedEvent("ratelimit_backoff",h):l.push(m)}),l.length===0)return Promise.resolve({});const c=Gs(a[0],l),u=m=>{if(Ef(c,["client_report"])){G&&L.warn(`Dropping client report. Will not send outcomes (reason: ${m}).`);return}gi(c,(f,h)=>{e.recordDroppedEvent(m,la(h))})},d=()=>s({body:dc(c)}).then(m=>(m.statusCode!==void 0&&(m.statusCode<200||m.statusCode>=300)&&G&&L.warn(`Sentry responded with status code ${m.statusCode} to sent event.`),t=wc(t,m),m),m=>{throw u("network_error"),G&&L.error("Encountered error running transport request:",m),m});return r.add(d).then(m=>m,m=>{if(m===no)return G&&L.error("Skipped sending event because buffer is full."),u("queue_overflow"),Promise.resolve({});throw m})}return{send:o,flush:i}}function wh(e,s,r){const t=[{type:"client_report"},{timestamp:ur(),discarded_events:e}];return Gs(s?{dsn:s}:{},[t])}function Vc(e){const s=[];e.message&&s.push(e.message);try{const r=e.exception.values[e.exception.values.length-1];r!=null&&r.value&&(s.push(r.value),r.type&&s.push(`${r.type}: ${r.value}`))}catch{}return s}function Uh(e){var c;const{trace_id:s,parent_span_id:r,span_id:t,status:i,origin:o,data:a,op:l}=((c=e.contexts)==null?void 0:c.trace)??{};return{data:a??{},description:e.transaction,op:l,parent_span_id:r,span_id:t??"",start_timestamp:e.start_timestamp??0,status:i,timestamp:e.timestamp,trace_id:s??"",origin:o,profile_id:a==null?void 0:a[Ji],exclusive_time:a==null?void 0:a[qr],measurements:e.measurements,is_segment:!0}}function Vh(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[Ji]:e.profile_id},...e.exclusive_time&&{[qr]:e.exclusive_time}}}},measurements:e.measurements}}const xa="Not capturing exception because it's already been captured.",Ca="Discarded session because of missing or non-string release",Ic=Symbol.for("SentryInternalError"),Rc=Symbol.for("SentryDoNotSendEventError"),Ih=5e3;function qt(e){return{message:e,[Ic]:!0}}function Hn(e){return{message:e,[Rc]:!0}}function Ta(e){return!!e&&typeof e=="object"&&Ic in e}function ka(e){return!!e&&typeof e=="object"&&Rc in e}function _a(e,s,r,t,i){let o=0,a,l=!1;e.on(r,()=>{o=0,clearTimeout(a),l=!1}),e.on(s,c=>{o+=t(c),o>=8e5?i(e):l||(l=!0,a=setTimeout(()=>{i(e)},Ih))}),e.on("flush",()=>{i(e)})}class Rh{constructor(s){var t,i,o;if(this._options=s,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],this._promiseBuffer=io(((t=s.transportOptions)==null?void 0:t.bufferSize)??Uc),s.dsn?this._dsn=Qd(s.dsn):G&&L.warn("No DSN provided, client will not send events."),this._dsn){const a=ph(this._dsn,s.tunnel,s._metadata?s._metadata.sdk:void 0);this._transport=s.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...s.transportOptions,url:a})}this._options.enableLogs=this._options.enableLogs??((i=this._options._experiments)==null?void 0:i.enableLogs),this._options.enableLogs&&_a(this,"afterCaptureLog","flushLogs",Oh,Cc),(this._options.enableMetrics??((o=this._options._experiments)==null?void 0:o.enableMetrics)??!0)&&_a(this,"afterCaptureMetric","flushMetrics",Ah,kc)}captureException(s,r,t){const i=ss();if(Qo(s))return G&&L.log(xa),i;const o={event_id:i,...r};return this._process(()=>this.eventFromException(s,o).then(a=>this._captureEvent(a,o,t)).then(a=>a),"error"),o.event_id}captureMessage(s,r,t,i){const o={event_id:ss(),...t},a=Hi(s)?s:String(s),l=kr(s),c=l?this.eventFromMessage(a,r,o):this.eventFromException(s,o);return this._process(()=>c.then(u=>this._captureEvent(u,o,i)),l?"unknown":"error"),o.event_id}captureEvent(s,r,t){const i=ss();if(r!=null&&r.originalException&&Qo(r.originalException))return G&&L.log(xa),i;const o={event_id:i,...r},a=s.sdkProcessingMetadata||{},l=a.capturedSpanScope,c=a.capturedSpanIsolationScope,u=Da(s.type);return this._process(()=>this._captureEvent(s,o,l||t,c),u),o.event_id}captureSession(s){this.sendSession(s),Dr(s,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(s){const r=this._transport;if(!r)return!0;this.emit("flush");const t=await this._isClientDoneProcessing(s),i=await r.flush(s);return t&&i}async close(s){const r=await this.flush(s);return this.getOptions().enabled=!1,this.emit("close"),r}getEventProcessors(){return this._eventProcessors}addEventProcessor(s){this._eventProcessors.push(s)}init(){(this._isEnabled()||this._options.integrations.some(({name:s})=>s.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(s){return this._integrations[s]}addIntegration(s){const r=this._integrations[s.name];xc(this,s,this._integrations),r||va(this,[s])}sendEvent(s,r={}){this.emit("beforeSendEvent",s,r);let t=kf(s,this._dsn,this._options._metadata,this._options.tunnel);for(const i of r.attachments||[])t=yf(t,vf(i));this.sendEnvelope(t).then(i=>this.emit("afterSendEvent",s,i))}sendSession(s){const{release:r,environment:t=Qi}=this._options;if("aggregates"in s){const o=s.attrs||{};if(!o.release&&!r){G&&L.warn(Ca);return}o.release=o.release||r,o.environment=o.environment||t,s.attrs=o}else{if(!s.release&&!r){G&&L.warn(Ca);return}s.release=s.release||r,s.environment=s.environment||t}this.emit("beforeSendSession",s);const i=Tf(s,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(i)}recordDroppedEvent(s,r,t=1){if(this._options.sendClientReports){const i=`${s}:${r}`;G&&L.log(`Recording outcome: "${i}"${t>1?` (${t} times)`:""}`),this._outcomes[i]=(this._outcomes[i]||0)+t}}on(s,r){const t=this._hooks[s]=this._hooks[s]||new Set,i=(...o)=>r(...o);return t.add(i),()=>{t.delete(i)}}emit(s,...r){const t=this._hooks[s];t&&t.forEach(i=>i(...r))}async sendEnvelope(s){if(this.emit("beforeEnvelope",s),this._isEnabled()&&this._transport)try{return await this._transport.send(s)}catch(r){return G&&L.error("Error while sending envelope:",r),{}}return G&&L.error("Transport disabled"),{}}_setupIntegrations(){const{integrations:s}=this._options;this._integrations=yh(this,s),va(this,s)}_updateSessionFromEvent(s,r){var c,u;let t=r.level==="fatal",i=!1;const o=(c=r.exception)==null?void 0:c.values;if(o){i=!0,t=!1;for(const d of o)if(((u=d.mechanism)==null?void 0:u.handled)===!1){t=!0;break}}const a=s.status==="ok";(a&&s.errors===0||a&&t)&&(Dr(s,{...t&&{status:"crashed"},errors:s.errors||Number(i||t)}),this.captureSession(s))}async _isClientDoneProcessing(s){let r=0;for(;!s||r<s;){if(await new Promise(t=>setTimeout(t,1)),!this._numProcessing)return!0;r++}return!1}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(s,r,t,i){const o=this.getOptions(),a=Object.keys(this._integrations);return!r.integrations&&(a!=null&&a.length)&&(r.integrations=a),this.emit("preprocessEvent",s,r),s.type||i.setLastEventId(s.event_id||r.event_id),yc(o,s,r,t,this,i).then(l=>{if(l===null)return l;this.emit("postprocessEvent",l,r),l.contexts={trace:Id(t),...l.contexts};const c=uc(this,t);return l.sdkProcessingMetadata={dynamicSamplingContext:c,...l.sdkProcessingMetadata},l})}_captureEvent(s,r={},t=Ee(),i=ms()){return G&&bi(s)&&L.log(`Captured error event \`${Vc(s)[0]||"<unknown>"}\``),this._processEvent(s,r,t,i).then(o=>o.event_id,o=>{G&&(ka(o)?L.log(o.message):Ta(o)?L.warn(o.message):L.warn(o))})}_processEvent(s,r,t,i){const o=this.getOptions(),{sampleRate:a}=o,l=Mc(s),c=bi(s),d=`before send for type \`${s.type||"error"}\``,m=typeof a>"u"?void 0:ir(a);if(c&&typeof m=="number"&&Ls()>m)return this.recordDroppedEvent("sample_rate","error"),to(Hn(`Discarding event because it's not included in the random sample (sampling rate = ${a})`));const f=Da(s.type);return this._prepareEvent(s,r,t,i).then(h=>{if(h===null)throw this.recordDroppedEvent("event_processor",f),Hn("An event processor returned `null`, will not send event.");if(r.data&&r.data.__sentry__===!0)return h;const p=Ph(this,o,h,r);return Mh(p,d)}).then(h=>{var N;if(h===null){if(this.recordDroppedEvent("before_send",f),l){const E=1+(s.spans||[]).length;this.recordDroppedEvent("before_send","span",E)}throw Hn(`${d} returned \`null\`, will not send event.`)}const g=t.getSession()||i.getSession();if(c&&g&&this._updateSessionFromEvent(g,h),l){const y=((N=h.sdkProcessingMetadata)==null?void 0:N.spanCountBeforeProcessing)||0,E=h.spans?h.spans.length:0,R=y-E;R>0&&this.recordDroppedEvent("before_send","span",R)}const p=h.transaction_info;if(l&&p&&h.transaction!==s.transaction){const y="custom";h.transaction_info={...p,source:y}}return this.sendEvent(h,r),h}).then(null,h=>{throw ka(h)||Ta(h)?h:(this.captureException(h,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:h}),qt(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${h}`))})}_process(s,r){this._numProcessing++,this._promiseBuffer.add(s).then(t=>(this._numProcessing--,t),t=>(this._numProcessing--,t===no&&this.recordDroppedEvent("queue_overflow",r),t))}_clearOutcomes(){const s=this._outcomes;return this._outcomes={},Object.entries(s).map(([r,t])=>{const[i,o]=r.split(":");return{reason:i,category:o,quantity:t}})}_flushOutcomes(){G&&L.log("Flushing outcomes...");const s=this._clearOutcomes();if(s.length===0){G&&L.log("No outcomes to send");return}if(!this._dsn){G&&L.log("No dsn provided, will not send outcomes");return}G&&L.log("Sending outcomes:",s);const r=wh(s,this._options.tunnel&&Hr(this._dsn));this.sendEnvelope(r)}}function Da(e){return e==="replay_event"?"replay":e||"error"}function Mh(e,s){const r=`${s} must return \`null\` or a valid event.`;if(Fr(e))return e.then(t=>{if(!st(t)&&t!==null)throw qt(r);return t},t=>{throw qt(`${s} rejected with ${t}`)});if(!st(e)&&e!==null)throw qt(r);return e}function Ph(e,s,r,t){const{beforeSend:i,beforeSendTransaction:o,beforeSendSpan:a,ignoreSpans:l}=s;let c=r;if(bi(c)&&i)return i(c,t);if(Mc(c)){if(a||l){const u=Uh(c);if(l!=null&&l.length&&Qt(u,l))return null;if(a){const d=a(u);d?c=dt(r,Vh(d)):fi()}if(c.spans){const d=[],m=c.spans;for(const h of m){if(l!=null&&l.length&&Qt(h,l)){df(m,h);continue}if(a){const g=a(h);g?d.push(g):(fi(),d.push(h))}else d.push(h)}const f=c.spans.length-d.length;f&&e.recordDroppedEvent("before_send","span",f),c.spans=d}}if(o){if(c.spans){const u=c.spans.length;c.sdkProcessingMetadata={...r.sdkProcessingMetadata,spanCountBeforeProcessing:u}}return o(c,t)}}return c}function bi(e){return e.type===void 0}function Mc(e){return e.type==="transaction"}function Ah(e){let s=0;return e.name&&(s+=e.name.length*2),s+=8,s+Pc(e.attributes)}function Oh(e){let s=0;return e.message&&(s+=e.message.length*2),s+Pc(e.attributes)}function Pc(e){if(!e)return 0;let s=0;return Object.values(e).forEach(r=>{Array.isArray(r)?s+=r.length*wa(r[0]):kr(r)?s+=wa(r):s+=100}),s}function wa(e){return typeof e=="string"?e.length*2:typeof e=="number"?8:typeof e=="boolean"?4:0}function Lh(e){return gn(e)&&"__sentry_fetch_url_host__"in e&&typeof e.__sentry_fetch_url_host__=="string"}function Ua(e){return Lh(e)?`${e.message} (${e.__sentry_fetch_url_host__})`:e.message}function Fh(e,s){s.debug===!0&&(G?L.enable():cr(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),Ee().update(s.initialScope);const t=new e(s);return $h(t),t.init(),t}function $h(e){Ee().setClient(e)}const Bh="thismessage:/";function oo(e){return"isRelative"in e}function ao(e,s){const r=e.indexOf("://")<=0&&e.indexOf("//")!==0,t=r?Bh:void 0;try{if("canParse"in URL&&!URL.canParse(e,t))return;const i=new URL(e,t);return r?{isRelative:r,pathname:i.pathname,search:i.search,hash:i.hash}:i}catch{}}function qh(e){if(oo(e))return e.pathname;const s=new URL(e);return s.search="",s.hash="",["80","443"].includes(s.port)&&(s.port=""),s.password&&(s.password="%filtered%"),s.username&&(s.username="%filtered%"),s.toString()}function tr(e){if(!e)return{};const s=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!s)return{};const r=s[6]||"",t=s[8]||"";return{host:s[4],path:s[5],protocol:s[2],search:r,hash:t,relative:s[5]+r+t}}function Hh(e){return e.split(/[?#]/,1)[0]}function Fs(e,s=!0){if(e.startsWith("data:")){const r=e.match(/^data:([^;,]+)/),t=r?r[1]:"text/plain",i=e.includes(";base64,"),o=e.indexOf(",");let a="";if(s&&o!==-1){const l=e.slice(o+1);a=l.length>10?`${l.slice(0,10)}... [truncated]`:l}return`data:${t}${i?",base64":""}${a?`,${a}`:""}`}return e}function Wh(e,s){const r=s==null?void 0:s.getDsn(),t=s==null?void 0:s.getOptions().tunnel;return Yh(e,r)||zh(e,t)}function zh(e,s){return s?Va(e)===Va(s):!1}function Yh(e,s){const r=ao(e);return!r||oo(r)?!1:s?r.host.includes(s.host)&&/(^|&|\?)sentry_key=/.test(r.search):!1}function Va(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function Gh(e){var s;"aggregates"in e?((s=e.attrs)==null?void 0:s.ip_address)===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function Ac(e,s,r=[s],t="npm"){const i=e._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${s}`,packages:r.map(o=>({name:`${t}:@sentry/${o}`,version:er})),version:er}),e._metadata=i}function Oc(e={}){const s=e.client||ue();if(!uh()||!s)return{};const r=lr(),t=Br(r);if(t.getTraceData)return t.getTraceData(e);const i=e.scope||Ee(),o=e.span||We(),a=o?of(o):Jh(i),l=o?Ms(o):uc(s,i),c=qd(l);if(!sc.test(a))return L.warn("Invalid sentry-trace data. Cannot generate trace data"),{};const d={"sentry-trace":a,baggage:c};return e.propagateTraceparent&&(d.traceparent=o?af(o):Kh(i)),d}function Jh(e){const{traceId:s,sampled:r,propagationSpanId:t}=e.getPropagationContext();return rc(s,t,r)}function Kh(e){const{traceId:s,sampled:r,propagationSpanId:t}=e.getPropagationContext();return tc(s,t,r)}function Xh(e,s,r){let t,i,o;const a=r!=null&&r.maxWait?Math.max(r.maxWait,s):0,l=(r==null?void 0:r.setTimeoutImpl)||setTimeout;function c(){return u(),t=e(),t}function u(){i!==void 0&&clearTimeout(i),o!==void 0&&clearTimeout(o),i=o=void 0}function d(){return i!==void 0||o!==void 0?c():t}function m(){return i&&clearTimeout(i),i=l(c,s),a&&o===void 0&&(o=l(c,a)),t}return m.cancel=u,m.flush=d,m}const Zh=100;function vs(e,s){const r=ue(),t=ms();if(!r)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:o=Zh}=r.getOptions();if(o<=0)return;const l={timestamp:ur(),...e},c=i?cr(()=>i(l,s)):l;c!==null&&(r.emit&&r.emit("beforeAddBreadcrumb",c,s),t.addBreadcrumb(c,o))}let Ia;const Qh="FunctionToString",Ra=new WeakMap,eg=()=>({name:Qh,setupOnce(){Ia=Function.prototype.toString;try{Function.prototype.toString=function(...e){const s=Yi(this),r=Ra.has(ue())&&s!==void 0?s:this;return Ia.apply(r,e)}}catch{}},setup(e){Ra.set(e,!0)}}),sg=eg,rg=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],tg="EventFilters",ng=(e={})=>{let s;return{name:tg,setup(r){const t=r.getOptions();s=Ma(e,t)},processEvent(r,t,i){if(!s){const o=i.getOptions();s=Ma(e,o)}return og(r,s)?null:r}}},ig=(e={})=>({...ng(e),name:"InboundFilters"});function Ma(e={},s={}){return{allowUrls:[...e.allowUrls||[],...s.allowUrls||[]],denyUrls:[...e.denyUrls||[],...s.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...s.ignoreErrors||[],...e.disableErrorDefaults?[]:rg],ignoreTransactions:[...e.ignoreTransactions||[],...s.ignoreTransactions||[]]}}function og(e,s){if(e.type){if(e.type==="transaction"&&lg(e,s.ignoreTransactions))return G&&L.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Xs(e)}`),!0}else{if(ag(e,s.ignoreErrors))return G&&L.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Xs(e)}`),!0;if(dg(e))return G&&L.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Xs(e)}`),!0;if(cg(e,s.denyUrls))return G&&L.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Xs(e)}.
Url: ${en(e)}`),!0;if(!ug(e,s.allowUrls))return G&&L.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Xs(e)}.
Url: ${en(e)}`),!0}return!1}function ag(e,s){return s!=null&&s.length?Vc(e).some(r=>_s(r,s)):!1}function lg(e,s){if(!(s!=null&&s.length))return!1;const r=e.transaction;return r?_s(r,s):!1}function cg(e,s){if(!(s!=null&&s.length))return!1;const r=en(e);return r?_s(r,s):!1}function ug(e,s){if(!(s!=null&&s.length))return!0;const r=en(e);return r?_s(r,s):!0}function mg(e=[]){for(let s=e.length-1;s>=0;s--){const r=e[s];if(r&&r.filename!=="<anonymous>"&&r.filename!=="[native code]")return r.filename||null}return null}function en(e){var s,r;try{const t=[...((s=e.exception)==null?void 0:s.values)??[]].reverse().find(o=>{var a,l,c;return((a=o.mechanism)==null?void 0:a.parent_id)===void 0&&((c=(l=o.stacktrace)==null?void 0:l.frames)==null?void 0:c.length)}),i=(r=t==null?void 0:t.stacktrace)==null?void 0:r.frames;return i?mg(i):null}catch{return G&&L.error(`Cannot extract url for event ${Xs(e)}`),null}}function dg(e){var s,r;return(r=(s=e.exception)==null?void 0:s.values)!=null&&r.length?!e.message&&!e.exception.values.some(t=>t.stacktrace||t.type&&t.type!=="Error"||t.value):!1}function fg(e,s,r,t,i,o){var l;if(!((l=i.exception)!=null&&l.values)||!o||!Vs(o.originalException,Error))return;const a=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;a&&(i.exception.values=yi(e,s,t,o.originalException,r,i.exception.values,a,0))}function yi(e,s,r,t,i,o,a,l){if(o.length>=r+1)return o;let c=[...o];if(Vs(t[i],Error)){Pa(a,l,t);const u=e(s,t[i]),d=c.length;Aa(u,i,d,l),c=yi(e,s,r,t[i],i,[u,...c],u,d)}return Lc(t)&&t.errors.forEach((u,d)=>{if(Vs(u,Error)){Pa(a,l,t);const m=e(s,u),f=c.length;Aa(m,`errors[${d}]`,f,l),c=yi(e,s,r,u,i,[m,...c],m,f)}}),c}function Lc(e){return Array.isArray(e.errors)}function Pa(e,s,r){e.mechanism={handled:!0,type:"auto.core.linked_errors",...Lc(r)&&{is_exception_group:!0},...e.mechanism,exception_id:s}}function Aa(e,s,r,t){e.mechanism={handled:!0,...e.mechanism,type:"chained",source:s,exception_id:r,parent_id:t}}function hg(e){const s="console";Ws(s,e),zs(s,gg)}function gg(){"console"in ce&&Qm.forEach(function(e){e in ce.console&&Ke(ce.console,e,function(s){return Kt[e]=s,function(...r){us("console",{args:r,level:e});const i=Kt[e];i==null||i.apply(ce.console,r)}})})}function Fc(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const pg="Dedupe",Ng=()=>{let e;return{name:pg,processEvent(s){if(s.type)return s;try{if(yg(s,e))return G&&L.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=s}}},bg=Ng;function yg(e,s){return s?!!(Eg(e,s)||jg(e,s)):!1}function Eg(e,s){const r=e.message,t=s.message;return!(!r&&!t||r&&!t||!r&&t||r!==t||!Bc(e,s)||!$c(e,s))}function jg(e,s){const r=Oa(s),t=Oa(e);return!(!r||!t||r.type!==t.type||r.value!==t.value||!Bc(e,s)||!$c(e,s))}function $c(e,s){let r=Yo(e),t=Yo(s);if(!r&&!t)return!0;if(r&&!t||!r&&t||(r=r,t=t,t.length!==r.length))return!1;for(let i=0;i<t.length;i++){const o=t[i],a=r[i];if(o.filename!==a.filename||o.lineno!==a.lineno||o.colno!==a.colno||o.function!==a.function)return!1}return!0}function Bc(e,s){let r=e.fingerprint,t=s.fingerprint;if(!r&&!t)return!0;if(r&&!t||!r&&t)return!1;r=r,t=t;try{return r.join("")===t.join("")}catch{return!1}}function Oa(e){var s,r;return(r=(s=e.exception)==null?void 0:s.values)==null?void 0:r[0]}const Sg="ConversationId",vg=()=>({name:Sg,setup(e){e.on("spanStart",s=>{const r=Ee().getScopeData(),t=ms().getScopeData(),i=r.conversationId||t.conversationId;i&&s.setAttribute(Md,i)})}}),xg=vg;function Cg(e,s,r,t,i){if(!e.fetchData)return;const{method:o,url:a}=e.fetchData,l=Ns()&&s(a);if(e.endTimestamp&&l){const h=e.fetchData.__span;if(!h)return;const g=t[h];g&&(_g(g,e),Tg(g,e,i),delete t[h]);return}const{spanOrigin:c="auto.http.browser",propagateTraceparent:u=!1}=typeof i=="object"?i:{spanOrigin:i},d=!!We(),m=l&&d?Wr(wg(a,o,c)):new qs;if(e.fetchData.__span=m.spanContext().spanId,t[m.spanContext().spanId]=m,r(e.fetchData.url)){const h=e.args[0],g={...e.args[1]||{}},p=kg(h,g,Ns()&&d?m:void 0,u);p&&(e.args[1]=g,g.headers=p)}const f=ue();if(f){const h={input:e.args,response:e.response,startTimestamp:e.startTimestamp,endTimestamp:e.endTimestamp};f.emit("beforeOutgoingRequestSpan",m,h)}return m}function Tg(e,s,r){var i;const t=typeof r=="object"&&r!==null?r.onRequestSpanEnd:void 0;t==null||t(e,{headers:(i=s.response)==null?void 0:i.headers,error:s.error})}function kg(e,s,r,t){const i=Oc({span:r,propagateTraceparent:t}),o=i["sentry-trace"],a=i.baggage,l=i.traceparent;if(!o)return;const c=s.headers||(Wi(e)?e.headers:void 0);if(c)if(Dg(c)){const u=new Headers(c);if(u.get("sentry-trace")||u.set("sentry-trace",o),t&&l&&!u.get("traceparent")&&u.set("traceparent",l),a){const d=u.get("baggage");d?Dt(d)||u.set("baggage",`${d},${a}`):u.set("baggage",a)}return u}else if(Array.isArray(c)){const u=[...c];c.find(m=>m[0]==="sentry-trace")||u.push(["sentry-trace",o]),t&&l&&!c.find(m=>m[0]==="traceparent")&&u.push(["traceparent",l]);const d=c.find(m=>m[0]==="baggage"&&Dt(m[1]));return a&&!d&&u.push(["baggage",a]),u}else{const u="sentry-trace"in c?c["sentry-trace"]:void 0,d="traceparent"in c?c.traceparent:void 0,m="baggage"in c?c.baggage:void 0,f=m?Array.isArray(m)?[...m]:[m]:[],h=m&&(Array.isArray(m)?m.find(p=>Dt(p)):Dt(m));a&&!h&&f.push(a);const g={...c,"sentry-trace":u??o,baggage:f.length>0?f.join(","):void 0};return t&&l&&!d&&(g.traceparent=l),g}else return{...i}}function _g(e,s){var r,t;if(s.response){Kl(e,s.response.status);const i=(t=(r=s.response)==null?void 0:r.headers)==null?void 0:t.get("content-length");if(i){const o=parseInt(i);o>0&&e.setAttribute("http.response_content_length",o)}}else s.error&&e.setStatus({code:Ie,message:"internal_error"});e.end()}function Dt(e){return e.split(",").some(s=>s.trim().startsWith(Xi))}function Dg(e){return typeof Headers<"u"&&Vs(e,Headers)}function wg(e,s,r){if(e.startsWith("data:")){const o=Fs(e);return{name:`${s} ${o}`,attributes:La(e,void 0,s,r)}}const t=ao(e),i=t?qh(t):e;return{name:`${s} ${i}`,attributes:La(e,t,s,r)}}function La(e,s,r,t){const i={url:Fs(e),type:"fetch","http.method":r,[Re]:t,[Rs]:"http.client"};return s&&(oo(s)||(i["http.url"]=Fs(s.href),i["server.address"]=s.host),s.search&&(i["http.query"]=s.search),s.hash&&(i["http.fragment"]=s.hash)),i}function qc(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}const nt=ce;function Ug(){return"history"in nt&&!!nt.history}function Vg(){if(!("fetch"in nt))return!1;try{return new Headers,new Request("data:,"),new Response,!0}catch{return!1}}function Ei(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Ig(){var r;if(typeof EdgeRuntime=="string")return!0;if(!Vg())return!1;if(Ei(nt.fetch))return!0;let e=!1;const s=nt.document;if(s&&typeof s.createElement=="function")try{const t=s.createElement("iframe");t.hidden=!0,s.head.appendChild(t),(r=t.contentWindow)!=null&&r.fetch&&(e=Ei(t.contentWindow.fetch)),s.head.removeChild(t)}catch(t){G&&L.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return e}function Hc(e,s){const r="fetch";Ws(r,e),zs(r,()=>Wc(void 0,s))}function Rg(e){const s="fetch-body-resolved";Ws(s,e),zs(s,()=>Wc(Pg))}function Wc(e,s=!1){s&&!Ig()||Ke(ce,"fetch",function(r){return function(...t){const i=new Error,{method:o,url:a}=Ag(t),l={args:t,fetchData:{method:o,url:a},startTimestamp:Ae()*1e3,virtualError:i,headers:Og(t)};return e||us("fetch",{...l}),r.apply(ce,t).then(async c=>(e?e(c):us("fetch",{...l,endTimestamp:Ae()*1e3,response:c}),c),c=>{us("fetch",{...l,endTimestamp:Ae()*1e3,error:c}),gn(c)&&c.stack===void 0&&(c.stack=i.stack,Ze(c,"framesToPop",1));const u=ue(),d=(u==null?void 0:u.getOptions().enhanceFetchErrorMessages)??"always";if(d!==!1&&c instanceof TypeError&&(c.message==="Failed to fetch"||c.message==="Load failed"||c.message==="NetworkError when attempting to fetch resource."))try{const h=new URL(l.fetchData.url).host;d==="always"?c.message=`${c.message} (${h})`:Ze(c,"__sentry_fetch_url_host__",h)}catch{}throw c})}})}async function Mg(e,s){if(e!=null&&e.body){const r=e.body,t=r.getReader(),i=setTimeout(()=>{r.cancel().then(null,()=>{})},90*1e3);let o=!0;for(;o;){let a;try{a=setTimeout(()=>{r.cancel().then(null,()=>{})},5e3);const{done:l}=await t.read();clearTimeout(a),l&&(s(),o=!1)}catch{o=!1}finally{clearTimeout(a)}}clearTimeout(i),t.releaseLock(),r.cancel().then(null,()=>{})}}function Pg(e){let s;try{s=e.clone()}catch{return}Mg(s,()=>{us("fetch-body-resolved",{endTimestamp:Ae()*1e3,response:e})})}function Ht(e,s){return!!e&&typeof e=="object"&&!!e[s]}function Fa(e){return typeof e=="string"?e:e?Ht(e,"url")?e.url:e.toString?e.toString():"":""}function Ag(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[r,t]=e;return{url:Fa(r),method:Ht(t,"method")?String(t.method).toUpperCase():Wi(r)&&Ht(r,"method")?String(r.method).toUpperCase():"GET"}}const s=e[0];return{url:Fa(s),method:Ht(s,"method")?String(s.method).toUpperCase():"GET"}}function Og(e){const[s,r]=e;try{if(typeof r=="object"&&r!==null&&"headers"in r&&r.headers)return new Headers(r.headers);if(Wi(s))return new Headers(s.headers)}catch{}}function Lg(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function Fg(){return"npm"}function $g(){return!Lg()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function ji(){return typeof window<"u"&&(!$g()||Bg())}function Bg(){const e=ce.process;return(e==null?void 0:e.type)==="renderer"}const pe=ce;let Si=0;function zc(){return Si>0}function qg(){Si++,setTimeout(()=>{Si--})}function Vr(e,s={}){function r(i){return typeof i=="function"}if(!r(e))return e;try{const i=e.__sentry_wrapped__;if(i)return typeof i=="function"?i:e;if(Yi(e))return e}catch{return e}const t=function(...i){try{const o=i.map(a=>Vr(a,s));return e.apply(this,o)}catch(o){throw qg(),Nn(a=>{a.addEventProcessor(l=>(s.mechanism&&(ui(l,void 0),_r(l,s.mechanism)),l.extra={...l.extra,arguments:i},l)),gt(o)}),o}};try{for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}catch{}Wl(t,e),Ze(e,"__sentry_wrapped__",t);try{Object.getOwnPropertyDescriptor(t,"name").configurable&&Object.defineProperty(t,"name",{get(){return e.name}})}catch{}return t}function lo(){const e=$r(),{referrer:s}=pe.document||{},{userAgent:r}=pe.navigator||{},t={...s&&{Referer:s},...r&&{"User-Agent":r}};return{url:e,headers:t}}function co(e,s){const r=uo(e,s),t={type:Gg(s),value:Jg(s)};return r.length&&(t.stacktrace={frames:r}),t.type===void 0&&t.value===""&&(t.value="Unrecoverable error caught"),t}function Hg(e,s,r,t){const i=ue(),o=i==null?void 0:i.getOptions().normalizeDepth,a=ep(s),l={__serialized__:mc(s,o)};if(a)return{exception:{values:[co(e,a)]},extra:l};const c={exception:{values:[{type:pn(s)?s.constructor.name:t?"UnhandledRejection":"Error",value:Zg(s,{isUnhandledRejection:t})}]},extra:l};if(r){const u=uo(e,r);u.length&&(c.exception.values[0].stacktrace={frames:u})}return c}function Wn(e,s){return{exception:{values:[co(e,s)]}}}function uo(e,s){const r=s.stacktrace||s.stack||"",t=zg(s),i=Yg(s);try{return e(r,t,i)}catch{}return[]}const Wg=/Minified React error #\d+;/i;function zg(e){return e&&Wg.test(e.message)?1:0}function Yg(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function Yc(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function Gg(e){const s=e==null?void 0:e.name;return!s&&Yc(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":s}function Jg(e){const s=e==null?void 0:e.message;return Yc(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":s?s.error&&typeof s.error.message=="string"?Ua(s.error):Ua(e):"No error message"}function Kg(e,s,r,t){const i=(r==null?void 0:r.syntheticException)||void 0,o=mo(e,s,i,t);return _r(o),o.level="error",r!=null&&r.event_id&&(o.event_id=r.event_id),yn(o)}function Xg(e,s,r="info",t,i){const o=(t==null?void 0:t.syntheticException)||void 0,a=vi(e,s,o,i);return a.level=r,t!=null&&t.event_id&&(a.event_id=t.event_id),yn(a)}function mo(e,s,r,t,i){let o;if(Bl(s)&&s.error)return Wn(e,s.error);if(Jo(s)||ud(s)){const a=s;if("stack"in s)o=Wn(e,s);else{const l=a.name||(Jo(a)?"DOMError":"DOMException"),c=a.message?`${l}: ${a.message}`:l;o=vi(e,c,r,t),ui(o,c)}return"code"in a&&(o.tags={...o.tags,"DOMException.code":`${a.code}`}),o}return gn(s)?Wn(e,s):st(s)||pn(s)?(o=Hg(e,s,r,i),_r(o,{synthetic:!0}),o):(o=vi(e,s,r,t),ui(o,`${s}`),_r(o,{synthetic:!0}),o)}function vi(e,s,r,t){const i={};if(t&&r){const o=uo(e,r);o.length&&(i.exception={values:[{value:s,stacktrace:{frames:o}}]}),_r(i,{synthetic:!0})}if(Hi(s)){const{__sentry_template_string__:o,__sentry_template_values__:a}=s;return i.logentry={message:o,params:a},i}return i.message=s,i}function Zg(e,{isUnhandledRejection:s}){const r=pd(e),t=s?"promise rejection":"exception";return Bl(e)?`Event \`ErrorEvent\` captured as ${t} with message \`${e.message}\``:pn(e)?`Event \`${Qg(e)}\` (type=${e.type}) captured as ${t}`:`Object captured as ${t} with keys: ${r}`}function Qg(e){try{const s=Object.getPrototypeOf(e);return s?s.constructor.name:void 0}catch{}}function ep(e){for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)){const r=e[s];if(r instanceof Error)return r}}class sp extends Rh{constructor(s){var d;const r=rp(s),t=pe.SENTRY_SDK_SOURCE||Fg();Ac(r,"browser",["browser"],t),(d=r._metadata)!=null&&d.sdk&&(r._metadata.sdk.settings={infer_ip:r.sendDefaultPii?"auto":"never",...r._metadata.sdk.settings}),super(r);const{sendDefaultPii:i,sendClientReports:o,enableLogs:a,_experiments:l,enableMetrics:c}=this._options,u=c??(l==null?void 0:l.enableMetrics)??!0;pe.document&&(o||a||u)&&pe.document.addEventListener("visibilitychange",()=>{pe.document.visibilityState==="hidden"&&(o&&this._flushOutcomes(),a&&Cc(this),u&&kc(this))}),i&&this.on("beforeSendSession",Gh)}eventFromException(s,r){return Kg(this._options.stackParser,s,r,this._options.attachStacktrace)}eventFromMessage(s,r="info",t){return Xg(this._options.stackParser,s,r,t,this._options.attachStacktrace)}_prepareEvent(s,r,t,i){return s.platform=s.platform||"javascript",super._prepareEvent(s,r,t,i)}}function rp(e){var s;return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:(s=pe.SENTRY_RELEASE)==null?void 0:s.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...e}}const or=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,re=ce,tp=(e,s)=>e>s[1]?"poor":e>s[0]?"needs-improvement":"good",pt=(e,s,r,t)=>{let i,o;return a=>{s.value>=0&&(a||t)&&(o=s.value-(i??0),(o||i===void 0)&&(i=s.value,s.delta=o,s.rating=tp(s.value,r),e(s)))}},Nt=(e=!0)=>{var r,t;const s=(t=(r=re.performance)==null?void 0:r.getEntriesByType)==null?void 0:t.call(r,"navigation")[0];if(!e||s&&s.responseStart>0&&s.responseStart<performance.now())return s},zr=()=>{const e=Nt();return(e==null?void 0:e.activationStart)??0};function $s(e,s,r){re.document&&re.addEventListener(e,s,r)}function sn(e,s,r){re.document&&re.removeEventListener(e,s,r)}let Tr=-1;const Gc=new Set,np=()=>{var e,s;return((e=re.document)==null?void 0:e.visibilityState)==="hidden"&&!((s=re.document)!=null&&s.prerendering)?0:1/0},Wt=e=>{if(ip(e)&&Tr>-1){if(e.type==="visibilitychange"||e.type==="pagehide")for(const s of Gc)s();isFinite(Tr)||(Tr=e.type==="visibilitychange"?e.timeStamp:0,sn("prerenderingchange",Wt,!0))}},bt=()=>{var e;if(re.document&&Tr<0){const s=zr();Tr=(re.document.prerendering||(e=globalThis.performance.getEntriesByType("visibility-state").filter(t=>t.name==="hidden"&&t.startTime>s)[0])==null?void 0:e.startTime)??np(),$s("visibilitychange",Wt,!0),$s("pagehide",Wt,!0),$s("prerenderingchange",Wt,!0)}return{get firstHiddenTime(){return Tr},onHidden(s){Gc.add(s)}}};function ip(e){var s;return e.type==="pagehide"||((s=re.document)==null?void 0:s.visibilityState)==="hidden"}const op=()=>`v5-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,yt=(e,s=-1)=>{var o,a;const r=Nt();let t="navigate";return r&&((o=re.document)!=null&&o.prerendering||zr()>0?t="prerender":(a=re.document)!=null&&a.wasDiscarded?t="restore":r.type&&(t=r.type.replace(/_/g,"-"))),{name:e,value:s,rating:"good",delta:0,entries:[],id:op(),navigationType:t}},zn=new WeakMap;function fo(e,s){try{return zn.get(e)||zn.set(e,new s),zn.get(e)}catch{return new s}}class rn{constructor(){rn.prototype.__init.call(this),rn.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(s){var i;if(s.hadRecentInput)return;const r=this._sessionEntries[0],t=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&r&&t&&s.startTime-t.startTime<1e3&&s.startTime-r.startTime<5e3?(this._sessionValue+=s.value,this._sessionEntries.push(s)):(this._sessionValue=s.value,this._sessionEntries=[s]),(i=this._onAfterProcessingUnexpectedShift)==null||i.call(this,s)}}const Yr=(e,s,r={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const t=new PerformanceObserver(i=>{Promise.resolve().then(()=>{s(i.getEntries())})});return t.observe({type:e,buffered:!0,...r}),t}}catch{}},ho=e=>{let s=!1;return()=>{s||(e(),s=!0)}},En=e=>{var s;(s=re.document)!=null&&s.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},ap=[1800,3e3],lp=(e,s={})=>{En(()=>{const r=bt(),t=yt("FCP");let i;const a=Yr("paint",l=>{for(const c of l)c.name==="first-contentful-paint"&&(a.disconnect(),c.startTime<r.firstHiddenTime&&(t.value=Math.max(c.startTime-zr(),0),t.entries.push(c),i(!0)))});a&&(i=pt(e,t,ap,s.reportAllChanges))})},cp=[.1,.25],up=(e,s={})=>{lp(ho(()=>{var c;const r=yt("CLS",0);let t;const i=bt(),o=fo(s,rn),a=u=>{for(const d of u)o._processEntry(d);o._sessionValue>r.value&&(r.value=o._sessionValue,r.entries=o._sessionEntries,t())},l=Yr("layout-shift",a);l&&(t=pt(e,r,cp,s.reportAllChanges),i.onHidden(()=>{a(l.takeRecords()),t(!0)}),(c=re==null?void 0:re.setTimeout)==null||c.call(re,t))}))};let Jc=0,Yn=1/0,wt=0;const mp=e=>{e.forEach(s=>{s.interactionId&&(Yn=Math.min(Yn,s.interactionId),wt=Math.max(wt,s.interactionId),Jc=wt?(wt-Yn)/7+1:0)})};let xi;const Kc=()=>xi?Jc:performance.interactionCount||0,dp=()=>{"interactionCount"in performance||xi||(xi=Yr("event",mp,{type:"event",buffered:!0,durationThreshold:0}))},Gn=10;let Xc=0;const fp=()=>Kc()-Xc;class tn{constructor(){tn.prototype.__init.call(this),tn.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){Xc=Kc(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){const s=Math.min(this._longestInteractionList.length-1,Math.floor(fp()/50));return this._longestInteractionList[s]}_processEntry(s){var i,o;if((i=this._onBeforeProcessingEntry)==null||i.call(this,s),!(s.interactionId||s.entryType==="first-input"))return;const r=this._longestInteractionList.at(-1);let t=this._longestInteractionMap.get(s.interactionId);if(t||this._longestInteractionList.length<Gn||s.duration>r._latency){if(t?s.duration>t._latency?(t.entries=[s],t._latency=s.duration):s.duration===t._latency&&s.startTime===t.entries[0].startTime&&t.entries.push(s):(t={id:s.interactionId,entries:[s],_latency:s.duration},this._longestInteractionMap.set(t.id,t),this._longestInteractionList.push(t)),this._longestInteractionList.sort((a,l)=>l._latency-a._latency),this._longestInteractionList.length>Gn){const a=this._longestInteractionList.splice(Gn);for(const l of a)this._longestInteractionMap.delete(l.id)}(o=this._onAfterProcessingINPCandidate)==null||o.call(this,t)}}}const Zc=e=>{var r;const s=re.requestIdleCallback||re.setTimeout;((r=re.document)==null?void 0:r.visibilityState)==="hidden"?e():(e=ho(e),$s("visibilitychange",e,{once:!0,capture:!0}),$s("pagehide",e,{once:!0,capture:!0}),s(()=>{e(),sn("visibilitychange",e,{capture:!0}),sn("pagehide",e,{capture:!0})}))},hp=[200,500],gp=40,pp=(e,s={})=>{if(!(globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype))return;const r=bt();En(()=>{dp();const t=yt("INP");let i;const o=fo(s,tn),a=c=>{Zc(()=>{for(const d of c)o._processEntry(d);const u=o._estimateP98LongestInteraction();u&&u._latency!==t.value&&(t.value=u._latency,t.entries=u.entries,i())})},l=Yr("event",a,{durationThreshold:s.durationThreshold??gp});i=pt(e,t,hp,s.reportAllChanges),l&&(l.observe({type:"first-input",buffered:!0}),r.onHidden(()=>{a(l.takeRecords()),i(!0)}))})};class Np{_processEntry(s){var r;(r=this._onBeforeProcessingEntry)==null||r.call(this,s)}}const bp=[2500,4e3],yp=(e,s={})=>{En(()=>{const r=bt(),t=yt("LCP");let i;const o=fo(s,Np),a=c=>{s.reportAllChanges||(c=c.slice(-1));for(const u of c)o._processEntry(u),u.startTime<r.firstHiddenTime&&(t.value=Math.max(u.startTime-zr(),0),t.entries=[u],i())},l=Yr("largest-contentful-paint",a);if(l){i=pt(e,t,bp,s.reportAllChanges);const c=ho(()=>{a(l.takeRecords()),l.disconnect(),i(!0)}),u=d=>{d.isTrusted&&(Zc(c),sn(d.type,u,{capture:!0}))};for(const d of["keydown","click","visibilitychange"])$s(d,u,{capture:!0})}})},Ep=[800,1800],Ci=e=>{var s,r;(s=re.document)!=null&&s.prerendering?En(()=>Ci(e)):((r=re.document)==null?void 0:r.readyState)!=="complete"?addEventListener("load",()=>Ci(e),!0):setTimeout(e)},jp=(e,s={})=>{const r=yt("TTFB"),t=pt(e,r,Ep,s.reportAllChanges);Ci(()=>{const i=Nt();i&&(r.value=Math.max(i.responseStart-zr(),0),r.entries=[i],t(!0))})},Xr={},nn={};let Qc,eu,su,ru;function go(e,s=!1){return jn("cls",e,vp,Qc,s)}function po(e,s=!1){return jn("lcp",e,xp,eu,s)}function Sp(e){return jn("ttfb",e,Cp,su)}function tu(e){return jn("inp",e,Tp,ru)}function ar(e,s){return nu(e,s),nn[e]||(kp(e),nn[e]=!0),iu(e,s)}function Et(e,s){const r=Xr[e];if(r!=null&&r.length)for(const t of r)try{t(s)}catch(i){or&&L.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Us(t)}
Error:`,i)}}function vp(){return up(e=>{Et("cls",{metric:e}),Qc=e},{reportAllChanges:!0})}function xp(){return yp(e=>{Et("lcp",{metric:e}),eu=e},{reportAllChanges:!0})}function Cp(){return jp(e=>{Et("ttfb",{metric:e}),su=e})}function Tp(){return pp(e=>{Et("inp",{metric:e}),ru=e})}function jn(e,s,r,t,i=!1){nu(e,s);let o;return nn[e]||(o=r(),nn[e]=!0),t&&s({metric:t}),iu(e,s,i?o:void 0)}function kp(e){const s={};e==="event"&&(s.durationThreshold=0),Yr(e,r=>{Et(e,{entries:r})},s)}function nu(e,s){Xr[e]=Xr[e]||[],Xr[e].push(s)}function iu(e,s,r){return()=>{r&&r();const t=Xr[e];if(!t)return;const i=t.indexOf(s);i!==-1&&t.splice(i,1)}}function _p(e){return"duration"in e}const Dp=e=>{const s=r=>{var t;(r.type==="pagehide"||((t=re.document)==null?void 0:t.visibilityState)==="hidden")&&e(r)};$s("visibilitychange",s,{capture:!0,once:!0}),$s("pagehide",s,{capture:!0,once:!0})};function Jn(e){return typeof e=="number"&&isFinite(e)}function Hs(e,s,r,{...t}){const i=ge(e).start_timestamp;return i&&i>s&&typeof e.updateStartTime=="function"&&e.updateStartTime(s),so(e,()=>{const o=Wr({startTime:s,...t});return o&&o.end(r),o})}function No(e){var N;const s=ue();if(!s)return;const{name:r,transaction:t,attributes:i,startTime:o}=e,{release:a,environment:l,sendDefaultPii:c}=s.getOptions(),u=s.getIntegrationByName("Replay"),d=u==null?void 0:u.getReplayId(),m=Ee(),f=m.getUser(),h=f!==void 0?f.email||f.id||f.ip_address:void 0;let g;try{g=m.getScopeData().contexts.profile.profile_id}catch{}const p={release:a,environment:l,user:h||void 0,profile_id:g||void 0,replay_id:d||void 0,transaction:t,"user_agent.original":(N=re.navigator)==null?void 0:N.userAgent,"client.address":c?"{{auto}}":void 0,...i};return Wr({name:r,attributes:p,startTime:o,experimental:{standalone:!0}})}function jt(){return re.addEventListener&&re.performance}function Te(e){return e/1e3}function wp(e){let s="unknown",r="unknown",t="";for(const i of e){if(i==="/"){[s,r]=e.split("/");break}if(!isNaN(Number(i))){s=t==="h"?"http":t,r=e.split(t)[1];break}t+=i}return t===e&&(s=t),{name:s,version:r}}function ou(e){try{return PerformanceObserver.supportedEntryTypes.includes(e)}catch{return!1}}function au(e,s){let r,t=!1;function i(l){!t&&r&&s(l,r),t=!0}Dp(()=>{i("pagehide")});const o=e.on("beforeStartNavigationSpan",(l,c)=>{c!=null&&c.isRedirect||(i("navigation"),o(),a())}),a=e.on("afterStartPageLoadSpan",l=>{r=l.spanContext().spanId,a()})}function Up(e){let s=0,r;if(!ou("layout-shift"))return;const t=go(({metric:i})=>{const o=i.entries[i.entries.length-1];o&&(s=i.value,r=o)},!0);au(e,(i,o)=>{Vp(s,r,o,i),t()})}function Vp(e,s,r,t){var u;or&&L.log(`Sending CLS span (${e})`);const i=s?Te((Qe()||0)+s.startTime):Ae(),o=Ee().getScopeData().transactionName,a=s?Xe((u=s.sources[0])==null?void 0:u.node):"Layout shift",l={[Re]:"auto.http.browser.cls",[Rs]:"ui.webvital.cls",[qr]:0,"sentry.pageload.span_id":r,"sentry.report_event":t};s!=null&&s.sources&&s.sources.forEach((d,m)=>{l[`cls.source.${m+1}`]=Xe(d.node)});const c=No({name:a,transaction:o,attributes:l,startTime:i});c&&(c.addEvent("cls",{[ft]:"",[ht]:e}),c.end(i))}function Ip(e){let s=0,r;if(!ou("largest-contentful-paint"))return;const t=po(({metric:i})=>{const o=i.entries[i.entries.length-1];o&&(s=i.value,r=o)},!0);au(e,(i,o)=>{Rp(s,r,o,i),t()})}function Rp(e,s,r,t){or&&L.log(`Sending LCP span (${e})`);const i=Te((Qe()||0)+((s==null?void 0:s.startTime)||0)),o=Ee().getScopeData().transactionName,a=s?Xe(s.element):"Largest contentful paint",l={[Re]:"auto.http.browser.lcp",[Rs]:"ui.webvital.lcp",[qr]:0,"sentry.pageload.span_id":r,"sentry.report_event":t};s&&(s.element&&(l["lcp.element"]=Xe(s.element)),s.id&&(l["lcp.id"]=s.id),s.url&&(l["lcp.url"]=s.url),s.loadTime!=null&&(l["lcp.loadTime"]=s.loadTime),s.renderTime!=null&&(l["lcp.renderTime"]=s.renderTime),s.size!=null&&(l["lcp.size"]=s.size));const c=No({name:a,transaction:o,attributes:l,startTime:i});c&&(c.addEvent("lcp",{[ft]:"millisecond",[ht]:e}),c.end(i))}function as(e){return e&&((Qe()||performance.timeOrigin)+e)/1e3}function lu(e){var r;const s={};if(e.nextHopProtocol!=null){const{name:t,version:i}=wp(e.nextHopProtocol);s["network.protocol.version"]=i,s["network.protocol.name"]=t}return Qe()||(r=jt())!=null&&r.timeOrigin?Mp({...s,"http.request.redirect_start":as(e.redirectStart),"http.request.redirect_end":as(e.redirectEnd),"http.request.worker_start":as(e.workerStart),"http.request.fetch_start":as(e.fetchStart),"http.request.domain_lookup_start":as(e.domainLookupStart),"http.request.domain_lookup_end":as(e.domainLookupEnd),"http.request.connect_start":as(e.connectStart),"http.request.secure_connection_start":as(e.secureConnectionStart),"http.request.connection_end":as(e.connectEnd),"http.request.request_start":as(e.requestStart),"http.request.response_start":as(e.responseStart),"http.request.response_end":as(e.responseEnd),"http.request.time_to_first_byte":e.responseStart!=null?e.responseStart/1e3:void 0}):s}function Mp(e){return Object.fromEntries(Object.entries(e).filter(([,s])=>s!=null))}const Pp=2147483647;let $a=0,gs={},Je,jr;function Ap({recordClsStandaloneSpans:e,recordLcpStandaloneSpans:s,client:r}){const t=jt();if(t&&Qe()){t.mark&&re.performance.mark("sentry-tracing-init");const i=s?Ip(r):Bp(),o=qp(),a=e?Up(r):$p();return()=>{i==null||i(),o(),a==null||a()}}return()=>{}}function Op(){ar("longtask",({entries:e})=>{const s=We();if(!s)return;const{op:r,start_timestamp:t}=ge(s);for(const i of e){const o=Te(Qe()+i.startTime),a=Te(i.duration);r==="navigation"&&t&&o<t||Hs(s,o,o+a,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[Re]:"auto.ui.browser.metrics"}})}})}function Lp(){new PerformanceObserver(s=>{const r=We();if(r)for(const t of s.getEntries()){if(!t.scripts[0])continue;const i=Te(Qe()+t.startTime),{start_timestamp:o,op:a}=ge(r);if(a==="navigation"&&o&&i<o)continue;const l=Te(t.duration),c={[Re]:"auto.ui.browser.metrics"},u=t.scripts[0],{invoker:d,invokerType:m,sourceURL:f,sourceFunctionName:h,sourceCharPosition:g}=u;c["browser.script.invoker"]=d,c["browser.script.invoker_type"]=m,f&&(c["code.filepath"]=f),h&&(c["code.function"]=h),g!==-1&&(c["browser.script.source_char_position"]=g),Hs(r,i,i+l,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:c})}}).observe({type:"long-animation-frame",buffered:!0})}function Fp(){ar("event",({entries:e})=>{const s=We();if(s){for(const r of e)if(r.name==="click"){const t=Te(Qe()+r.startTime),i=Te(r.duration),o={name:Xe(r.target),op:`ui.interaction.${r.name}`,startTime:t,attributes:{[Re]:"auto.ui.browser.metrics"}},a=Hl(r.target);a&&(o.attributes["ui.component_name"]=a),Hs(s,t,t+i,o)}}})}function $p(){return go(({metric:e})=>{const s=e.entries[e.entries.length-1];s&&(gs.cls={value:e.value,unit:""},jr=s)},!0)}function Bp(){return po(({metric:e})=>{const s=e.entries[e.entries.length-1];s&&(gs.lcp={value:e.value,unit:"millisecond"},Je=s)},!0)}function qp(){return Sp(({metric:e})=>{e.entries[e.entries.length-1]&&(gs.ttfb={value:e.value,unit:"millisecond"})})}function Hp(e,s){const r=jt(),t=Qe();if(!(r!=null&&r.getEntries)||!t)return;const i=Te(t),o=r.getEntries(),{op:a,start_timestamp:l}=ge(e);o.slice($a).forEach(c=>{const u=Te(c.startTime),d=Te(Math.max(0,c.duration));if(!(a==="navigation"&&l&&i+u<l))switch(c.entryType){case"navigation":{Gp(e,c,i);break}case"mark":case"paint":case"measure":{zp(e,c,u,d,i,s.ignorePerformanceApiSpans);const m=bt(),f=c.startTime<m.firstHiddenTime;c.name==="first-paint"&&f&&(gs.fp={value:c.startTime,unit:"millisecond"}),c.name==="first-contentful-paint"&&f&&(gs.fcp={value:c.startTime,unit:"millisecond"});break}case"resource":{Xp(e,c,c.name,u,d,i,s.ignoreResourceSpans);break}}}),$a=Math.max(o.length-1,0),Zp(e),a==="pageload"&&(sN(gs),s.recordClsOnPageloadSpan||delete gs.cls,s.recordLcpOnPageloadSpan||delete gs.lcp,Object.entries(gs).forEach(([c,u])=>{Uf(c,u.value,u.unit)}),e.setAttribute("performance.timeOrigin",i),e.setAttribute("performance.activationStart",zr()),Qp(e,s)),Je=void 0,jr=void 0,gs={}}function Wp(e){if((e==null?void 0:e.entryType)==="measure")try{return e.detail.devtools.track==="Components "}catch{return}}function zp(e,s,r,t,i,o){if(Wp(s)||["mark","measure"].includes(s.entryType)&&_s(s.name,o))return;const a=Nt(!1),l=Te(a?a.requestStart:0),c=i+Math.max(r,l),u=i+r,d=u+t,m={[Re]:"auto.resource.browser.metrics"};c!==u&&(m["sentry.browser.measure_happened_before_request"]=!0,m["sentry.browser.measure_start_time"]=c),Yp(m,s),c<=d&&Hs(e,c,d,{name:s.name,op:s.entryType,attributes:m})}function Yp(e,s){try{const r=s.detail;if(!r)return;if(typeof r=="object"){for(const[t,i]of Object.entries(r))if(i&&kr(i))e[`sentry.browser.measure.detail.${t}`]=i;else if(i!==void 0)try{e[`sentry.browser.measure.detail.${t}`]=JSON.stringify(i)}catch{}return}if(kr(r)){e["sentry.browser.measure.detail"]=r;return}try{e["sentry.browser.measure.detail"]=JSON.stringify(r)}catch{}}catch{}}function Gp(e,s,r){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(t=>{Ut(e,s,t,r)}),Ut(e,s,"secureConnection",r,"TLS/SSL"),Ut(e,s,"fetch",r,"cache"),Ut(e,s,"domainLookup",r,"DNS"),Kp(e,s,r)}function Ut(e,s,r,t,i=r){const o=Jp(r),a=s[o],l=s[`${r}Start`];!l||!a||Hs(e,t+Te(l),t+Te(a),{op:`browser.${i}`,name:s.name,attributes:{[Re]:"auto.ui.browser.metrics",...r==="redirect"&&s.redirectCount!=null?{"http.redirect_count":s.redirectCount}:{}}})}function Jp(e){return e==="secureConnection"?"connectEnd":e==="fetch"?"domainLookupStart":`${e}End`}function Kp(e,s,r){const t=r+Te(s.requestStart),i=r+Te(s.responseEnd),o=r+Te(s.responseStart);s.responseEnd&&(Hs(e,t,i,{op:"browser.request",name:s.name,attributes:{[Re]:"auto.ui.browser.metrics"}}),Hs(e,o,i,{op:"browser.response",name:s.name,attributes:{[Re]:"auto.ui.browser.metrics"}}))}function Xp(e,s,r,t,i,o,a){if(s.initiatorType==="xmlhttprequest"||s.initiatorType==="fetch")return;const l=s.initiatorType?`resource.${s.initiatorType}`:"resource.other";if(a!=null&&a.includes(l))return;const c={[Re]:"auto.resource.browser.metrics"},u=tr(r);u.protocol&&(c["url.scheme"]=u.protocol.split(":").pop()),u.host&&(c["server.address"]=u.host),c["url.same_origin"]=r.includes(re.location.origin),eN(s,c,[["responseStatus","http.response.status_code"],["transferSize","http.response_transfer_size"],["encodedBodySize","http.response_content_length"],["decodedBodySize","http.decoded_response_content_length"],["renderBlockingStatus","resource.render_blocking_status"],["deliveryType","http.response_delivery_type"]]);const d={...c,...lu(s)},m=o+t,f=m+i;Hs(e,m,f,{name:r.replace(re.location.origin,""),op:l,attributes:d})}function Zp(e){const s=re.navigator;if(!s)return;const r=s.connection;r&&(r.effectiveType&&e.setAttribute("effectiveConnectionType",r.effectiveType),r.type&&e.setAttribute("connectionType",r.type),Jn(r.rtt)&&(gs["connection.rtt"]={value:r.rtt,unit:"millisecond"})),Jn(s.deviceMemory)&&e.setAttribute("deviceMemory",`${s.deviceMemory} GB`),Jn(s.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(s.hardwareConcurrency))}function Qp(e,s){Je&&s.recordLcpOnPageloadSpan&&(Je.element&&e.setAttribute("lcp.element",Xe(Je.element)),Je.id&&e.setAttribute("lcp.id",Je.id),Je.url&&e.setAttribute("lcp.url",Je.url.trim().slice(0,200)),Je.loadTime!=null&&e.setAttribute("lcp.loadTime",Je.loadTime),Je.renderTime!=null&&e.setAttribute("lcp.renderTime",Je.renderTime),e.setAttribute("lcp.size",Je.size)),jr!=null&&jr.sources&&s.recordClsOnPageloadSpan&&jr.sources.forEach((r,t)=>e.setAttribute(`cls.source.${t+1}`,Xe(r.node)))}function eN(e,s,r){r.forEach(([t,i])=>{const o=e[t];o!=null&&(typeof o=="number"&&o<Pp||typeof o=="string")&&(s[i]=o)})}function sN(e){const s=Nt(!1);if(!s)return;const{responseStart:r,requestStart:t}=s;t<=r&&(e["ttfb.requestTime"]={value:r-t,unit:"millisecond"})}function rN(){return jt()&&Qe()?ar("element",tN):()=>{}}const tN=({entries:e})=>{const s=We(),r=s?Le(s):void 0,t=r?ge(r).description:Ee().getScopeData().transactionName;e.forEach(i=>{var h,g;const o=i;if(!o.identifier)return;const a=o.name,l=o.renderTime,c=o.loadTime,[u,d]=c?[Te(c),"load-time"]:l?[Te(l),"render-time"]:[Ae(),"entry-emission"],m=a==="image-paint"?Te(Math.max(0,(l??0)-(c??0))):0,f={[Re]:"auto.ui.browser.elementtiming",[Rs]:"ui.elementtiming",[ps]:"component","sentry.span_start_time_source":d,"sentry.transaction_name":t,"element.id":o.id,"element.type":((g=(h=o.element)==null?void 0:h.tagName)==null?void 0:g.toLowerCase())||"unknown","element.size":o.naturalWidth&&o.naturalHeight?`${o.naturalWidth}x${o.naturalHeight}`:void 0,"element.render_time":l,"element.load_time":c,"element.url":o.url||void 0,"element.identifier":o.identifier,"element.paint_type":a};Af({name:`element[${o.identifier}]`,attributes:f,startTime:u,onlyIfParent:!0},p=>{p.end(u+m)})})},nN=1e3;let Ba,Ti,ki;function cu(e){const s="dom";Ws(s,e),zs(s,iN)}function iN(){if(!re.document)return;const e=us.bind(null,"dom"),s=qa(e,!0);re.document.addEventListener("click",s,!1),re.document.addEventListener("keypress",s,!1),["EventTarget","Node"].forEach(r=>{var o,a;const i=(o=re[r])==null?void 0:o.prototype;(a=i==null?void 0:i.hasOwnProperty)!=null&&a.call(i,"addEventListener")&&(Ke(i,"addEventListener",function(l){return function(c,u,d){if(c==="click"||c=="keypress")try{const m=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},f=m[c]=m[c]||{refCount:0};if(!f.handler){const h=qa(e);f.handler=h,l.call(this,c,h,d)}f.refCount++}catch{}return l.call(this,c,u,d)}}),Ke(i,"removeEventListener",function(l){return function(c,u,d){if(c==="click"||c=="keypress")try{const m=this.__sentry_instrumentation_handlers__||{},f=m[c];f&&(f.refCount--,f.refCount<=0&&(l.call(this,c,f.handler,d),f.handler=void 0,delete m[c]),Object.keys(m).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return l.call(this,c,u,d)}}))})}function oN(e){if(e.type!==Ti)return!1;try{if(!e.target||e.target._sentryId!==ki)return!1}catch{}return!0}function aN(e,s){return e!=="keypress"?!1:s!=null&&s.tagName?!(s.tagName==="INPUT"||s.tagName==="TEXTAREA"||s.isContentEditable):!0}function qa(e,s=!1){return r=>{if(!r||r._sentryCaptured)return;const t=lN(r);if(aN(r.type,t))return;Ze(r,"_sentryCaptured",!0),t&&!t._sentryId&&Ze(t,"_sentryId",ss());const i=r.type==="keypress"?"input":r.type;oN(r)||(e({event:r,name:i,global:s}),Ti=r.type,ki=t?t._sentryId:void 0),clearTimeout(Ba),Ba=re.setTimeout(()=>{ki=void 0,Ti=void 0},nN)}}function lN(e){try{return e.target}catch{return null}}let Vt;function Sn(e){const s="history";Ws(s,e),zs(s,cN)}function cN(){if(re.addEventListener("popstate",()=>{const s=re.location.href,r=Vt;if(Vt=s,r===s)return;us("history",{from:r,to:s})}),!Ug())return;function e(s){return function(...r){const t=r.length>2?r[2]:void 0;if(t){const i=Vt,o=uN(String(t));if(Vt=o,i===o)return s.apply(this,r);us("history",{from:i,to:o})}return s.apply(this,r)}}Ke(re.history,"pushState",e),Ke(re.history,"replaceState",e)}function uN(e){try{return new URL(e,re.location.origin).toString()}catch{return e}}const zt={};function bo(e){const s=zt[e];if(s)return s;let r=re[e];if(Ei(r))return zt[e]=r.bind(re);const t=re.document;if(t&&typeof t.createElement=="function")try{const i=t.createElement("iframe");i.hidden=!0,t.head.appendChild(i);const o=i.contentWindow;o!=null&&o[e]&&(r=o[e]),t.head.removeChild(i)}catch(i){or&&L.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,i)}return r&&(zt[e]=r.bind(re))}function mN(e){zt[e]=void 0}function St(...e){return bo("setTimeout")(...e)}const Zs="__sentry_xhr_v3__";function uu(e){const s="xhr";Ws(s,e),zs(s,dN)}function dN(){if(!re.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(s,r,t){const i=new Error,o=Ae()*1e3,a=ks(t[0])?t[0].toUpperCase():void 0,l=fN(t[1]);if(!a||!l)return s.apply(r,t);r[Zs]={method:a,url:l,request_headers:{}},a==="POST"&&l.match(/sentry_key/)&&(r.__sentry_own_request__=!0);const c=()=>{const u=r[Zs];if(u&&r.readyState===4){try{u.status_code=r.status}catch{}const d={endTimestamp:Ae()*1e3,startTimestamp:o,xhr:r,virtualError:i};us("xhr",d)}};return"onreadystatechange"in r&&typeof r.onreadystatechange=="function"?r.onreadystatechange=new Proxy(r.onreadystatechange,{apply(u,d,m){return c(),u.apply(d,m)}}):r.addEventListener("readystatechange",c),r.setRequestHeader=new Proxy(r.setRequestHeader,{apply(u,d,m){const[f,h]=m,g=d[Zs];return g&&ks(f)&&ks(h)&&(g.request_headers[f.toLowerCase()]=h),u.apply(d,m)}}),s.apply(r,t)}}),e.send=new Proxy(e.send,{apply(s,r,t){const i=r[Zs];if(!i)return s.apply(r,t);t[0]!==void 0&&(i.body=t[0]);const o={startTimestamp:Ae()*1e3,xhr:r};return us("xhr",o),s.apply(r,t)}})}function fN(e){if(ks(e))return e;try{return e.toString()}catch{}}const hN=Symbol.for("sentry__originalRequestBody");function mu(e){return new URLSearchParams(e).toString()}function du(e,s=L){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[mu(e)];if(!e)return[void 0]}catch(r){return or&&s.error(r,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return or&&s.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function fu(e=[]){if(e.length>=2&&e[1]&&typeof e[1]=="object"&&"body"in e[1])return e[1].body;if(e.length>=1&&e[0]instanceof Request){const r=e[0][hN];return r!==void 0?r:void 0}}function hu(e){let s;try{s=e.getAllResponseHeaders()}catch(r){return or&&L.error(r,"Failed to get xhr response headers",e),{}}return s?s.split(`\r
`).reduce((r,t)=>{const[i,o]=t.split(": ");return o&&(r[i.toLowerCase()]=o),r},{}):{}}const Kn=[],Yt=new Map,Nr=new Map,gN=60;function pN(){if(jt()&&Qe()){const s=NN();return()=>{s()}}return()=>{}}const _i={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function NN(){return tu(bN)}const bN=({metric:e})=>{if(e.value==null)return;const s=Te(e.value);if(s>gN)return;const r=e.entries.find(g=>g.duration===e.value&&_i[g.name]);if(!r)return;const{interactionId:t}=r,i=_i[r.name],o=Te(Qe()+r.startTime),a=We(),l=a?Le(a):void 0,c=t!=null?Yt.get(t):void 0,u=(c==null?void 0:c.span)||l,d=u?ge(u).description:Ee().getScopeData().transactionName,m=(c==null?void 0:c.elementName)||Xe(r.target),f={[Re]:"auto.http.browser.inp",[Rs]:`ui.interaction.${i}`,[qr]:r.duration},h=No({name:m,transaction:d,attributes:f,startTime:o});h&&(h.addEvent("inp",{[ft]:"millisecond",[ht]:e.value}),h.end(o+s))};function yN(){const e=Object.keys(_i);ji()&&e.forEach(i=>{re.addEventListener(i,s,{capture:!0,passive:!0})});function s(i){const o=i.target;if(!o)return;const a=Xe(o),l=Math.round(i.timeStamp);if(Nr.set(l,a),Nr.size>50){const c=Nr.keys().next().value;c!==void 0&&Nr.delete(c)}}function r(i){const o=Math.round(i.startTime);let a=Nr.get(o);if(!a)for(let l=-5;l<=5;l++){const c=Nr.get(o+l);if(c){a=c;break}}return a||"<unknown>"}const t=({entries:i})=>{const o=We(),a=o&&Le(o);i.forEach(l=>{if(!_p(l))return;const c=l.interactionId;if(c==null||Yt.has(c))return;const u=l.target?Xe(l.target):r(l);if(Kn.length>10){const d=Kn.shift();Yt.delete(d)}Kn.push(c),Yt.set(c,{span:a,elementName:u})})};ar("event",t),ar("first-input",t)}const EN=40;function jN(e,s=bo("fetch")){let r=0,t=0;async function i(o){const a=o.body.length;r+=a,t++;const l={body:o.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:r<=6e4&&t<15,...e.fetchOptions};try{const c=await s(e.url,l);return{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}}catch(c){throw mN("fetch"),c}finally{r-=a,t--}}return Dh(e,i,io(e.bufferSize||EN))}const rs=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,SN=30,vN=50;function Di(e,s,r,t){const i={filename:e,function:s==="<anonymous>"?nr:s,in_app:!0};return r!==void 0&&(i.lineno=r),t!==void 0&&(i.colno=t),i}const xN=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,CN=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,TN=/\((\S*)(?::(\d+))(?::(\d+))\)/,kN=/at (.+?) ?\(data:(.+?),/,_N=e=>{const s=e.match(kN);if(s)return{filename:`<data:${s[2]}>`,function:s[1]};const r=xN.exec(e);if(r){const[,i,o,a]=r;return Di(i,nr,+o,+a)}const t=CN.exec(e);if(t){if(t[2]&&t[2].indexOf("eval")===0){const l=TN.exec(t[2]);l&&(t[2]=l[1],t[3]=l[2],t[4]=l[3])}const[o,a]=gu(t[1]||nr,t[2]);return Di(a,o,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}},DN=[SN,_N],wN=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,UN=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,VN=e=>{const s=wN.exec(e);if(s){if(s[3]&&s[3].indexOf(" > eval")>-1){const o=UN.exec(s[3]);o&&(s[1]=s[1]||"eval",s[3]=o[1],s[4]=o[2],s[5]="")}let t=s[3],i=s[1]||nr;return[i,t]=gu(i,t),Di(t,i,s[4]?+s[4]:void 0,s[5]?+s[5]:void 0)}},IN=[vN,VN],RN=[DN,IN],MN=Al(...RN),gu=(e,s)=>{const r=e.indexOf("safari-extension")!==-1,t=e.indexOf("safari-web-extension")!==-1;return r||t?[e.indexOf("@")!==-1?e.split("@")[0]:nr,r?`safari-extension:${s}`:`safari-web-extension:${s}`]:[e,s]},It=1024,PN="Breadcrumbs",AN=(e={})=>{const s={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:PN,setup(r){s.console&&hg($N(r)),s.dom&&cu(FN(r,s.dom)),s.xhr&&uu(BN(r)),s.fetch&&Hc(qN(r)),s.history&&Sn(HN(r)),s.sentry&&r.on("beforeSendEvent",LN(r))}}},ON=AN;function LN(e){return function(r){ue()===e&&vs({category:`sentry.${r.type==="transaction"?"transaction":"event"}`,event_id:r.event_id,level:r.level,message:Xs(r)},{event:r})}}function FN(e,s){return function(t){if(ue()!==e)return;let i,o,a=typeof s=="object"?s.serializeAttribute:void 0,l=typeof s=="object"&&typeof s.maxStringLength=="number"?s.maxStringLength:void 0;l&&l>It&&(rs&&L.warn(`\`dom.maxStringLength\` cannot exceed ${It}, but a value of ${l} was configured. Sentry will use ${It} instead.`),l=It),typeof a=="string"&&(a=[a]);try{const u=t.event,d=WN(u)?u.target:u;i=Xe(d,{keyAttrs:a,maxStringLength:l}),o=Hl(d)}catch{i="<unknown>"}if(i.length===0)return;const c={category:`ui.${t.name}`,message:i};o&&(c.data={"ui.component_name":o}),vs(c,{event:t.event,name:t.name,global:t.global})}}function $N(e){return function(r){if(ue()!==e)return;const t={category:"console",data:{arguments:r.args,logger:"console"},level:Fc(r.level),message:Zo(r.args," ")};if(r.level==="assert")if(r.args[0]===!1)t.message=`Assertion failed: ${Zo(r.args.slice(1)," ")||"console.assert"}`,t.data.arguments=r.args.slice(1);else return;vs(t,{input:r.args,level:r.level})}}function BN(e){return function(r){if(ue()!==e)return;const{startTimestamp:t,endTimestamp:i}=r,o=r.xhr[Zs];if(!t||!i||!o)return;const{method:a,url:l,status_code:c,body:u}=o,d={method:a,url:l,status_code:c},m={xhr:r.xhr,input:u,startTimestamp:t,endTimestamp:i},f={category:"xhr",data:d,type:"http",level:qc(c)};e.emit("beforeOutgoingRequestBreadcrumb",f,m),vs(f,m)}}function qN(e){return function(r){if(ue()!==e)return;const{startTimestamp:t,endTimestamp:i}=r;if(i&&!(r.fetchData.url.match(/sentry_key/)&&r.fetchData.method==="POST"))if(r.fetchData.method,r.fetchData.url,r.error){const o=r.fetchData,a={data:r.error,input:r.args,startTimestamp:t,endTimestamp:i},l={category:"fetch",data:o,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",l,a),vs(l,a)}else{const o=r.response,a={...r.fetchData,status_code:o==null?void 0:o.status};r.fetchData.request_body_size,r.fetchData.response_body_size,o==null||o.status;const l={input:r.args,response:o,startTimestamp:t,endTimestamp:i},c={category:"fetch",data:a,type:"http",level:qc(a.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",c,l),vs(c,l)}}}function HN(e){return function(r){if(ue()!==e)return;let t=r.from,i=r.to;const o=tr(pe.location.href);let a=t?tr(t):void 0;const l=tr(i);a!=null&&a.path||(a=o),o.protocol===l.protocol&&o.host===l.host&&(i=l.relative),o.protocol===a.protocol&&o.host===a.host&&(t=a.relative),vs({category:"navigation",data:{from:t,to:i}})}}function WN(e){return!!e&&!!e.target}const zN=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],YN="BrowserApiErrors",GN=(e={})=>{const s={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:YN,setupOnce(){s.setTimeout&&Ke(pe,"setTimeout",Ha),s.setInterval&&Ke(pe,"setInterval",Ha),s.requestAnimationFrame&&Ke(pe,"requestAnimationFrame",KN),s.XMLHttpRequest&&"XMLHttpRequest"in pe&&Ke(XMLHttpRequest.prototype,"send",XN);const r=s.eventTarget;r&&(Array.isArray(r)?r:zN).forEach(i=>ZN(i,s))}}},JN=GN;function Ha(e){return function(...s){const r=s[0];return s[0]=Vr(r,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${Us(e)}`}}),e.apply(this,s)}}function KN(e){return function(s){return e.apply(this,[Vr(s,{mechanism:{data:{handler:Us(e)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function XN(e){return function(...s){const r=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(i=>{i in r&&typeof r[i]=="function"&&Ke(r,i,function(o){const a={mechanism:{data:{handler:Us(o)},handled:!1,type:`auto.browser.browserapierrors.xhr.${i}`}},l=Yi(o);return l&&(a.mechanism.data.handler=Us(l)),Vr(o,a)})}),e.apply(this,s)}}function ZN(e,s){var i,o;const t=(i=pe[e])==null?void 0:i.prototype;(o=t==null?void 0:t.hasOwnProperty)!=null&&o.call(t,"addEventListener")&&(Ke(t,"addEventListener",function(a){return function(l,c,u){try{QN(c)&&(c.handleEvent=Vr(c.handleEvent,{mechanism:{data:{handler:Us(c),target:e},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return s.unregisterOriginalCallbacks&&eb(this,l,c),a.apply(this,[l,Vr(c,{mechanism:{data:{handler:Us(c),target:e},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),u])}}),Ke(t,"removeEventListener",function(a){return function(l,c,u){try{const d=c.__sentry_wrapped__;d&&a.call(this,l,d,u)}catch{}return a.call(this,l,c,u)}}))}function QN(e){return typeof e.handleEvent=="function"}function eb(e,s,r){e&&typeof e=="object"&&"removeEventListener"in e&&typeof e.removeEventListener=="function"&&e.removeEventListener(s,r)}const sb=()=>({name:"BrowserSession",setupOnce(){if(typeof pe.document>"u"){rs&&L.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}Ea({ignoreDuration:!0}),ja(),Sn(({from:e,to:s})=>{e!==void 0&&e!==s&&(Ea({ignoreDuration:!0}),ja())})}}),rb="GlobalHandlers",tb=(e={})=>{const s={onerror:!0,onunhandledrejection:!0,...e};return{name:rb,setupOnce(){Error.stackTraceLimit=50},setup(r){s.onerror&&(ib(r),Wa("onerror")),s.onunhandledrejection&&(ob(r),Wa("onunhandledrejection"))}}},nb=tb;function ib(e){Ll(s=>{const{stackParser:r,attachStacktrace:t}=pu();if(ue()!==e||zc())return;const{msg:i,url:o,line:a,column:l,error:c}=s,u=cb(mo(r,c||i,void 0,t,!1),o,a,l);u.level="error",Ec(u,{originalException:c,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function ob(e){Fl(s=>{const{stackParser:r,attachStacktrace:t}=pu();if(ue()!==e||zc())return;const i=ab(s),o=kr(i)?lb(i):mo(r,i,void 0,t,!0);o.level="error",Ec(o,{originalException:i,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function ab(e){if(kr(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function lb(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function cb(e,s,r,t){const i=e.exception=e.exception||{},o=i.values=i.values||[],a=o[0]=o[0]||{},l=a.stacktrace=a.stacktrace||{},c=l.frames=l.frames||[],u=t,d=r,m=ub(s)??$r();return c.length===0&&c.push({colno:u,filename:m,function:nr,in_app:!0,lineno:d}),e}function Wa(e){rs&&L.log(`Global Handler attached: ${e}`)}function pu(){const e=ue();return(e==null?void 0:e.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}function ub(e){if(!(!ks(e)||e.length===0))return e.startsWith("data:")?`<${Fs(e,!1)}>`:e}const mb=()=>({name:"HttpContext",preprocessEvent(e){var t;if(!pe.navigator&&!pe.location&&!pe.document)return;const s=lo(),r={...s.headers,...(t=e.request)==null?void 0:t.headers};e.request={...s,...e.request,headers:r}}}),db="cause",fb=5,hb="LinkedErrors",gb=(e={})=>{const s=e.limit||fb,r=e.key||db;return{name:hb,preprocessEvent(t,i,o){const a=o.getOptions();fg(co,a.stackParser,r,s,t,i)}}},pb=gb,Nb="SpotlightBrowser",bb=(e={})=>{const s=e.sidecarUrl||"http://localhost:8969/stream";return{name:Nb,setup:()=>{rs&&L.log("Using Sidecar URL",s)},processEvent:r=>jb(r)?null:r,afterAllSetup:r=>{yb(r,s)}}};function yb(e,s){const r=bo("fetch");let t=0;e.on("beforeEnvelope",i=>{if(t>3){L.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests:",t);return}r(s,{method:"POST",body:dc(i),headers:{"Content-Type":"application/x-sentry-envelope"},mode:"cors"}).then(o=>{o.status>=200&&o.status<400&&(t=0)},o=>{t++,L.error("Sentry SDK can't connect to Sidecar is it running? See: https://spotlightjs.com/sidecar/npx/",o)})})}const Eb=bb;function jb(e){var s;return!!(e.type==="transaction"&&e.spans&&((s=e.contexts)!=null&&s.trace)&&e.contexts.trace.op==="ui.action.click"&&e.spans.some(({description:r})=>r==null?void 0:r.includes("#sentry-spotlight")))}function Sb(){return vb()?(rs&&cr(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function vb(){var o;if(typeof pe.window>"u")return!1;const e=pe;if(e.nw)return!1;const s=e.chrome||e.browser;if(!((o=s==null?void 0:s.runtime)!=null&&o.id))return!1;const r=$r(),t=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(pe===pe.top&&t.some(a=>r.startsWith(`${a}://`)))}function xb(e){return[ig(),sg(),xg(),JN(),ON(),nb(),pb(),bg(),mb(),sb()]}function Cb(e={}){const s=!e.skipBrowserExtensionCheck&&Sb();let r=e.defaultIntegrations==null?xb():e.defaultIntegrations;if(e.spotlight){r||(r=[]);const i=typeof e.spotlight=="string"?{sidecarUrl:e.spotlight}:void 0;r.push(Eb(i))}const t={...e,enabled:s?!1:e.enabled,stackParser:od(e.stackParser||MN),integrations:bh({integrations:e.integrations,defaultIntegrations:r}),transport:e.transport||jN};return Fh(sp,t)}const xe=ce,yo="sentryReplaySession",Tb="replay_event",Eo="Unable to send Replay",kb=3e5,_b=9e5,Db=5e3,wb=5500,Ub=6e4,Vb=5e3,Ib=3,za=15e4,Rt=5e3,Rb=3e3,Mb=300,jo=2e7,Pb=4999,Ab=5e4,Ya=36e5;var Ob=Object.defineProperty,Lb=(e,s,r)=>s in e?Ob(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,Ga=(e,s,r)=>Lb(e,typeof s!="symbol"?s+"":s,r),Ue=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(Ue||{});function Fb(e){return e.nodeType===e.ELEMENT_NODE}function Zr(e){const s=e==null?void 0:e.host;return(s==null?void 0:s.shadowRoot)===e}function Qr(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function $b(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),e}function Bb(e){const{cssText:s}=e;if(s.split('"').length<3)return s;const r=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?r.push("layer"):e.layerName&&r.push(`layer(${e.layerName})`),e.supportsText&&r.push(`supports(${e.supportsText})`),e.media.length&&r.push(e.media.mediaText),r.join(" ")+";"}function on(e){try{const s=e.rules||e.cssRules;return s?$b(Array.from(s,Nu).join("")):null}catch{return null}}function qb(e){let s="";for(let r=0;r<e.style.length;r++){const t=e.style,i=t[r],o=t.getPropertyPriority(i);s+=`${i}:${t.getPropertyValue(i)}${o?" !important":""};`}return`${e.selectorText} { ${s} }`}function Nu(e){let s;if(Wb(e))try{s=on(e.styleSheet)||Bb(e)}catch{}else if(zb(e)){let r=e.cssText;const t=e.selectorText.includes(":"),i=typeof e.style.all=="string"&&e.style.all;if(i&&(r=qb(e)),t&&(r=Hb(r)),t||i)return r}return s||e.cssText}function Hb(e){const s=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(s,"$1\\$2")}function Wb(e){return"styleSheet"in e}function zb(e){return"selectorText"in e}class bu{constructor(){Ga(this,"idNodeMap",new Map),Ga(this,"nodeMetaMap",new WeakMap)}getId(s){var t;return s?((t=this.getMeta(s))==null?void 0:t.id)??-1:-1}getNode(s){return this.idNodeMap.get(s)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(s){return this.nodeMetaMap.get(s)||null}removeNodeFromMap(s){const r=this.getId(s);this.idNodeMap.delete(r),s.childNodes&&s.childNodes.forEach(t=>this.removeNodeFromMap(t))}has(s){return this.idNodeMap.has(s)}hasNode(s){return this.nodeMetaMap.has(s)}add(s,r){const t=r.id;this.idNodeMap.set(t,s),this.nodeMetaMap.set(s,r)}replace(s,r){const t=this.getNode(s);if(t){const i=this.nodeMetaMap.get(t);i&&this.nodeMetaMap.set(r,i)}this.idNodeMap.set(s,r)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Yb(){return new bu}function vn({maskInputOptions:e,tagName:s,type:r}){return s==="OPTION"&&(s="SELECT"),!!(e[s.toLowerCase()]||r&&e[r]||r==="password"||s==="INPUT"&&!r&&e.text)}function it({isMasked:e,element:s,value:r,maskInputFn:t}){let i=r||"";return e?(t&&(i=t(i,s)),"*".repeat(i.length)):i}function Ir(e){return e.toLowerCase()}function wi(e){return e.toUpperCase()}const Ja="__rrweb_original__";function Gb(e){const s=e.getContext("2d");if(!s)return!0;const r=50;for(let t=0;t<e.width;t+=r)for(let i=0;i<e.height;i+=r){const o=s.getImageData,a=Ja in o?o[Ja]:o;if(new Uint32Array(a.call(s,t,i,Math.min(r,e.width-t),Math.min(r,e.height-i)).data.buffer).some(c=>c!==0))return!1}return!0}function So(e){const s=e.type;return e.hasAttribute("data-rr-is-password")?"password":s?Ir(s):null}function an(e,s,r){return s==="INPUT"&&(r==="radio"||r==="checkbox")?e.getAttribute("value")||"":e.value}function yu(e,s){let r;try{r=new URL(e,s??window.location.href)}catch{return null}const t=/\.([0-9a-z]+)(?:$)/i,i=r.pathname.match(t);return(i==null?void 0:i[1])??null}const Ka={};function Eu(e){const s=Ka[e];if(s)return s;const r=window.document;let t=window[e];if(r&&typeof r.createElement=="function")try{const i=r.createElement("iframe");i.hidden=!0,r.head.appendChild(i);const o=i.contentWindow;o&&o[e]&&(t=o[e]),r.head.removeChild(i)}catch{}return Ka[e]=t.bind(window)}function Ui(...e){return Eu("setTimeout")(...e)}function ju(...e){return Eu("clearTimeout")(...e)}function Su(e){try{return e.contentDocument}catch{}}let Jb=1;const Kb=new RegExp("[^a-z0-9-_:]"),ot=-2;function vo(){return Jb++}function Xb(e){if(e instanceof HTMLFormElement)return"form";const s=Ir(e.tagName);return Kb.test(s)?"div":s}function Zb(e){let s="";return e.indexOf("//")>-1?s=e.split("/").slice(0,3).join("/"):s=e.split("/")[0],s=s.split("?")[0],s}let br,Xa;const Qb=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,ey=/^(?:[a-z+]+:)?\/\//i,sy=/^www\..*/i,ry=/^(data:)([^,]*),(.*)/i;function ty(e,s){if(!e||s.size===0)return e;try{const r=e.split(";"),t=[];for(let i of r){if(i=i.trim(),!i)continue;const o=i.indexOf(":");if(o===-1){t.push(i);continue}const a=i.slice(0,o).trim();s.has(a)||t.push(i)}return t.join("; ")+(t.length>0&&e.endsWith(";")?";":"")}catch(r){return console.warn("Error filtering CSS properties:",r),e}}function ln(e,s){return(e||"").replace(Qb,(r,t,i,o,a,l)=>{const c=i||a||l,u=t||o||"";if(!c)return r;if(ey.test(c)||sy.test(c))return`url(${u}${c}${u})`;if(ry.test(c))return`url(${u}${c}${u})`;if(c[0]==="/")return`url(${u}${Zb(s)+c}${u})`;const d=s.split("/"),m=c.split("/");d.pop();for(const f of m)f!=="."&&(f===".."?d.pop():d.push(f));return`url(${u}${d.join("/")}${u})`})}const ny=/^[^ \t\n\r\u000c]+/,iy=/^[, \t\n\r\u000c]+/;function oy(e,s){if(s.trim()==="")return s;let r=0;function t(o){let a;const l=o.exec(s.substring(r));return l?(a=l[0],r+=a.length,a):""}const i=[];for(;t(iy),!(r>=s.length);){let o=t(ny);if(o.slice(-1)===",")o=Sr(e,o.substring(0,o.length-1)),i.push(o);else{let a="";o=Sr(e,o);let l=!1;for(;;){const c=s.charAt(r);if(c===""){i.push((o+a).trim());break}else if(l)c===")"&&(l=!1);else if(c===","){r+=1,i.push((o+a).trim());break}else c==="("&&(l=!0);a+=c,r+=1}}}return i.join(", ")}const Za=new WeakMap;function Sr(e,s){return!s||s.trim()===""?s:xn(e,s)}function ay(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function xn(e,s){let r=Za.get(e);if(r||(r=e.createElement("a"),Za.set(e,r)),!s)s="";else if(s.startsWith("blob:")||s.startsWith("data:"))return s;return r.setAttribute("href",s),r.href}function vu(e,s,r,t,i,o,a){if(!t)return t;if(r==="src"||r==="href"&&!(s==="use"&&t[0]==="#"))return Sr(e,t);if(r==="xlink:href"&&t[0]!=="#")return Sr(e,t);if(r==="background"&&(s==="table"||s==="td"||s==="th"))return Sr(e,t);if(r==="srcset")return oy(e,t);if(r==="style"){let l=ln(t,xn(e));return a&&a.size>0&&(l=ty(l,a)),l}else if(s==="object"&&r==="data")return Sr(e,t);return typeof o=="function"?o(r,t,i):t}function xu(e,s,r){return(e==="video"||e==="audio")&&s==="autoplay"}function ly(e,s,r,t){try{if(t&&e.matches(t))return!1;if(typeof s=="string"){if(e.classList.contains(s))return!0}else for(let i=e.classList.length;i--;){const o=e.classList[i];if(s.test(o))return!0}if(r)return e.matches(r)}catch{}return!1}function cy(e,s){for(let r=e.classList.length;r--;){const t=e.classList[r];if(s.test(t))return!0}return!1}function Qs(e,s,r=1/0,t=0){return!e||e.nodeType!==e.ELEMENT_NODE||t>r?-1:s(e)?t:Qs(e.parentNode,s,r,t+1)}function vr(e,s){return r=>{const t=r;if(t===null)return!1;try{if(e){if(typeof e=="string"){if(t.matches(`.${e}`))return!0}else if(cy(t,e))return!0}return!!(s&&t.matches(s))}catch{return!1}}}function Rr(e,s,r,t,i,o){try{const a=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(a===null)return!1;if(a.tagName==="INPUT"){const u=a.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(u))return!0}let l=-1,c=-1;if(o){if(c=Qs(a,vr(t,i)),c<0)return!0;l=Qs(a,vr(s,r),c>=0?c:1/0)}else{if(l=Qs(a,vr(s,r)),l<0)return!1;c=Qs(a,vr(t,i),l>=0?l:1/0)}return l>=0?c>=0?l<=c:!0:c>=0?!1:!!o}catch{}return!!o}function uy(e,s,r){const t=e.contentWindow;if(!t)return;let i=!1,o;try{o=t.document.readyState}catch{return}if(o!=="complete"){const l=Ui(()=>{i||(s(),i=!0)},r);e.addEventListener("load",()=>{ju(l),i=!0,s()});return}const a="about:blank";if(t.location.href!==a||e.src===a||e.src==="")return Ui(s,0),e.addEventListener("load",s);e.addEventListener("load",s)}function my(e,s,r){let t=!1,i;try{i=e.sheet}catch{return}if(i)return;const o=Ui(()=>{t||(s(),t=!0)},r);e.addEventListener("load",()=>{ju(o),t=!0,s()})}function dy(e,s){const{doc:r,mirror:t,blockClass:i,blockSelector:o,unblockSelector:a,maskAllText:l,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:m,unmaskTextSelector:f,inlineStylesheet:h,maskInputOptions:g={},maskTextFn:p,maskInputFn:N,dataURLOptions:y={},inlineImages:E,recordCanvas:R,keepIframeSrcFn:A,newlyAddedElement:_=!1,ignoreCSSAttributes:C}=s,S=fy(r,t);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:Ue.Document,childNodes:[],compatMode:e.compatMode}:{type:Ue.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Ue.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:S};case e.ELEMENT_NODE:return gy(e,{doc:r,blockClass:i,blockSelector:o,unblockSelector:a,inlineStylesheet:h,maskAttributeFn:c,maskInputOptions:g,maskInputFn:N,dataURLOptions:y,inlineImages:E,recordCanvas:R,keepIframeSrcFn:A,newlyAddedElement:_,rootId:S,maskTextClass:u,unmaskTextClass:d,maskTextSelector:m,unmaskTextSelector:f,ignoreCSSAttributes:C});case e.TEXT_NODE:return hy(e,{doc:r,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:m,unmaskTextSelector:f,maskTextFn:p,maskInputOptions:g,maskInputFn:N,rootId:S});case e.CDATA_SECTION_NODE:return{type:Ue.CDATA,textContent:"",rootId:S};case e.COMMENT_NODE:return{type:Ue.Comment,textContent:e.textContent||"",rootId:S};default:return!1}}function fy(e,s){if(!s.hasNode(e))return;const r=s.getId(e);return r===1?void 0:r}function hy(e,s){var y;const{maskAllText:r,maskTextClass:t,unmaskTextClass:i,maskTextSelector:o,unmaskTextSelector:a,maskTextFn:l,maskInputOptions:c,maskInputFn:u,rootId:d}=s,m=e.parentNode&&e.parentNode.tagName;let f=e.textContent;const h=m==="STYLE"?!0:void 0,g=m==="SCRIPT"?!0:void 0,p=m==="TEXTAREA"?!0:void 0;if(h&&f){try{e.nextSibling||e.previousSibling||(y=e.parentNode.sheet)!=null&&y.cssRules&&(f=on(e.parentNode.sheet))}catch(E){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${E}`,e)}f=ln(f,xn(s.doc))}g&&(f="SCRIPT_PLACEHOLDER");const N=Rr(e,t,o,i,a,r);if(!h&&!g&&!p&&f&&N&&(f=l?l(f,e.parentElement):f.replace(/[\S]/g,"*")),p&&f&&(c.textarea||N)&&(f=u?u(f,e.parentNode):f.replace(/[\S]/g,"*")),m==="OPTION"&&f){const E=vn({type:null,tagName:m,maskInputOptions:c});f=it({isMasked:Rr(e,t,o,i,a,E),element:e,value:f,maskInputFn:u})}return{type:Ue.Text,textContent:f||"",isStyle:h,rootId:d}}function gy(e,s){const{doc:r,blockClass:t,blockSelector:i,unblockSelector:o,inlineStylesheet:a,maskInputOptions:l={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:d={},inlineImages:m,recordCanvas:f,keepIframeSrcFn:h,newlyAddedElement:g=!1,rootId:p,maskTextClass:N,unmaskTextClass:y,maskTextSelector:E,unmaskTextSelector:R,ignoreCSSAttributes:A}=s,_=ly(e,t,i,o),C=Xb(e);let S={};const I=e.attributes.length;for(let U=0;U<I;U++){const T=e.attributes[U];T.name&&!xu(C,T.name,T.value)&&(S[T.name]=vu(r,C,Ir(T.name),T.value,e,c,A))}if(C==="link"&&a){const U=Array.from(r.styleSheets).find(w=>w.href===e.href);let T=null;U&&(T=on(U)),T&&(S.rel=null,S.href=null,S.crossorigin=null,S._cssText=ln(T,U.href))}if(C==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const U=on(e.sheet);U&&(S._cssText=ln(U,xn(r)))}if(C==="input"||C==="textarea"||C==="select"||C==="option"){const U=e,T=So(U),w=an(U,wi(C),T),v=U.checked;if(T!=="submit"&&T!=="button"&&w){const D=Rr(U,N,E,y,R,vn({type:T,tagName:wi(C),maskInputOptions:l}));S.value=it({isMasked:D,element:U,value:w,maskInputFn:u})}v&&(S.checked=v)}if(C==="option"&&(e.selected&&!l.select?S.selected=!0:delete S.selected),C==="canvas"&&f){if(e.__context==="2d")Gb(e)||(S.rr_dataURL=e.toDataURL(d.type,d.quality));else if(!("__context"in e)){const U=e.toDataURL(d.type,d.quality),T=r.createElement("canvas");T.width=e.width,T.height=e.height;const w=T.toDataURL(d.type,d.quality);U!==w&&(S.rr_dataURL=U)}}if(C==="img"&&m){br||(br=r.createElement("canvas"),Xa=br.getContext("2d"));const U=e,T=U.currentSrc||U.getAttribute("src")||"<unknown-src>",w=U.crossOrigin,v=()=>{U.removeEventListener("load",v);try{br.width=U.naturalWidth,br.height=U.naturalHeight,Xa.drawImage(U,0,0),S.rr_dataURL=br.toDataURL(d.type,d.quality)}catch(D){if(U.crossOrigin!=="anonymous"){U.crossOrigin="anonymous",U.complete&&U.naturalWidth!==0?v():U.addEventListener("load",v);return}else console.warn(`Cannot inline img src=${T}! Error: ${D}`)}U.crossOrigin==="anonymous"&&(w?S.crossOrigin=w:U.removeAttribute("crossorigin"))};U.complete&&U.naturalWidth!==0?v():U.addEventListener("load",v)}if((C==="audio"||C==="video")&&(S.rr_mediaState=e.paused?"paused":"played",S.rr_mediaCurrentTime=e.currentTime),g||(e.scrollLeft&&(S.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(S.rr_scrollTop=e.scrollTop)),_){const{width:U,height:T}=e.getBoundingClientRect();S={class:S.class,rr_width:`${U}px`,rr_height:`${T}px`}}C==="iframe"&&!h(S.src)&&(!_&&!Su(e)&&(S.rr_src=S.src),delete S.src);let F;try{customElements.get(C)&&(F=!0)}catch{}return{type:Ue.Element,tagName:C,attributes:S,childNodes:[],isSVG:ay(e)||void 0,needBlock:_,rootId:p,isCustom:F}}function ve(e){return e==null?"":e.toLowerCase()}function py(e,s){if(s.comment&&e.type===Ue.Comment)return!0;if(e.type===Ue.Element){if(s.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&yu(e.attributes.href)==="js"))return!0;if(s.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(ve(e.attributes.name).match(/^msapplication-tile(image|color)$/)||ve(e.attributes.name)==="application-name"||ve(e.attributes.rel)==="icon"||ve(e.attributes.rel)==="apple-touch-icon"||ve(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(s.headMetaDescKeywords&&ve(e.attributes.name).match(/^description|keywords$/))return!0;if(s.headMetaSocial&&(ve(e.attributes.property).match(/^(og|twitter|fb):/)||ve(e.attributes.name).match(/^(og|twitter):/)||ve(e.attributes.name)==="pinterest"))return!0;if(s.headMetaRobots&&(ve(e.attributes.name)==="robots"||ve(e.attributes.name)==="googlebot"||ve(e.attributes.name)==="bingbot"))return!0;if(s.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(s.headMetaAuthorship&&(ve(e.attributes.name)==="author"||ve(e.attributes.name)==="generator"||ve(e.attributes.name)==="framework"||ve(e.attributes.name)==="publisher"||ve(e.attributes.name)==="progid"||ve(e.attributes.property).match(/^article:/)||ve(e.attributes.property).match(/^product:/)))return!0;if(s.headMetaVerification&&(ve(e.attributes.name)==="google-site-verification"||ve(e.attributes.name)==="yandex-verification"||ve(e.attributes.name)==="csrf-token"||ve(e.attributes.name)==="p:domain_verify"||ve(e.attributes.name)==="verify-v1"||ve(e.attributes.name)==="verification"||ve(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function xr(e,s){const{doc:r,mirror:t,blockClass:i,blockSelector:o,unblockSelector:a,maskAllText:l,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:m,skipChild:f=!1,inlineStylesheet:h=!0,maskInputOptions:g={},maskAttributeFn:p,maskTextFn:N,maskInputFn:y,slimDOMOptions:E,dataURLOptions:R={},inlineImages:A=!1,recordCanvas:_=!1,onSerialize:C,onIframeLoad:S,iframeLoadTimeout:I=5e3,onBlockedImageLoad:F,onStylesheetLoad:U,stylesheetLoadTimeout:T=5e3,keepIframeSrcFn:w=()=>!1,newlyAddedElement:v=!1,ignoreCSSAttributes:D}=s;let{preserveWhiteSpace:H=!0}=s;const z=dy(e,{doc:r,mirror:t,blockClass:i,blockSelector:o,maskAllText:l,unblockSelector:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:m,inlineStylesheet:h,maskInputOptions:g,maskAttributeFn:p,maskTextFn:N,maskInputFn:y,dataURLOptions:R,inlineImages:A,recordCanvas:_,keepIframeSrcFn:w,newlyAddedElement:v,ignoreCSSAttributes:D});if(!z)return console.warn(e,"not serialized"),null;let $;t.hasNode(e)?$=t.getId(e):py(z,E)||!H&&z.type===Ue.Text&&!z.isStyle&&!z.textContent.replace(/^\s+|\s+$/gm,"").length?$=ot:$=vo();const O=Object.assign(z,{id:$});if(t.add(e,O),$===ot)return null;C&&C(e);let V=!f;if(O.type===Ue.Element){V=V&&!O.needBlock;const M=e.shadowRoot;M&&Qr(M)&&(O.isShadowHost=!0)}if((O.type===Ue.Document||O.type===Ue.Element)&&V){E.headWhitespace&&O.type===Ue.Element&&O.tagName==="head"&&(H=!1);const M={doc:r,mirror:t,blockClass:i,blockSelector:o,maskAllText:l,unblockSelector:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:m,skipChild:f,inlineStylesheet:h,maskInputOptions:g,maskAttributeFn:p,maskTextFn:N,maskInputFn:y,slimDOMOptions:E,dataURLOptions:R,inlineImages:A,recordCanvas:_,preserveWhiteSpace:H,onSerialize:C,onIframeLoad:S,iframeLoadTimeout:I,onBlockedImageLoad:F,onStylesheetLoad:U,stylesheetLoadTimeout:T,keepIframeSrcFn:w,ignoreCSSAttributes:D},B=e.childNodes?Array.from(e.childNodes):[];for(const W of B){const Q=xr(W,M);Q&&O.childNodes.push(Q)}if(Fb(e)&&e.shadowRoot)for(const W of Array.from(e.shadowRoot.childNodes)){const Q=xr(W,M);Q&&(Qr(e.shadowRoot)&&(Q.isShadow=!0),O.childNodes.push(Q))}}if(e.parentNode&&Zr(e.parentNode)&&Qr(e.parentNode)&&(O.isShadow=!0),O.type===Ue.Element&&O.tagName==="iframe"&&!O.needBlock&&uy(e,()=>{const M=Su(e);if(M&&S){const B=xr(M,{doc:M,mirror:t,blockClass:i,blockSelector:o,unblockSelector:a,maskAllText:l,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:m,skipChild:!1,inlineStylesheet:h,maskInputOptions:g,maskAttributeFn:p,maskTextFn:N,maskInputFn:y,slimDOMOptions:E,dataURLOptions:R,inlineImages:A,recordCanvas:_,preserveWhiteSpace:H,onSerialize:C,onIframeLoad:S,iframeLoadTimeout:I,onStylesheetLoad:U,stylesheetLoadTimeout:T,keepIframeSrcFn:w,ignoreCSSAttributes:D});B&&S(e,B)}},I),O.type===Ue.Element&&O.tagName==="img"&&!e.complete&&O.needBlock){const M=e,B=()=>{if(M.isConnected&&!M.complete&&F)try{const W=M.getBoundingClientRect();W.width>0&&W.height>0&&F(M,O,W)}catch{}M.removeEventListener("load",B)};M.isConnected&&M.addEventListener("load",B)}return O.type===Ue.Element&&O.tagName==="link"&&typeof O.attributes.rel=="string"&&(O.attributes.rel==="stylesheet"||O.attributes.rel==="preload"&&typeof O.attributes.href=="string"&&yu(O.attributes.href)==="css")&&my(e,()=>{if(U){const M=xr(e,{doc:r,mirror:t,blockClass:i,blockSelector:o,unblockSelector:a,maskAllText:l,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:m,skipChild:!1,inlineStylesheet:h,maskInputOptions:g,maskAttributeFn:p,maskTextFn:N,maskInputFn:y,slimDOMOptions:E,dataURLOptions:R,inlineImages:A,recordCanvas:_,preserveWhiteSpace:H,onSerialize:C,onIframeLoad:S,iframeLoadTimeout:I,onStylesheetLoad:U,stylesheetLoadTimeout:T,keepIframeSrcFn:w,ignoreCSSAttributes:D});M&&U(e,M)}},T),O.type===Ue.Element&&delete O.needBlock,O}function Ny(e,s){const{mirror:r=new bu,blockClass:t="rr-block",blockSelector:i=null,unblockSelector:o=null,maskAllText:a=!1,maskTextClass:l="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:d=null,inlineStylesheet:m=!0,inlineImages:f=!1,recordCanvas:h=!1,maskAllInputs:g=!1,maskAttributeFn:p,maskTextFn:N,maskInputFn:y,slimDOM:E=!1,dataURLOptions:R,preserveWhiteSpace:A,onSerialize:_,onIframeLoad:C,iframeLoadTimeout:S,onBlockedImageLoad:I,onStylesheetLoad:F,stylesheetLoadTimeout:U,keepIframeSrcFn:T=()=>!1,ignoreCSSAttributes:w=new Set([])}=s||{};return xr(e,{doc:e,mirror:r,blockClass:t,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:m,maskInputOptions:g===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:g===!1?{}:g,maskAttributeFn:p,maskTextFn:N,maskInputFn:y,slimDOMOptions:E===!0||E==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:E==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:E===!1?{}:E,dataURLOptions:R,inlineImages:f,recordCanvas:h,preserveWhiteSpace:A,onSerialize:_,onIframeLoad:C,iframeLoadTimeout:S,onBlockedImageLoad:I,onStylesheetLoad:F,stylesheetLoadTimeout:U,keepIframeSrcFn:T,newlyAddedElement:!1,ignoreCSSAttributes:w})}function He(e,s,r=document){const t={capture:!0,passive:!0};return r.addEventListener(e,s,t),()=>r.removeEventListener(e,s,t)}const yr=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Qa={map:{},getId(){return console.error(yr),-1},getNode(){return console.error(yr),null},removeNodeFromMap(){console.error(yr)},has(){return console.error(yr),!1},reset(){console.error(yr)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Qa=new Proxy(Qa,{get(e,s,r){return s==="map"&&console.error(yr),Reflect.get(e,s,r)}}));function at(e,s,r={}){let t=null,i=0;return function(...o){const a=Date.now();!i&&r.leading===!1&&(i=a);const l=s-(a-i),c=this;l<=0||l>s?(t&&(xy(t),t=null),i=a,e.apply(c,o)):!t&&r.trailing!==!1&&(t=Cn(()=>{i=r.leading===!1?0:Date.now(),t=null,e.apply(c,o)},l))}}function Cu(e,s,r,t,i=window){const o=i.Object.getOwnPropertyDescriptor(e,s);return i.Object.defineProperty(e,s,t?r:{set(a){Cn(()=>{r.set.call(this,a)},0),o&&o.set&&o.set.call(this,a)}}),()=>Cu(e,s,o||{},!0)}function xo(e,s,r){try{if(!(s in e))return()=>{};const t=e[s],i=r(t);return typeof i=="function"&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:t}})),e[s]=i,()=>{e[s]=t}}catch{return()=>{}}}let cn=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(cn=()=>new Date().getTime());function Tu(e){var r,t,i,o,a,l;const s=e.document;return{left:s.scrollingElement?s.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:(s==null?void 0:s.documentElement.scrollLeft)||((t=(r=s==null?void 0:s.body)==null?void 0:r.parentElement)==null?void 0:t.scrollLeft)||((i=s==null?void 0:s.body)==null?void 0:i.scrollLeft)||0,top:s.scrollingElement?s.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:(s==null?void 0:s.documentElement.scrollTop)||((a=(o=s==null?void 0:s.body)==null?void 0:o.parentElement)==null?void 0:a.scrollTop)||((l=s==null?void 0:s.body)==null?void 0:l.scrollTop)||0}}function ku(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function _u(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Du(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function es(e,s,r,t,i){if(!e)return!1;const o=Du(e);if(!o)return!1;const a=vr(s,r);if(!i){const u=t&&o.matches(t);return a(o)&&!u}const l=Qs(o,a);let c=-1;return l<0?!1:(t&&(c=Qs(o,vr(null,t))),l>-1&&c<0?!0:l<c)}function by(e,s){return s.getId(e)!==-1}function Xn(e,s){return s.getId(e)===ot}function wu(e,s){if(Zr(e))return!1;const r=s.getId(e);return s.has(r)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?wu(e.parentNode,s):!0:!0}function Vi(e){return!!e.changedTouches}function yy(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...s)=>{let r=s[0];if(!(0 in s))throw new TypeError("1 argument is required");do if(this===r)return!0;while(r=r&&r.parentNode);return!1})}function Uu(e,s){return!!(e.nodeName==="IFRAME"&&s.getMeta(e))}function Vu(e,s){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&s.getMeta(e))}function Ii(e){return!!(e!=null&&e.shadowRoot)}class Ey{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(s){return this.styleIDMap.get(s)??-1}has(s){return this.styleIDMap.has(s)}add(s,r){if(this.has(s))return this.getId(s);let t;return r===void 0?t=this.id++:t=r,this.styleIDMap.set(s,t),this.idStyleMap.set(t,s),t}getStyle(s){return this.idStyleMap.get(s)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Iu(e){var r,t;let s=null;return((t=(r=e.getRootNode)==null?void 0:r.call(e))==null?void 0:t.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(s=e.getRootNode().host),s}function jy(e){let s=e,r;for(;r=Iu(s);)s=r;return s}function Sy(e){const s=e.ownerDocument;if(!s)return!1;const r=jy(e);return s.contains(r)}function Ru(e){const s=e.ownerDocument;return s?s.contains(e)||Sy(e):!1}const el={};function Co(e){const s=el[e];if(s)return s;const r=window.document;let t=window[e];if(r&&typeof r.createElement=="function")try{const i=r.createElement("iframe");i.hidden=!0,r.head.appendChild(i);const o=i.contentWindow;o&&o[e]&&(t=o[e]),r.head.removeChild(i)}catch{}return el[e]=t.bind(window)}function vy(...e){return Co("requestAnimationFrame")(...e)}function Cn(...e){return Co("setTimeout")(...e)}function xy(...e){return Co("clearTimeout")(...e)}var oe=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(oe||{}),ne=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(ne||{}),qe=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(qe||{}),Ts=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(Ts||{}),Er=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(Er||{});function To(e){try{return e.contentDocument}catch{}}function Cy(e){try{return e.contentWindow}catch{}}function sl(e){return"__ln"in e}class Ty{constructor(){this.length=0,this.head=null,this.tail=null}get(s){if(s>=this.length)throw new Error("Position outside of list range");let r=this.head;for(let t=0;t<s;t++)r=(r==null?void 0:r.next)||null;return r}addNode(s){const r={value:s,previous:null,next:null};if(s.__ln=r,s.previousSibling&&sl(s.previousSibling)){const t=s.previousSibling.__ln.next;r.next=t,r.previous=s.previousSibling.__ln,s.previousSibling.__ln.next=r,t&&(t.previous=r)}else if(s.nextSibling&&sl(s.nextSibling)&&s.nextSibling.__ln.previous){const t=s.nextSibling.__ln.previous;r.previous=t,r.next=s.nextSibling.__ln,s.nextSibling.__ln.previous=r,t&&(t.next=r)}else this.head&&(this.head.previous=r),r.next=this.head,this.head=r;r.next===null&&(this.tail=r),this.length++}removeNode(s){const r=s.__ln;this.head&&(r.previous?(r.previous.next=r.next,r.next?r.next.previous=r.previous:this.tail=r.previous):(this.head=r.next,this.head?this.head.previous=null:this.tail=null),s.__ln&&delete s.__ln,this.length--)}}const rl=(e,s)=>`${e}@${s}`;class ky{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=s=>{s.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const s=[],r=new Set,t=new Ty,i=c=>{let u=c,d=ot;for(;d===ot;)u=u&&u.nextSibling,d=u&&this.mirror.getId(u);return d},o=c=>{if(!c.parentNode||!Ru(c))return;const u=Zr(c.parentNode)?this.mirror.getId(Iu(c)):this.mirror.getId(c.parentNode),d=i(c);if(u===-1||d===-1)return t.addNode(c);const m=xr(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:f=>{Uu(f,this.mirror)&&!es(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(f),Vu(f,this.mirror)&&this.stylesheetManager.trackLinkElement(f),Ii(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(f,h)=>{es(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(f,h),f.contentWindow&&this.canvasManager.addWindow(f.contentWindow),this.shadowDomManager.observeAttachShadow(f))},onStylesheetLoad:(f,h)=>{this.stylesheetManager.attachLinkElement(f,h)},onBlockedImageLoad:(f,h,{width:g,height:p})=>{this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:h.id,attributes:{style:{width:`${g}px`,height:`${p}px`}}}]})},ignoreCSSAttributes:this.ignoreCSSAttributes});m&&(s.push({parentId:u,nextId:d,node:m}),r.add(m.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const c of this.movedSet)tl(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||o(c);for(const c of this.addedSet)!nl(this.droppedSet,c)&&!tl(this.removes,c,this.mirror)||nl(this.movedSet,c)?o(c):this.droppedSet.add(c);let a=null;for(;t.length;){let c=null;if(a){const u=this.mirror.getId(a.value.parentNode),d=i(a.value);u!==-1&&d!==-1&&(c=a)}if(!c){let u=t.tail;for(;u;){const d=u;if(u=u.previous,d){const m=this.mirror.getId(d.value.parentNode);if(i(d.value)===-1)continue;if(m!==-1){c=d;break}else{const h=d.value;if(h.parentNode&&h.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const g=h.parentNode.host;if(this.mirror.getId(g)!==-1){c=d;break}}}}}}if(!c){for(;t.head;)t.removeNode(t.head.value);break}a=c.previous,t.removeNode(c.value),o(c.value)}const l={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!r.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{const{attributes:u}=c;if(typeof u.style=="string"){const d=JSON.stringify(c.styleDiff),m=JSON.stringify(c._unchangedStyles);d.length<u.style.length&&(d+m).split("var(").length===u.style.split("var(").length&&(u.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:u}}).filter(c=>!r.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:s};!l.texts.length&&!l.attributes.length&&!l.removes.length&&!l.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(l))},this.processMutation=s=>{if(!Xn(s.target,this.mirror))switch(s.type){case"characterData":{const r=s.target.textContent;!es(s.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&r!==s.oldValue&&this.texts.push({value:Rr(s.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&r?this.maskTextFn?this.maskTextFn(r,Du(s.target)):r.replace(/[\S]/g,"*"):r,node:s.target});break}case"attributes":{const r=s.target;let t=s.attributeName,i=s.target.getAttribute(t);if(t==="value"){const a=So(r),l=r.tagName;i=an(r,l,a);const c=vn({maskInputOptions:this.maskInputOptions,tagName:l,type:a}),u=Rr(s.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,c);i=it({isMasked:u,element:r,value:i,maskInputFn:this.maskInputFn})}if(es(s.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||i===s.oldValue)return;let o=this.attributeMap.get(s.target);if(r.tagName==="IFRAME"&&t==="src"&&!this.keepIframeSrcFn(i))if(!To(r))t="rr_src";else return;if(o||(o={node:s.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o),this.attributeMap.set(s.target,o)),t==="type"&&r.tagName==="INPUT"&&(s.oldValue||"").toLowerCase()==="password"&&r.setAttribute("data-rr-is-password","true"),!xu(r.tagName,t)&&(o.attributes[t]=vu(this.doc,Ir(r.tagName),Ir(t),i,r,this.maskAttributeFn),t==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const a=this.unattachedDoc.createElement("span");s.oldValue&&a.setAttribute("style",s.oldValue);for(const l of Array.from(r.style)){const c=r.style.getPropertyValue(l),u=r.style.getPropertyPriority(l);c!==a.style.getPropertyValue(l)||u!==a.style.getPropertyPriority(l)?u===""?o.styleDiff[l]=c:o.styleDiff[l]=[c,u]:o._unchangedStyles[l]=[c,u]}for(const l of Array.from(a.style))r.style.getPropertyValue(l)===""&&(o.styleDiff[l]=!1)}break}case"childList":{if(es(s.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;s.addedNodes.forEach(r=>this.genAdds(r,s.target)),s.removedNodes.forEach(r=>{const t=this.mirror.getId(r),i=Zr(s.target)?this.mirror.getId(s.target.host):this.mirror.getId(s.target);es(s.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Xn(r,this.mirror)||!by(r,this.mirror)||(this.addedSet.has(r)?(Ri(this.addedSet,r),this.droppedSet.add(r)):this.addedSet.has(s.target)&&t===-1||wu(s.target,this.mirror)||(this.movedSet.has(r)&&this.movedMap[rl(t,i)]?Ri(this.movedSet,r):this.removes.push({parentId:i,id:t,isShadow:Zr(s.target)&&Qr(s.target)?!0:void 0})),this.mapRemoves.push(r))});break}}},this.genAdds=(s,r)=>{if(!this.processedNodeManager.inOtherBuffer(s,this)&&!(this.addedSet.has(s)||this.movedSet.has(s))){if(this.mirror.hasNode(s)){if(Xn(s,this.mirror))return;this.movedSet.add(s);let t=null;r&&this.mirror.hasNode(r)&&(t=this.mirror.getId(r)),t&&t!==-1&&(this.movedMap[rl(this.mirror.getId(s),t)]=!0)}else this.addedSet.add(s),this.droppedSet.delete(s);es(s,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(s.childNodes&&s.childNodes.forEach(t=>this.genAdds(t)),Ii(s)&&s.shadowRoot.childNodes.forEach(t=>{this.processedNodeManager.add(t,this),this.genAdds(t,s)}))}}}init(s){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager","ignoreCSSAttributes"].forEach(r=>{this[r]=s[r]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Ri(e,s){var r;e.delete(s),(r=s.childNodes)==null||r.forEach(t=>Ri(e,t))}function tl(e,s,r){return e.length===0?!1:_y(e,s,r)}function _y(e,s,r){let t=s.parentNode;for(;t;){const i=r.getId(t);if(e.some(o=>o.id===i))return!0;t=t.parentNode}return!1}function nl(e,s){return e.size===0?!1:Mu(e,s)}function Mu(e,s){const{parentNode:r}=s;return r?e.has(r)?!0:Mu(e,r):!1}let et;function Dy(e){et=e}function wy(){et=void 0}const fe=e=>et?(...r)=>{try{return e(...r)}catch(t){if(et&&et(t)===!0)return()=>{};throw t}}:e,Cr=[];function vt(e){try{if("composedPath"in e){const s=e.composedPath();if(s.length)return s[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function Pu(e,s){var a,l;const r=new ky;Cr.push(r),r.init(e);let t=window.MutationObserver||window.__rrMutationObserver;const i=(l=(a=window==null?void 0:window.Zone)==null?void 0:a.__symbol__)==null?void 0:l.call(a,"MutationObserver");i&&window[i]&&(t=window[i]);const o=new t(fe(c=>{e.onMutation&&e.onMutation(c)===!1||r.processMutations.bind(r)(c)}));return o.observe(s,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),o}function Uy({mousemoveCb:e,sampling:s,doc:r,mirror:t}){if(s.mousemove===!1)return()=>{};const i=typeof s.mousemove=="number"?s.mousemove:50,o=typeof s.mousemoveCallback=="number"?s.mousemoveCallback:500;let a=[],l;const c=at(fe(m=>{const f=Date.now()-l;e(a.map(h=>(h.timeOffset-=f,h)),m),a=[],l=null}),o),u=fe(at(fe(m=>{const f=vt(m),{clientX:h,clientY:g}=Vi(m)?m.changedTouches[0]:m;l||(l=cn()),a.push({x:h,y:g,id:t.getId(f),timeOffset:cn()-l}),c(typeof DragEvent<"u"&&m instanceof DragEvent?ne.Drag:m instanceof MouseEvent?ne.MouseMove:ne.TouchMove)}),i,{trailing:!1})),d=[He("mousemove",u,r),He("touchmove",u,r),He("drag",u,r)];return fe(()=>{d.forEach(m=>m())})}function Vy({mouseInteractionCb:e,doc:s,mirror:r,blockClass:t,blockSelector:i,unblockSelector:o,sampling:a}){if(a.mouseInteraction===!1)return()=>{};const l=a.mouseInteraction===!0||a.mouseInteraction===void 0?{}:a.mouseInteraction,c=[];let u=null;const d=m=>f=>{const h=vt(f);if(es(h,t,i,o,!0))return;let g=null,p=m;if("pointerType"in f){switch(f.pointerType){case"mouse":g=Ts.Mouse;break;case"touch":g=Ts.Touch;break;case"pen":g=Ts.Pen;break}g===Ts.Touch?qe[m]===qe.MouseDown?p="TouchStart":qe[m]===qe.MouseUp&&(p="TouchEnd"):Ts.Pen}else Vi(f)&&(g=Ts.Touch);g!==null?(u=g,(p.startsWith("Touch")&&g===Ts.Touch||p.startsWith("Mouse")&&g===Ts.Mouse)&&(g=null)):qe[m]===qe.Click&&(g=u,u=null);const N=Vi(f)?f.changedTouches[0]:f;if(!N)return;const y=r.getId(h),{clientX:E,clientY:R}=N;fe(e)({type:qe[p],id:y,x:E,y:R,...g!==null&&{pointerType:g}})};return Object.keys(qe).filter(m=>Number.isNaN(Number(m))&&!m.endsWith("_Departed")&&l[m]!==!1).forEach(m=>{let f=Ir(m);const h=d(m);if(window.PointerEvent)switch(qe[m]){case qe.MouseDown:case qe.MouseUp:f=f.replace("mouse","pointer");break;case qe.TouchStart:case qe.TouchEnd:return}c.push(He(f,h,s))}),fe(()=>{c.forEach(m=>m())})}function Au({scrollCb:e,doc:s,mirror:r,blockClass:t,blockSelector:i,unblockSelector:o,sampling:a}){const l=fe(at(fe(c=>{const u=vt(c);if(!u||es(u,t,i,o,!0))return;const d=r.getId(u);if(u===s&&s.defaultView){const m=Tu(s.defaultView);e({id:d,x:m.left,y:m.top})}else e({id:d,x:u.scrollLeft,y:u.scrollTop})}),a.scroll||100));return He("scroll",l,s)}function Iy({viewportResizeCb:e},{win:s}){let r=-1,t=-1;const i=fe(at(fe(()=>{const o=ku(),a=_u();(r!==o||t!==a)&&(e({width:Number(a),height:Number(o)}),r=o,t=a)}),200));return He("resize",i,s)}const Ry=["INPUT","TEXTAREA","SELECT"],il=new WeakMap;function My({inputCb:e,doc:s,mirror:r,blockClass:t,blockSelector:i,unblockSelector:o,ignoreClass:a,ignoreSelector:l,maskInputOptions:c,maskInputFn:u,sampling:d,userTriggeredOnInput:m,maskTextClass:f,unmaskTextClass:h,maskTextSelector:g,unmaskTextSelector:p}){function N(S){let I=vt(S);const F=S.isTrusted,U=I&&wi(I.tagName);if(U==="OPTION"&&(I=I.parentElement),!I||!U||Ry.indexOf(U)<0||es(I,t,i,o,!0))return;const T=I;if(T.classList.contains(a)||l&&T.matches(l))return;const w=So(I);let v=an(T,U,w),D=!1;const H=vn({maskInputOptions:c,tagName:U,type:w}),z=Rr(I,f,g,h,p,H);(w==="radio"||w==="checkbox")&&(D=I.checked),v=it({isMasked:z,element:I,value:v,maskInputFn:u}),y(I,m?{text:v,isChecked:D,userTriggered:F}:{text:v,isChecked:D});const $=I.name;w==="radio"&&$&&D&&s.querySelectorAll(`input[type="radio"][name="${$}"]`).forEach(O=>{if(O!==I){const V=it({isMasked:z,element:O,value:an(O,U,w),maskInputFn:u});y(O,m?{text:V,isChecked:!D,userTriggered:!1}:{text:V,isChecked:!D})}})}function y(S,I){const F=il.get(S);if(!F||F.text!==I.text||F.isChecked!==I.isChecked){il.set(S,I);const U=r.getId(S);fe(e)({...I,id:U})}}const R=(d.input==="last"?["change"]:["input","change"]).map(S=>He(S,fe(N),s)),A=s.defaultView;if(!A)return()=>{R.forEach(S=>S())};const _=A.Object.getOwnPropertyDescriptor(A.HTMLInputElement.prototype,"value"),C=[[A.HTMLInputElement.prototype,"value"],[A.HTMLInputElement.prototype,"checked"],[A.HTMLSelectElement.prototype,"value"],[A.HTMLTextAreaElement.prototype,"value"],[A.HTMLSelectElement.prototype,"selectedIndex"],[A.HTMLOptionElement.prototype,"selected"]];return _&&_.set&&R.push(...C.map(S=>Cu(S[0],S[1],{set(){fe(N)({target:this,isTrusted:!1})}},!1,A))),fe(()=>{R.forEach(S=>S())})}function un(e){const s=[];function r(t,i){if(Mt("CSSGroupingRule")&&t.parentRule instanceof CSSGroupingRule||Mt("CSSMediaRule")&&t.parentRule instanceof CSSMediaRule||Mt("CSSSupportsRule")&&t.parentRule instanceof CSSSupportsRule||Mt("CSSConditionRule")&&t.parentRule instanceof CSSConditionRule){const a=Array.from(t.parentRule.cssRules).indexOf(t);i.unshift(a)}else if(t.parentStyleSheet){const a=Array.from(t.parentStyleSheet.cssRules).indexOf(t);i.unshift(a)}return i}return r(e,s)}function As(e,s,r){let t,i;return e?(e.ownerNode?t=s.getId(e.ownerNode):i=r.getId(e),{styleId:i,id:t}):{}}function Py({styleSheetRuleCb:e,mirror:s,stylesheetManager:r},{win:t}){if(!t.CSSStyleSheet||!t.CSSStyleSheet.prototype)return()=>{};const i=t.CSSStyleSheet.prototype.insertRule;t.CSSStyleSheet.prototype.insertRule=new Proxy(i,{apply:fe((d,m,f)=>{const[h,g]=f,{id:p,styleId:N}=As(m,s,r.styleMirror);return(p&&p!==-1||N&&N!==-1)&&e({id:p,styleId:N,adds:[{rule:h,index:g}]}),d.apply(m,f)})});const o=t.CSSStyleSheet.prototype.deleteRule;t.CSSStyleSheet.prototype.deleteRule=new Proxy(o,{apply:fe((d,m,f)=>{const[h]=f,{id:g,styleId:p}=As(m,s,r.styleMirror);return(g&&g!==-1||p&&p!==-1)&&e({id:g,styleId:p,removes:[{index:h}]}),d.apply(m,f)})});let a;t.CSSStyleSheet.prototype.replace&&(a=t.CSSStyleSheet.prototype.replace,t.CSSStyleSheet.prototype.replace=new Proxy(a,{apply:fe((d,m,f)=>{const[h]=f,{id:g,styleId:p}=As(m,s,r.styleMirror);return(g&&g!==-1||p&&p!==-1)&&e({id:g,styleId:p,replace:h}),d.apply(m,f)})}));let l;t.CSSStyleSheet.prototype.replaceSync&&(l=t.CSSStyleSheet.prototype.replaceSync,t.CSSStyleSheet.prototype.replaceSync=new Proxy(l,{apply:fe((d,m,f)=>{const[h]=f,{id:g,styleId:p}=As(m,s,r.styleMirror);return(g&&g!==-1||p&&p!==-1)&&e({id:g,styleId:p,replaceSync:h}),d.apply(m,f)})}));const c={};Pt("CSSGroupingRule")?c.CSSGroupingRule=t.CSSGroupingRule:(Pt("CSSMediaRule")&&(c.CSSMediaRule=t.CSSMediaRule),Pt("CSSConditionRule")&&(c.CSSConditionRule=t.CSSConditionRule),Pt("CSSSupportsRule")&&(c.CSSSupportsRule=t.CSSSupportsRule));const u={};return Object.entries(c).forEach(([d,m])=>{u[d]={insertRule:m.prototype.insertRule,deleteRule:m.prototype.deleteRule},m.prototype.insertRule=new Proxy(u[d].insertRule,{apply:fe((f,h,g)=>{const[p,N]=g,{id:y,styleId:E}=As(h.parentStyleSheet,s,r.styleMirror);return(y&&y!==-1||E&&E!==-1)&&e({id:y,styleId:E,adds:[{rule:p,index:[...un(h),N||0]}]}),f.apply(h,g)})}),m.prototype.deleteRule=new Proxy(u[d].deleteRule,{apply:fe((f,h,g)=>{const[p]=g,{id:N,styleId:y}=As(h.parentStyleSheet,s,r.styleMirror);return(N&&N!==-1||y&&y!==-1)&&e({id:N,styleId:y,removes:[{index:[...un(h),p]}]}),f.apply(h,g)})})}),fe(()=>{t.CSSStyleSheet.prototype.insertRule=i,t.CSSStyleSheet.prototype.deleteRule=o,a&&(t.CSSStyleSheet.prototype.replace=a),l&&(t.CSSStyleSheet.prototype.replaceSync=l),Object.entries(c).forEach(([d,m])=>{m.prototype.insertRule=u[d].insertRule,m.prototype.deleteRule=u[d].deleteRule})})}function Ou({mirror:e,stylesheetManager:s},r){var a,l,c;let t=null;r.nodeName==="#document"?t=e.getId(r):t=e.getId(r.host);const i=r.nodeName==="#document"?(a=r.defaultView)==null?void 0:a.Document:(c=(l=r.ownerDocument)==null?void 0:l.defaultView)==null?void 0:c.ShadowRoot,o=i!=null&&i.prototype?Object.getOwnPropertyDescriptor(i==null?void 0:i.prototype,"adoptedStyleSheets"):void 0;return t===null||t===-1||!i||!o?()=>{}:(Object.defineProperty(r,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get(){var u;return(u=o.get)==null?void 0:u.call(this)},set(u){var m;const d=(m=o.set)==null?void 0:m.call(this,u);if(t!==null&&t!==-1)try{s.adoptStyleSheets(u,t)}catch{}return d}}),fe(()=>{Object.defineProperty(r,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get:o.get,set:o.set})}))}function Ay({styleDeclarationCb:e,mirror:s,ignoreCSSAttributes:r,stylesheetManager:t},{win:i}){const o=i.CSSStyleDeclaration.prototype.setProperty;i.CSSStyleDeclaration.prototype.setProperty=new Proxy(o,{apply:fe((l,c,u)=>{var p;const[d,m,f]=u;if(r.has(d))return o.apply(c,[d,m,f]);const{id:h,styleId:g}=As((p=c.parentRule)==null?void 0:p.parentStyleSheet,s,t.styleMirror);return(h&&h!==-1||g&&g!==-1)&&e({id:h,styleId:g,set:{property:d,value:m,priority:f},index:un(c.parentRule)}),l.apply(c,u)})});const a=i.CSSStyleDeclaration.prototype.removeProperty;return i.CSSStyleDeclaration.prototype.removeProperty=new Proxy(a,{apply:fe((l,c,u)=>{var h;const[d]=u;if(r.has(d))return a.apply(c,[d]);const{id:m,styleId:f}=As((h=c.parentRule)==null?void 0:h.parentStyleSheet,s,t.styleMirror);return(m&&m!==-1||f&&f!==-1)&&e({id:m,styleId:f,remove:{property:d},index:un(c.parentRule)}),l.apply(c,u)})}),fe(()=>{i.CSSStyleDeclaration.prototype.setProperty=o,i.CSSStyleDeclaration.prototype.removeProperty=a})}function Oy({mediaInteractionCb:e,blockClass:s,blockSelector:r,unblockSelector:t,mirror:i,sampling:o,doc:a}){const l=fe(u=>at(fe(d=>{const m=vt(d);if(!m||es(m,s,r,t,!0))return;const{currentTime:f,volume:h,muted:g,playbackRate:p}=m;e({type:u,id:i.getId(m),currentTime:f,volume:h,muted:g,playbackRate:p})}),o.media||500)),c=[He("play",l(Er.Play),a),He("pause",l(Er.Pause),a),He("seeked",l(Er.Seeked),a),He("volumechange",l(Er.VolumeChange),a),He("ratechange",l(Er.RateChange),a)];return fe(()=>{c.forEach(u=>u())})}function Ly({fontCb:e,doc:s}){const r=s.defaultView;if(!r)return()=>{};const t=[],i=new WeakMap,o=r.FontFace;r.FontFace=function(c,u,d){const m=new o(c,u,d);return i.set(m,{family:c,buffer:typeof u!="string",descriptors:d,fontSource:typeof u=="string"?u:JSON.stringify(Array.from(new Uint8Array(u)))}),m};const a=xo(s.fonts,"add",function(l){return function(c){return Cn(fe(()=>{const u=i.get(c);u&&(e(u),i.delete(c))}),0),l.apply(this,[c])}});return t.push(()=>{r.FontFace=o}),t.push(a),fe(()=>{t.forEach(l=>l())})}function Fy(e){const{doc:s,mirror:r,blockClass:t,blockSelector:i,unblockSelector:o,selectionCb:a}=e;let l=!0;const c=fe(()=>{const u=s.getSelection();if(!u||l&&(u!=null&&u.isCollapsed))return;l=u.isCollapsed||!1;const d=[],m=u.rangeCount||0;for(let f=0;f<m;f++){const h=u.getRangeAt(f),{startContainer:g,startOffset:p,endContainer:N,endOffset:y}=h;es(g,t,i,o,!0)||es(N,t,i,o,!0)||d.push({start:r.getId(g),startOffset:p,end:r.getId(N),endOffset:y})}a({ranges:d})});return c(),He("selectionchange",c)}function $y({doc:e,customElementCb:s}){const r=e.defaultView;return!r||!r.customElements?()=>{}:xo(r.customElements,"define",function(i){return function(o,a,l){try{s({define:{name:o}})}catch{}return i.apply(this,[o,a,l])}})}function By(e,s={}){const r=e.doc.defaultView;if(!r)return()=>{};let t;e.recordDOM&&(t=Pu(e,e.doc));const i=Uy(e),o=Vy(e),a=Au(e),l=Iy(e,{win:r}),c=My(e),u=Oy(e);let d=()=>{},m=()=>{},f=()=>{},h=()=>{};e.recordDOM&&(d=Py(e,{win:r}),m=Ou(e,e.doc),f=Ay(e,{win:r}),e.collectFonts&&(h=Ly(e)));const g=Fy(e),p=$y(e),N=[];for(const y of e.plugins)N.push(y.observer(y.callback,r,y.options));return fe(()=>{Cr.forEach(y=>y.reset()),t==null||t.disconnect(),i(),o(),a(),l(),c(),u(),d(),m(),f(),h(),g(),p(),N.forEach(y=>y())})}function Mt(e){return typeof window[e]<"u"}function Pt(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class Mi{constructor(s){this.generateIdFn=s,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(s,r,t,i){const o=t||this.getIdToRemoteIdMap(s),a=i||this.getRemoteIdToIdMap(s);let l=o.get(r);return l||(l=this.generateIdFn(),o.set(r,l),a.set(l,r)),l}getIds(s,r){const t=this.getIdToRemoteIdMap(s),i=this.getRemoteIdToIdMap(s);return r.map(o=>this.getId(s,o,t,i))}getRemoteId(s,r,t){const i=t||this.getRemoteIdToIdMap(s);if(typeof r!="number")return r;const o=i.get(r);return o||-1}getRemoteIds(s,r){const t=this.getRemoteIdToIdMap(s);return r.map(i=>this.getRemoteId(s,i,t))}reset(s){if(!s){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(s),this.iframeRemoteIdToIdMap.delete(s)}getIdToRemoteIdMap(s){let r=this.iframeIdToRemoteIdMap.get(s);return r||(r=new Map,this.iframeIdToRemoteIdMap.set(s,r)),r}getRemoteIdToIdMap(s){let r=this.iframeRemoteIdToIdMap.get(s);return r||(r=new Map,this.iframeRemoteIdToIdMap.set(s,r)),r}}class qy{constructor(){this.crossOriginIframeMirror=new Mi(vo),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class Hy{constructor(s){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Mi(vo),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=s.mutationCb,this.wrappedEmit=s.wrappedEmit,this.stylesheetManager=s.stylesheetManager,this.recordCrossOriginIframes=s.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Mi(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=s.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(s){this.iframes.set(s,!0),s.contentWindow&&this.crossOriginIframeMap.set(s.contentWindow,s)}addLoadListener(s){this.loadListener=s}attachIframe(s,r){var i,o;this.mutationCb({adds:[{parentId:this.mirror.getId(s),nextId:null,node:r}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&((i=s.contentWindow)==null||i.addEventListener("message",this.handleMessage.bind(this))),(o=this.loadListener)==null||o.call(this,s);const t=To(s);t&&t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t))}handleMessage(s){const r=s;if(r.data.type!=="rrweb"||r.origin!==r.data.origin||!s.source)return;const i=this.crossOriginIframeMap.get(s.source);if(!i)return;const o=this.transformCrossOriginEvent(i,r.data.event);o&&this.wrappedEmit(o,r.data.isCheckout)}transformCrossOriginEvent(s,r){var t;switch(r.type){case oe.FullSnapshot:{this.crossOriginIframeMirror.reset(s),this.crossOriginIframeStyleMirror.reset(s),this.replaceIdOnNode(r.data.node,s);const i=r.data.node.id;return this.crossOriginIframeRootIdMap.set(s,i),this.patchRootIdOnNode(r.data.node,i),{timestamp:r.timestamp,type:oe.IncrementalSnapshot,data:{source:ne.Mutation,adds:[{parentId:this.mirror.getId(s),nextId:null,node:r.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case oe.Meta:case oe.Load:case oe.DomContentLoaded:return!1;case oe.Plugin:return r;case oe.Custom:return this.replaceIds(r.data.payload,s,["id","parentId","previousId","nextId"]),r;case oe.IncrementalSnapshot:switch(r.data.source){case ne.Mutation:return r.data.adds.forEach(i=>{this.replaceIds(i,s,["parentId","nextId","previousId"]),this.replaceIdOnNode(i.node,s);const o=this.crossOriginIframeRootIdMap.get(s);o&&this.patchRootIdOnNode(i.node,o)}),r.data.removes.forEach(i=>{this.replaceIds(i,s,["parentId","id"])}),r.data.attributes.forEach(i=>{this.replaceIds(i,s,["id"])}),r.data.texts.forEach(i=>{this.replaceIds(i,s,["id"])}),r;case ne.Drag:case ne.TouchMove:case ne.MouseMove:return r.data.positions.forEach(i=>{this.replaceIds(i,s,["id"])}),r;case ne.ViewportResize:return!1;case ne.MediaInteraction:case ne.MouseInteraction:case ne.Scroll:case ne.CanvasMutation:case ne.Input:return this.replaceIds(r.data,s,["id"]),r;case ne.StyleSheetRule:case ne.StyleDeclaration:return this.replaceIds(r.data,s,["id"]),this.replaceStyleIds(r.data,s,["styleId"]),r;case ne.Font:return r;case ne.Selection:return r.data.ranges.forEach(i=>{this.replaceIds(i,s,["start","end"])}),r;case ne.AdoptedStyleSheet:return this.replaceIds(r.data,s,["id"]),this.replaceStyleIds(r.data,s,["styleIds"]),(t=r.data.styles)==null||t.forEach(i=>{this.replaceStyleIds(i,s,["styleId"])}),r}}return!1}replace(s,r,t,i){for(const o of i)!Array.isArray(r[o])&&typeof r[o]!="number"||(Array.isArray(r[o])?r[o]=s.getIds(t,r[o]):r[o]=s.getId(t,r[o]));return r}replaceIds(s,r,t){return this.replace(this.crossOriginIframeMirror,s,r,t)}replaceStyleIds(s,r,t){return this.replace(this.crossOriginIframeStyleMirror,s,r,t)}replaceIdOnNode(s,r){this.replaceIds(s,r,["id","rootId"]),"childNodes"in s&&s.childNodes.forEach(t=>{this.replaceIdOnNode(t,r)})}patchRootIdOnNode(s,r){s.type!==Ue.Document&&!s.rootId&&(s.rootId=r),"childNodes"in s&&s.childNodes.forEach(t=>{this.patchRootIdOnNode(t,r)})}}class Wy{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class zy{constructor(s){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=s.mutationCb,this.scrollCb=s.scrollCb,this.bypassOptions=s.bypassOptions,this.mirror=s.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(s,r){if(!Qr(s)||this.shadowDoms.has(s))return;this.shadowDoms.add(s),this.bypassOptions.canvasManager.addShadowRoot(s);const t=Pu({...this.bypassOptions,doc:r,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},s);this.restoreHandlers.push(()=>t.disconnect()),this.restoreHandlers.push(Au({...this.bypassOptions,scrollCb:this.scrollCb,doc:s,mirror:this.mirror})),Cn(()=>{s.adoptedStyleSheets&&s.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(s.adoptedStyleSheets,this.mirror.getId(s.host)),this.restoreHandlers.push(Ou({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},s))},0)}observeAttachShadow(s){const r=To(s),t=Cy(s);!r||!t||this.patchAttachShadow(t.Element,r)}patchAttachShadow(s,r){const t=this;this.restoreHandlers.push(xo(s.prototype,"attachShadow",function(i){return function(o){const a=i.call(this,o);return this.shadowRoot&&Ru(this)&&t.addShadowRoot(this.shadowRoot,r),a}}))}reset(){this.restoreHandlers.forEach(s=>{try{s()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}var ol="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Yy=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var At=0;At<ol.length;At++)Yy[ol.charCodeAt(At)]=At;class al{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class Gy{constructor(s){this.trackedLinkElements=new WeakSet,this.styleMirror=new Ey,this.mutationCb=s.mutationCb,this.adoptedStyleSheetCb=s.adoptedStyleSheetCb}attachLinkElement(s,r){"_cssText"in r.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:r.id,attributes:r.attributes}]}),this.trackLinkElement(s)}trackLinkElement(s){this.trackedLinkElements.has(s)||(this.trackedLinkElements.add(s),this.trackStylesheetInLinkElement(s))}adoptStyleSheets(s,r){if(s.length===0)return;const t={id:r,styleIds:[]},i=[];for(const o of s){let a;this.styleMirror.has(o)?a=this.styleMirror.getId(o):(a=this.styleMirror.add(o),i.push({styleId:a,rules:Array.from(o.rules||CSSRule,(l,c)=>({rule:Nu(l),index:c}))})),t.styleIds.push(a)}i.length>0&&(t.styles=i),this.adoptedStyleSheetCb(t)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(s){}}class Jy{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(s,r){const t=this.nodeMap.get(s);return t&&Array.from(t).some(i=>i!==r)}add(s,r){this.active||(this.active=!0,vy(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(s,(this.nodeMap.get(s)||new Set).add(r))}destroy(){}}let Ce,mn;var Vl;try{if(Array.from([1],e=>e*2)[0]!==2){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=((Vl=e.contentWindow)==null?void 0:Vl.Array.from)||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}const fs=Yb();function ws(e={}){const{emit:s,checkoutEveryNms:r,checkoutEveryNth:t,blockClass:i="rr-block",blockSelector:o=null,unblockSelector:a=null,ignoreClass:l="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:d="rr-mask",unmaskTextClass:m=null,maskTextSelector:f=null,unmaskTextSelector:h=null,inlineStylesheet:g=!0,maskAllInputs:p,maskInputOptions:N,slimDOMOptions:y,maskAttributeFn:E,maskInputFn:R,maskTextFn:A,maxCanvasSize:_=null,packFn:C,sampling:S={},dataURLOptions:I={},mousemoveWait:F,recordDOM:U=!0,recordCanvas:T=!1,recordCrossOriginIframes:w=!1,recordAfter:v=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:D=!1,collectFonts:H=!1,inlineImages:z=!1,plugins:$,keepIframeSrcFn:O=()=>!1,ignoreCSSAttributes:V=new Set([]),errorHandler:M,onMutation:B,getCanvasManager:W}=e;Dy(M);const Q=w?window.parent===window:!0;let me=!1;if(!Q)try{window.parent.document&&(me=!1)}catch{me=!0}if(Q&&!s)throw new Error("emit function is required");if(!Q&&!me)return()=>{};F!==void 0&&S.mousemove===void 0&&(S.mousemove=F),fs.reset();const je=p===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:N!==void 0?N:{},ze=y===!0||y==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:y==="all",headMetaDescKeywords:y==="all"}:y||{};yy();let Me,Pe=0;const Ye=Y=>{for(const be of $||[])be.eventProcessor&&(Y=be.eventProcessor(Y));return C&&!me&&(Y=C(Y)),Y};Ce=(Y,be)=>{var _e;const J=Y;if(J.timestamp=cn(),(_e=Cr[0])!=null&&_e.isFrozen()&&J.type!==oe.FullSnapshot&&!(J.type===oe.IncrementalSnapshot&&J.data.source===ne.Mutation)&&Cr.forEach(Ve=>Ve.unfreeze()),Q)s==null||s(Ye(J),be);else if(me){const Ve={type:"rrweb",event:Ye(J),origin:window.location.origin,isCheckout:be};window.parent.postMessage(Ve,"*")}if(J.type===oe.FullSnapshot)Me=J,Pe=0;else if(J.type===oe.IncrementalSnapshot){if(J.data.source===ne.Mutation&&J.data.isAttachIframe)return;Pe++;const Ve=t&&Pe>=t,ie=r&&Me&&J.timestamp-Me.timestamp>r;(Ve||ie)&&ae(!0)}};const Fe=Y=>{Ce({type:oe.IncrementalSnapshot,data:{source:ne.Mutation,...Y}})},mr=Y=>Ce({type:oe.IncrementalSnapshot,data:{source:ne.Scroll,...Y}}),dr=Y=>Ce({type:oe.IncrementalSnapshot,data:{source:ne.CanvasMutation,...Y}}),Js=Y=>Ce({type:oe.IncrementalSnapshot,data:{source:ne.AdoptedStyleSheet,...Y}}),ts=new Gy({mutationCb:Fe,adoptedStyleSheetCb:Js}),$e=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new qy:new Hy({mirror:fs,mutationCb:Fe,stylesheetManager:ts,recordCrossOriginIframes:w,wrappedEmit:Ce});for(const Y of $||[])Y.getMirror&&Y.getMirror({nodeMirror:fs,crossOriginIframeMirror:$e.crossOriginIframeMirror,crossOriginIframeStyleMirror:$e.crossOriginIframeStyleMirror});const ns=new Jy,k=Xy(W,{mirror:fs,win:window,mutationCb:Y=>Ce({type:oe.IncrementalSnapshot,data:{source:ne.CanvasMutation,...Y}}),recordCanvas:T,blockClass:i,blockSelector:o,unblockSelector:a,maxCanvasSize:_,sampling:S.canvas,dataURLOptions:I,errorHandler:M}),K=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Wy:new zy({mutationCb:Fe,scrollCb:mr,bypassOptions:{onMutation:B,blockClass:i,blockSelector:o,unblockSelector:a,maskAllText:u,maskTextClass:d,unmaskTextClass:m,maskTextSelector:f,unmaskTextSelector:h,inlineStylesheet:g,maskInputOptions:je,dataURLOptions:I,maskAttributeFn:E,maskTextFn:A,maskInputFn:R,recordCanvas:T,inlineImages:z,sampling:S,slimDOMOptions:ze,iframeManager:$e,stylesheetManager:ts,canvasManager:k,keepIframeSrcFn:O,processedNodeManager:ns,ignoreCSSAttributes:V},mirror:fs}),ae=(Y=!1)=>{if(!U)return;Ce({type:oe.Meta,data:{href:window.location.href,width:_u(),height:ku()}},Y),ts.reset(),K.init(),Cr.forEach(J=>J.lock());const be=Ny(document,{mirror:fs,blockClass:i,blockSelector:o,unblockSelector:a,maskAllText:u,maskTextClass:d,unmaskTextClass:m,maskTextSelector:f,unmaskTextSelector:h,inlineStylesheet:g,maskAllInputs:je,maskAttributeFn:E,maskInputFn:R,maskTextFn:A,slimDOM:ze,dataURLOptions:I,recordCanvas:T,inlineImages:z,onSerialize:J=>{Uu(J,fs)&&$e.addIframe(J),Vu(J,fs)&&ts.trackLinkElement(J),Ii(J)&&K.addShadowRoot(J.shadowRoot,document)},onIframeLoad:(J,_e)=>{$e.attachIframe(J,_e),J.contentWindow&&k.addWindow(J.contentWindow),K.observeAttachShadow(J)},onStylesheetLoad:(J,_e)=>{ts.attachLinkElement(J,_e)},onBlockedImageLoad:(J,_e,{width:Ve,height:ie})=>{Fe({adds:[],removes:[],texts:[],attributes:[{id:_e.id,attributes:{style:{width:`${Ve}px`,height:`${ie}px`}}}]})},keepIframeSrcFn:O,ignoreCSSAttributes:V});if(!be)return console.warn("Failed to snapshot the document");Ce({type:oe.FullSnapshot,data:{node:be,initialOffset:Tu(window)}}),Cr.forEach(J=>J.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&ts.adoptStyleSheets(document.adoptedStyleSheets,fs.getId(document))};mn=ae;try{const Y=[],be=_e=>{var Ve;return fe(By)({onMutation:B,mutationCb:Fe,mousemoveCb:(ie,ds)=>Ce({type:oe.IncrementalSnapshot,data:{source:ds,positions:ie}}),mouseInteractionCb:ie=>Ce({type:oe.IncrementalSnapshot,data:{source:ne.MouseInteraction,...ie}}),scrollCb:mr,viewportResizeCb:ie=>Ce({type:oe.IncrementalSnapshot,data:{source:ne.ViewportResize,...ie}}),inputCb:ie=>Ce({type:oe.IncrementalSnapshot,data:{source:ne.Input,...ie}}),mediaInteractionCb:ie=>Ce({type:oe.IncrementalSnapshot,data:{source:ne.MediaInteraction,...ie}}),styleSheetRuleCb:ie=>Ce({type:oe.IncrementalSnapshot,data:{source:ne.StyleSheetRule,...ie}}),styleDeclarationCb:ie=>Ce({type:oe.IncrementalSnapshot,data:{source:ne.StyleDeclaration,...ie}}),canvasMutationCb:dr,fontCb:ie=>Ce({type:oe.IncrementalSnapshot,data:{source:ne.Font,...ie}}),selectionCb:ie=>{Ce({type:oe.IncrementalSnapshot,data:{source:ne.Selection,...ie}})},customElementCb:ie=>{Ce({type:oe.IncrementalSnapshot,data:{source:ne.CustomElement,...ie}})},blockClass:i,ignoreClass:l,ignoreSelector:c,maskAllText:u,maskTextClass:d,unmaskTextClass:m,maskTextSelector:f,unmaskTextSelector:h,maskInputOptions:je,inlineStylesheet:g,sampling:S,recordDOM:U,recordCanvas:T,inlineImages:z,userTriggeredOnInput:D,collectFonts:H,doc:_e,maskAttributeFn:E,maskInputFn:R,maskTextFn:A,keepIframeSrcFn:O,blockSelector:o,unblockSelector:a,slimDOMOptions:ze,dataURLOptions:I,mirror:fs,iframeManager:$e,stylesheetManager:ts,shadowDomManager:K,processedNodeManager:ns,canvasManager:k,ignoreCSSAttributes:V,plugins:((Ve=$==null?void 0:$.filter(ie=>ie.observer))==null?void 0:Ve.map(ie=>({observer:ie.observer,options:ie.options,callback:ds=>Ce({type:oe.Plugin,data:{plugin:ie.name,payload:ds}})})))||[]},{})};$e.addLoadListener(_e=>{try{Y.push(be(_e.contentDocument))}catch(Ve){console.warn(Ve)}});const J=()=>{ae(),Y.push(be(document))};return document.readyState==="interactive"||document.readyState==="complete"?J():(Y.push(He("DOMContentLoaded",()=>{Ce({type:oe.DomContentLoaded,data:{}}),v==="DOMContentLoaded"&&J()})),Y.push(He("load",()=>{Ce({type:oe.Load,data:{}}),v==="load"&&J()},window))),()=>{Y.forEach(_e=>_e()),ns.destroy(),mn=void 0,wy()}}catch(Y){console.warn(Y)}}function Ky(e){if(!mn)throw new Error("please take full snapshot after start recording");mn(e)}ws.mirror=fs;ws.takeFullSnapshot=Ky;function Xy(e,s){try{return e?e(s):new al}catch{return console.warn("Unable to initialize CanvasManager"),new al}}var ll;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(ll||(ll={}));const Zy=3,Qy=5;function ko(e){return e>9999999999?e:e*1e3}function Zn(e){return e>9999999999?e/1e3:e}function xt(e,s){s.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(s.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:oe.Custom,timestamp:(s.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:hs(s,10,1e3)}}),s.category==="console")))}const eE="button,a";function Lu(e){return e.closest(eE)||e}function Fu(e){const s=$u(e);return!s||!(s instanceof Element)?s:Lu(s)}function $u(e){return sE(e)?e.target:e}function sE(e){return typeof e=="object"&&!!e&&"target"in e}let Os;function rE(e){return Os||(Os=[],tE()),Os.push(e),()=>{const s=Os?Os.indexOf(e):-1;s>-1&&Os.splice(s,1)}}function tE(){Ke(xe,"open",function(e){return function(...s){if(Os)try{Os.forEach(r=>r())}catch{}return e.apply(xe,s)}})}const nE=new Set([ne.Mutation,ne.StyleSheetRule,ne.StyleDeclaration,ne.AdoptedStyleSheet,ne.CanvasMutation,ne.Selection,ne.MediaInteraction]);function iE(e,s,r){e.handleClick(s,r)}class oE{constructor(s,r,t=xt){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=r.timeout/1e3,this._threshold=r.threshold/1e3,this._scrollTimeout=r.scrollTimeout/1e3,this._replay=s,this._ignoreSelector=r.ignoreSelector,this._addBreadcrumbEvent=t}addListeners(){const s=rE(()=>{this._lastMutation=cl()});this._teardown=()=>{s(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(s,r){if(lE(r,this._ignoreSelector)||!cE(s))return;const t={timestamp:Zn(s.timestamp),clickBreadcrumb:s,clickCount:0,node:r};this._clicks.some(i=>i.node===t.node&&Math.abs(i.timestamp-t.timestamp)<1)||(this._clicks.push(t),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(s=Date.now()){this._lastMutation=Zn(s)}registerScroll(s=Date.now()){this._lastScroll=Zn(s)}registerClick(s){const r=Lu(s);this._handleMultiClick(r)}_handleMultiClick(s){this._getClicks(s).forEach(r=>{r.clickCount++})}_getClicks(s){return this._clicks.filter(r=>r.node===s)}_checkClicks(){const s=[],r=cl();this._clicks.forEach(t=>{!t.mutationAfter&&this._lastMutation&&(t.mutationAfter=t.timestamp<=this._lastMutation?this._lastMutation-t.timestamp:void 0),!t.scrollAfter&&this._lastScroll&&(t.scrollAfter=t.timestamp<=this._lastScroll?this._lastScroll-t.timestamp:void 0),t.timestamp+this._timeout<=r&&s.push(t)});for(const t of s){const i=this._clicks.indexOf(t);i>-1&&(this._generateBreadcrumbs(t),this._clicks.splice(i,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(s){const r=this._replay,t=s.scrollAfter&&s.scrollAfter<=this._scrollTimeout,i=s.mutationAfter&&s.mutationAfter<=this._threshold,o=!t&&!i,{clickCount:a,clickBreadcrumb:l}=s;if(o){const c=Math.min(s.mutationAfter||this._timeout,this._timeout)*1e3,u=c<this._timeout*1e3?"mutation":"timeout",d={type:"default",message:l.message,timestamp:l.timestamp,category:"ui.slowClickDetected",data:{...l.data,url:xe.location.href,route:r.getCurrentRoute(),timeAfterClickMs:c,endReason:u,clickCount:a||1}};this._addBreadcrumbEvent(r,d);return}if(a>1){const c={type:"default",message:l.message,timestamp:l.timestamp,category:"ui.multiClick",data:{...l.data,url:xe.location.href,route:r.getCurrentRoute(),clickCount:a,metric:!0}};this._addBreadcrumbEvent(r,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=St(()=>this._checkClicks(),1e3)}}const aE=["A","BUTTON","INPUT"];function lE(e,s){return!!(!aE.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||s&&e.matches(s))}function cE(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function cl(){return Date.now()/1e3}function uE(e,s){try{if(!mE(s))return;const{source:r}=s.data;if(nE.has(r)&&e.registerMutation(s.timestamp),r===ne.Scroll&&e.registerScroll(s.timestamp),dE(s)){const{type:t,id:i}=s.data,o=ws.mirror.getNode(i);o instanceof HTMLElement&&t===qe.Click&&e.registerClick(o)}}catch{}}function mE(e){return e.type===Zy}function dE(e){return e.data.source===ne.MouseInteraction}function js(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var _o=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(_o||{});const fE=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function hE(e){const s={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(const r in e)if(fE.has(r)){let t=r;(r==="data-testid"||r==="data-test-id")&&(t="testId"),s[t]=e[r]}return s}const gE=e=>s=>{if(!e.isEnabled())return;const r=pE(s);if(!r)return;const t=s.name==="click",i=t?s.event:void 0;t&&e.clickDetector&&(i!=null&&i.target)&&!i.altKey&&!i.metaKey&&!i.ctrlKey&&!i.shiftKey&&iE(e.clickDetector,r,Fu(s.event)),xt(e,r)};function Bu(e,s){const r=ws.mirror.getId(e),t=r&&ws.mirror.getNode(r),i=t&&ws.mirror.getMeta(t),o=i&&bE(i)?i:null;return{message:s,data:o?{nodeId:r,node:{id:r,tagName:o.tagName,textContent:Array.from(o.childNodes).map(a=>a.type===_o.Text&&a.textContent).filter(Boolean).map(a=>a.trim()).join(""),attributes:hE(o.attributes)}}:{}}}function pE(e){const{target:s,message:r}=NE(e);return js({category:`ui.${e.name}`,...Bu(s,r)})}function NE(e){const s=e.name==="click";let r,t=null;try{t=s?Fu(e.event):$u(e.event),r=Xe(t,{maxStringLength:200})||"<unknown>"}catch{r="<unknown>"}return{target:t,message:r}}function bE(e){return e.type===_o.Element}function yE(e,s){if(!e.isEnabled())return;e.updateUserActivity();const r=EE(s);r&&xt(e,r)}function EE(e){const{metaKey:s,shiftKey:r,ctrlKey:t,altKey:i,key:o,target:a}=e;if(!a||jE(a)||!o)return null;const l=s||t||i,c=o.length===1;if(!l&&c)return null;const u=Xe(a,{maxStringLength:200})||"<unknown>",d=Bu(a,u);return js({category:"ui.keyDown",message:u,data:{...d.data,metaKey:s,shiftKey:r,ctrlKey:t,altKey:i,key:o}})}function jE(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}const SE={resource:kE,paint:CE,navigation:TE};function Qn(e,s){return({metric:r})=>void s.replayPerformanceEntries.push(e(r))}function vE(e){return e.map(xE).filter(Boolean)}function xE(e){const s=SE[e.entryType];return s?s(e):null}function Mr(e){return((Qe()||xe.performance.timeOrigin)+e)/1e3}function CE(e){const{duration:s,entryType:r,name:t,startTime:i}=e,o=Mr(i);return{type:r,name:t,start:o,end:o+s,data:void 0}}function TE(e){const{entryType:s,name:r,decodedBodySize:t,duration:i,domComplete:o,encodedBodySize:a,domContentLoadedEventStart:l,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:d,loadEventEnd:m,redirectCount:f,startTime:h,transferSize:g,type:p}=e;return i===0?null:{type:`${s}.${p}`,start:Mr(h),end:Mr(o),name:r,data:{size:g,decodedBodySize:t,encodedBodySize:a,duration:i,domInteractive:u,domContentLoadedEventStart:l,domContentLoadedEventEnd:c,loadEventStart:d,loadEventEnd:m,domComplete:o,redirectCount:f}}}function kE(e){const{entryType:s,initiatorType:r,name:t,responseEnd:i,startTime:o,decodedBodySize:a,encodedBodySize:l,responseStatus:c,transferSize:u}=e;return["fetch","xmlhttprequest"].includes(r)?null:{type:`${s}.${r}`,start:Mr(o),end:Mr(i),name:t,data:{size:u,statusCode:c,decodedBodySize:a,encodedBodySize:l}}}function _E(e){const s=e.entries[e.entries.length-1],r=s!=null&&s.element?[s.element]:void 0;return Do(e,"largest-contentful-paint",r)}function DE(e){return e.sources!==void 0}function wE(e){const s=[],r=[];for(const t of e.entries)if(DE(t)){const i=[];for(const o of t.sources)if(o.node){r.push(o.node);const a=ws.mirror.getId(o.node);a&&i.push(a)}s.push({value:t.value,nodeIds:i.length?i:void 0})}return Do(e,"cumulative-layout-shift",r,s)}function UE(e){const s=e.entries[e.entries.length-1],r=s!=null&&s.target?[s.target]:void 0;return Do(e,"interaction-to-next-paint",r)}function Do(e,s,r,t){const i=e.value,o=e.rating,a=Mr(i);return{type:"web-vital",name:s,start:a,end:a,data:{value:i,size:i,rating:o,nodeIds:r?r.map(l=>ws.mirror.getId(l)):void 0,attributions:t}}}function VE(e){function s(i){e.performanceEntries.includes(i)||e.performanceEntries.push(i)}function r({entries:i}){i.forEach(s)}const t=[];return["navigation","paint","resource"].forEach(i=>{t.push(ar(i,r))}),t.push(po(Qn(_E,e)),go(Qn(wE,e)),tu(Qn(UE,e))),()=>{t.forEach(i=>i())}}const ee=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,IE='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function RE(){const e=new Blob([IE]);return URL.createObjectURL(e)}const ul=["log","warn","error"],Gt="[Replay] ";function ei(e,s="info"){vs({category:"console",data:{logger:"replay"},level:s,message:`${Gt}${e}`},{level:s})}function ME(){let e=!1,s=!1;const r={exception:()=>{},infoTick:()=>{},setConfig:t=>{e=!!t.captureExceptions,s=!!t.traceInternals}};return ee?(ul.forEach(t=>{r[t]=(...i)=>{L[t](Gt,...i),s&&ei(i.join(""),Fc(t))}}),r.exception=(t,...i)=>{i.length&&r.error&&r.error(...i),L.error(Gt,t),e?gt(t,{mechanism:{handled:!0,type:"auto.function.replay.debug"}}):s&&ei(t,"error")},r.infoTick=(...t)=>{L.log(Gt,...t),s&&setTimeout(()=>ei(t[0]),0)}):ul.forEach(t=>{r[t]=()=>{}}),r}const se=ME();class wo extends Error{constructor(){super(`Event buffer exceeded maximum size of ${jo}.`)}}class qu{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(s){const r=JSON.stringify(s).length;if(this._totalSize+=r,this._totalSize>jo)throw new wo;this.events.push(s)}finish(){return new Promise(s=>{const r=this.events;this.clear(),s(JSON.stringify(r))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const s=this.events.map(r=>r.timestamp).sort()[0];return s?ko(s):null}}class PE{constructor(s){this._worker=s,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((s,r)=>{this._worker.addEventListener("message",({data:t})=>{t.success?s():r()},{once:!0}),this._worker.addEventListener("error",t=>{r(t)},{once:!0})}),this._ensureReadyPromise)}destroy(){ee&&se.log("Destroying compression worker"),this._worker.terminate()}postMessage(s,r){const t=this._getAndIncrementId();return new Promise((i,o)=>{const a=({data:l})=>{const c=l;if(c.method===s&&c.id===t){if(this._worker.removeEventListener("message",a),!c.success){ee&&se.error("Error in compression worker: ",c.response),o(new Error("Error in compression worker"));return}i(c.response)}};this._worker.addEventListener("message",a),this._worker.postMessage({id:t,method:s,arg:r})})}_getAndIncrementId(){return this._id++}}class AE{constructor(s){this._worker=new PE(s),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(s){const r=ko(s.timestamp);(!this._earliestTimestamp||r<this._earliestTimestamp)&&(this._earliestTimestamp=r);const t=JSON.stringify(s);return this._totalSize+=t.length,this._totalSize>jo?Promise.reject(new wo):this._sendEventToWorker(t)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,s=>{ee&&se.exception(s,'Sending "clear" message to worker failed',s)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(s){return this._worker.postMessage("addEvent",s)}async _finishRequest(){const s=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,s}}class OE{constructor(s){this._fallback=new qu,this._compression=new AE(s),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(s){this._used.hasCheckout=s}set waitForCheckout(s){this._used.waitForCheckout=s}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(s){return this._used.addEvent(s)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(s){ee&&se.exception(s,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:s,hasCheckout:r,waitForCheckout:t}=this._fallback,i=[];for(const o of s)i.push(this._compression.addEvent(o));this._compression.hasCheckout=r,this._compression.waitForCheckout=t,this._used=this._compression;try{await Promise.all(i),this._fallback.clear()}catch(o){ee&&se.exception(o,"Failed to add events when switching buffers.")}}}function LE({useCompression:e,workerUrl:s}){if(e&&window.Worker){const r=FE(s);if(r)return r}return ee&&se.log("Using simple buffer"),new qu}function FE(e){try{const s=e||$E();if(!s)return;ee&&se.log(`Using compression worker${e?` from ${e}`:""}`);const r=new Worker(s);return new OE(r)}catch(s){ee&&se.exception(s,"Failed to create compression worker")}}function $E(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?RE():""}function Uo(){try{return"sessionStorage"in xe&&!!xe.sessionStorage}catch{return!1}}function BE(e){qE(),e.session=void 0}function qE(){if(Uo())try{xe.sessionStorage.removeItem(yo)}catch{}}function Hu(e){return e===void 0?!1:Math.random()<e}function Tn(e){if(Uo())try{xe.sessionStorage.setItem(yo,JSON.stringify(e))}catch{}}function Wu(e){const s=Date.now(),r=e.id||ss(),t=e.started||s,i=e.lastActivity||s,o=e.segmentId||0,a=e.sampled,l=e.previousSessionId,c=e.dirty||!1;return{id:r,started:t,lastActivity:i,segmentId:o,sampled:a,previousSessionId:l,dirty:c}}function HE(e,s){return Hu(e)?"session":s?"buffer":!1}function ml({sessionSampleRate:e,allowBuffering:s,stickySession:r=!1},{previousSessionId:t}={}){const i=HE(e,s),o=Wu({sampled:i,previousSessionId:t});return r&&Tn(o),o}function WE(){if(!Uo())return null;try{const e=xe.sessionStorage.getItem(yo);if(!e)return null;const s=JSON.parse(e);return ee&&se.infoTick("Loading existing session"),Wu(s)}catch{return null}}function Pi(e,s,r=+new Date){return e===null||s===void 0||s<0?!0:s===0?!1:e+s<=r}function zu(e,{maxReplayDuration:s,sessionIdleExpire:r,targetTime:t=Date.now()}){return Pi(e.started,s,t)||Pi(e.lastActivity,r,t)}function Yu(e,{sessionIdleExpire:s,maxReplayDuration:r}){return!(!zu(e,{sessionIdleExpire:s,maxReplayDuration:r})||e.sampled==="buffer"&&e.segmentId===0)}function si({sessionIdleExpire:e,maxReplayDuration:s,previousSessionId:r},t){const i=t.stickySession&&WE();return i?Yu(i,{sessionIdleExpire:e,maxReplayDuration:s})?(ee&&se.infoTick("Session in sessionStorage is expired, creating new one..."),ml(t,{previousSessionId:i.id})):i:(ee&&se.infoTick("Creating new session"),ml(t,{previousSessionId:r}))}function zE(e){return e.type===oe.Custom}function Vo(e,s,r){return Ju(e,s)?(Gu(e,s,r),!0):!1}function YE(e,s,r){return Ju(e,s)?Gu(e,s,r):Promise.resolve(null)}async function Gu(e,s,r){const{eventBuffer:t}=e;if(!t||t.waitForCheckout&&!r)return null;const i=e.recordingMode==="buffer";try{r&&i&&t.clear(),r&&(t.hasCheckout=!0,t.waitForCheckout=!1);const o=e.getOptions(),a=GE(s,o.beforeAddRecordingEvent);return a?await t.addEvent(a):void 0}catch(o){const a=o&&o instanceof wo,l=a?"addEventSizeExceeded":"addEvent",c=ue();if(c){const u=a?"buffer_overflow":"internal_sdk_error";c.recordDroppedEvent(u,"replay")}if(a&&i)return t.clear(),t.waitForCheckout=!0,null;e.handleException(o),await e.stop({reason:l})}}function Ju(e,s){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const r=ko(s.timestamp);return r+e.timeouts.sessionIdlePause<Date.now()?!1:r>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?(ee&&se.infoTick(`Skipping event with timestamp ${r} because it is after maxReplayDuration`),!1):!0}function GE(e,s){try{if(typeof s=="function"&&zE(e))return s(e)}catch(r){return ee&&se.exception(r,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}function Io(e){return!e.type}function Ai(e){return e.type==="transaction"}function JE(e){return e.type==="replay_event"}function dl(e){return e.type==="feedback"}function KE(e){return(s,r)=>{if(!e.isEnabled()||!Io(s)&&!Ai(s))return;const t=r.statusCode;if(!(!t||t<200||t>=300)){if(Ai(s)){XE(e,s);return}ZE(e,s)}}}function XE(e,s){var t,i;const r=e.getContext();(i=(t=s.contexts)==null?void 0:t.trace)!=null&&i.trace_id&&r.traceIds.size<100&&r.traceIds.add(s.contexts.trace.trace_id)}function ZE(e,s){const r=e.getContext();if(s.event_id&&r.errorIds.size<100&&r.errorIds.add(s.event_id),e.recordingMode!=="buffer"||!s.tags||!s.tags.replayId)return;const{beforeErrorSampling:t}=e.getOptions();typeof t=="function"&&!t(s)||St(async()=>{try{await e.sendBufferedReplayOrFlush()}catch(i){e.handleException(i)}})}function QE(e){return s=>{!e.isEnabled()||!Io(s)||ej(e,s)}}function ej(e,s){var t,i,o;const r=(o=(i=(t=s.exception)==null?void 0:t.values)==null?void 0:i[0])==null?void 0:o.value;if(typeof r=="string"&&(r.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||r.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const a=js({category:"replay.hydrate-error",data:{url:$r()}});xt(e,a)}}function sj(e){const s=ue();s&&s.on("beforeAddBreadcrumb",r=>rj(e,r))}function rj(e,s){if(!e.isEnabled()||!Ku(s))return;const r=tj(s);r&&xt(e,r)}function tj(e){return!Ku(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui.")?null:e.category==="console"?nj(e):js(e)}function nj(e){var i;const s=(i=e.data)==null?void 0:i.arguments;if(!Array.isArray(s)||s.length===0)return js(e);let r=!1;const t=s.map(o=>{if(!o)return o;if(typeof o=="string")return o.length>Rt?(r=!0,`${o.slice(0,Rt)}`):o;if(typeof o=="object")try{const a=hs(o,7);return JSON.stringify(a).length>Rt?(r=!0,`${JSON.stringify(a,null,2).slice(0,Rt)}`):a}catch{}return o});return js({...e,data:{...e.data,arguments:t,...r?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function Ku(e){return!!e.category}function ij(e,s){var r,t,i;return e.type||!((t=(r=e.exception)==null?void 0:r.values)!=null&&t.length)?!1:!!((i=s.originalException)!=null&&i.__rrweb__)}function Xu(){const e=Ee().getPropagationContext().dsc;e&&delete e.replay_id;const s=We();if(s){const r=Ms(s);delete r.replay_id}}function oj(e,s){e.triggerUserActivity(),e.addUpdate(()=>s.timestamp?(e.throttledAddEvent({type:oe.Custom,timestamp:s.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:s.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:s.event_id}}}}),!1):!0)}function aj(e,s){return e.recordingMode!=="buffer"||s.message===Eo||!s.exception||s.type?!1:Hu(e.getOptions().errorSampleRate)}function lj(e){return Object.assign((s,r)=>{var a;if(!e.isEnabled()||e.isPaused())return s;if(JE(s))return delete s.breadcrumbs,s;if(!Io(s)&&!Ai(s)&&!dl(s))return s;if(!e.checkAndHandleExpiredSession())return Xu(),s;if(dl(s))return e.flush(),s.contexts.feedback.replay_id=e.getSessionId(),oj(e,s),s;if(ij(s,r)&&!e.getOptions()._experiments.captureExceptions)return ee&&se.log("Ignoring error from rrweb internals",s),null;const i=aj(e,s);if((i||e.recordingMode==="session")&&(s.tags={...s.tags,replayId:e.getSessionId()}),i&&e.recordingMode==="buffer"&&((a=e.session)==null?void 0:a.sampled)==="buffer"){const l=e.session;l.dirty=!0,e.getOptions().stickySession&&Tn(l)}return s},{id:"Replay"})}function kn(e,s){return s.map(({type:r,start:t,end:i,name:o,data:a})=>{const l=e.throttledAddEvent({type:oe.Custom,timestamp:t,data:{tag:"performanceSpan",payload:{op:r,description:o,startTimestamp:t,endTimestamp:i,data:a}}});return typeof l=="string"?Promise.resolve(null):l})}function cj(e){const{from:s,to:r}=e,t=Date.now()/1e3;return{type:"navigation.push",start:t,end:t,name:r,data:{previous:s}}}function uj(e){return s=>{if(!e.isEnabled())return;const r=cj(s);r!==null&&(e.getContext().urls.push(r.name),e.triggerUserActivity(),e.addUpdate(()=>(kn(e,[r]),!1)))}}function mj(e,s){return ee&&e.getOptions()._experiments.traceInternals?!1:Wh(s,ue())}function Zu(e,s){e.isEnabled()&&s!==null&&(mj(e,s.name)||e.addUpdate(()=>(kn(e,[s]),!0)))}function _n(e){if(!e)return;const s=new TextEncoder;try{if(typeof e=="string")return s.encode(e).length;if(e instanceof URLSearchParams)return s.encode(e.toString()).length;if(e instanceof FormData){const r=mu(e);return s.encode(r).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function Qu(e){if(!e)return;const s=parseInt(e,10);return isNaN(s)?void 0:s}function dn(e,s){if(!e)return{headers:{},size:void 0,_meta:{warnings:[s]}};const r={...e._meta},t=r.warnings||[];return r.warnings=[...t,s],e._meta=r,e}function em(e,s){if(!s)return null;const{startTimestamp:r,endTimestamp:t,url:i,method:o,statusCode:a,request:l,response:c}=s;return{type:e,start:r/1e3,end:t/1e3,name:i,data:{method:o,statusCode:a,request:l,response:c}}}function lt(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function Bs(e,s,r){if(!s&&Object.keys(e).length===0)return;if(!s)return{headers:e};if(!r)return{headers:e,size:s};const t={headers:e,size:s},{body:i,warnings:o}=dj(r);return t.body=i,o!=null&&o.length&&(t._meta={warnings:o}),t}function Oi(e,s){return Object.entries(e).reduce((r,[t,i])=>{const o=t.toLowerCase();return s.includes(o)&&e[t]&&(r[o]=i),r},{})}function dj(e){if(!e||typeof e!="string")return{body:e};const s=e.length>za,r=fj(e);if(s){const t=e.slice(0,za);return r?{body:t,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${t}`,warnings:["TEXT_TRUNCATED"]}}if(r)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function fj(e){const s=e[0],r=e[e.length-1];return s==="["&&r==="]"||s==="{"&&r==="}"}function fn(e,s){const r=hj(e);return _s(r,s)}function hj(e,s=xe.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(xe.location.origin))return e;const r=new URL(e,s);if(r.origin!==new URL(s).origin)return e;const t=r.href;return!e.endsWith("/")&&t.endsWith("/")?t.slice(0,-1):t}async function gj(e,s,r){try{const t=await Nj(e,s,r),i=em("resource.fetch",t);Zu(r.replay,i)}catch(t){ee&&se.exception(t,"Failed to capture fetch breadcrumb")}}function pj(e,s){const{input:r,response:t}=s,i=r?fu(r):void 0,o=_n(i),a=t?Qu(t.headers.get("content-length")):void 0;o!==void 0&&(e.data.request_body_size=o),a!==void 0&&(e.data.response_body_size=a)}async function Nj(e,s,r){const t=Date.now(),{startTimestamp:i=t,endTimestamp:o=t}=s,{url:a,method:l,status_code:c=0,request_body_size:u,response_body_size:d}=e.data,m=fn(a,r.networkDetailAllowUrls)&&!fn(a,r.networkDetailDenyUrls),f=m?bj(r,s.input,u):lt(u),h=await yj(m,r,s.response,d);return{startTimestamp:i,endTimestamp:o,url:a,method:l,statusCode:c,request:f,response:h}}function bj({networkCaptureBodies:e,networkRequestHeaders:s},r,t){const i=r?Sj(r,s):{};if(!e)return Bs(i,t,void 0);const o=fu(r),[a,l]=du(o,se),c=Bs(i,t,a);return l?dn(c,l):c}async function yj(e,{networkCaptureBodies:s,networkResponseHeaders:r},t,i){if(!e&&i!==void 0)return lt(i);const o=t?sm(t.headers,r):{};if(!t||!s&&i!==void 0)return Bs(o,i,void 0);const[a,l]=await jj(t),c=Ej(a,{networkCaptureBodies:s,responseBodySize:i,captureDetails:e,headers:o});return l?dn(c,l):c}function Ej(e,{networkCaptureBodies:s,responseBodySize:r,captureDetails:t,headers:i}){try{const o=e!=null&&e.length&&r===void 0?_n(e):r;return t?s?Bs(i,o,e):Bs(i,o,void 0):lt(o)}catch(o){return ee&&se.exception(o,"Failed to serialize response body"),Bs(i,r,void 0)}}async function jj(e){const s=vj(e);if(!s)return[void 0,"BODY_PARSE_ERROR"];try{return[await xj(s)]}catch(r){return r instanceof Error&&r.message.indexOf("Timeout")>-1?(ee&&se.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(ee&&se.exception(r,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}function sm(e,s){const r={};return s.forEach(t=>{e.get(t)&&(r[t]=e.get(t))}),r}function Sj(e,s){return e.length===1&&typeof e[0]!="string"?fl(e[0],s):e.length===2?fl(e[1],s):{}}function fl(e,s){if(!e)return{};const r=e.headers;return r?r instanceof Headers?sm(r,s):Array.isArray(r)?{}:Oi(r,s):{}}function vj(e){try{return e.clone()}catch(s){ee&&se.exception(s,"Failed to clone response body")}}function xj(e){return new Promise((s,r)=>{const t=St(()=>r(new Error("Timeout while trying to read response body")),500);Cj(e).then(i=>s(i),i=>r(i)).finally(()=>clearTimeout(t))})}async function Cj(e){return await e.text()}async function Tj(e,s,r){try{const t=_j(e,s,r),i=em("resource.xhr",t);Zu(r.replay,i)}catch(t){ee&&se.exception(t,"Failed to capture xhr breadcrumb")}}function kj(e,s){const{xhr:r,input:t}=s;if(!r)return;const i=_n(t),o=r.getResponseHeader("content-length")?Qu(r.getResponseHeader("content-length")):Uj(r.response,r.responseType);i!==void 0&&(e.data.request_body_size=i),o!==void 0&&(e.data.response_body_size=o)}function _j(e,s,r){const t=Date.now(),{startTimestamp:i=t,endTimestamp:o=t,input:a,xhr:l}=s,{url:c,method:u,status_code:d=0,request_body_size:m,response_body_size:f}=e.data;if(!c)return null;if(!l||!fn(c,r.networkDetailAllowUrls)||fn(c,r.networkDetailDenyUrls)){const C=lt(m),S=lt(f);return{startTimestamp:i,endTimestamp:o,url:c,method:u,statusCode:d,request:C,response:S}}const h=l[Zs],g=h?Oi(h.request_headers,r.networkRequestHeaders):{},p=Oi(hu(l),r.networkResponseHeaders),[N,y]=r.networkCaptureBodies?du(a,se):[void 0],[E,R]=r.networkCaptureBodies?Dj(l):[void 0],A=Bs(g,m,N),_=Bs(p,f,E);return{startTimestamp:i,endTimestamp:o,url:c,method:u,statusCode:d,request:y?dn(A,y):A,response:R?dn(_,R):_}}function Dj(e){const s=[];try{return[e.responseText]}catch(r){s.push(r)}try{return wj(e.response,e.responseType)}catch(r){s.push(r)}return ee&&se.warn("Failed to get xhr response body",...s),[void 0]}function wj(e,s){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(s==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch(r){return ee&&se.exception(r,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return ee&&se.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Uj(e,s){try{const r=s==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return _n(r)}catch{return}}function Vj(e){const s=ue();try{const{networkDetailAllowUrls:r,networkDetailDenyUrls:t,networkCaptureBodies:i,networkRequestHeaders:o,networkResponseHeaders:a}=e.getOptions(),l={replay:e,networkDetailAllowUrls:r,networkDetailDenyUrls:t,networkCaptureBodies:i,networkRequestHeaders:o,networkResponseHeaders:a};s&&s.on("beforeAddBreadcrumb",(c,u)=>Ij(l,c,u))}catch{}}function Ij(e,s,r){if(s.data)try{Rj(s)&&Pj(r)&&(kj(s,r),Tj(s,r,e)),Mj(s)&&Aj(r)&&(pj(s,r),gj(s,r,e))}catch(t){ee&&se.exception(t,"Error when enriching network breadcrumb")}}function Rj(e){return e.category==="xhr"}function Mj(e){return e.category==="fetch"}function Pj(e){return e==null?void 0:e.xhr}function Aj(e){return e==null?void 0:e.response}function Oj(e){const s=ue();cu(gE(e)),Sn(uj(e)),sj(e),Vj(e);const r=lj(e);mh(r),s&&(s.on("beforeSendEvent",QE(e)),s.on("afterSendEvent",KE(e)),s.on("createDsc",t=>{const i=e.getSessionId();i&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(t.replay_id=i)}),s.on("spanStart",t=>{e.lastActiveSpan=t}),s.on("spanEnd",t=>{e.lastActiveSpan=t}),s.on("beforeSendFeedback",async(t,i)=>{var a;const o=e.getSessionId();i!=null&&i.includeReplay&&e.isEnabled()&&o&&((a=t.contexts)!=null&&a.feedback)&&(t.contexts.feedback.source==="api"&&await e.sendBufferedReplayOrFlush(),t.contexts.feedback.replay_id=o)}),s.on("openFeedbackWidget",async()=>{await e.sendBufferedReplayOrFlush()}))}async function Lj(e){try{return Promise.all(kn(e,[Fj(xe.performance.memory)]))}catch{return[]}}function Fj(e){const{jsHeapSizeLimit:s,totalJSHeapSize:r,usedJSHeapSize:t}=e,i=Date.now()/1e3;return{type:"memory",name:"memory",start:i,end:i,data:{memory:{jsHeapSizeLimit:s,totalJSHeapSize:r,usedJSHeapSize:t}}}}function $j(e,s,r){return Xh(e,s,{...r,setTimeoutImpl:St})}const ls=ce.navigator;function Bj(){return/iPhone|iPad|iPod/i.test((ls==null?void 0:ls.userAgent)??"")||/Macintosh/i.test((ls==null?void 0:ls.userAgent)??"")&&(ls!=null&&ls.maxTouchPoints)&&(ls==null?void 0:ls.maxTouchPoints)>1?{sampling:{mousemove:!1}}:{}}function qj(e){let s=!1;return(r,t)=>{if(!e.checkAndHandleExpiredSession()){ee&&se.warn("Received replay event after session expired.");return}const i=t||!s;s=!0,e.clickDetector&&uE(e.clickDetector,r),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&i&&e.setInitialState(),!Vo(e,r,i))return!0;if(!i)return!1;const o=e.session;if(Wj(e,i),e.recordingMode==="buffer"&&o&&e.eventBuffer&&!o.dirty){const a=e.eventBuffer.getEarliestTimestamp();a&&(ee&&se.log(`Updating session start time to earliest event in buffer to ${new Date(a)}`),o.started=a,e.getOptions().stickySession&&Tn(o))}return o!=null&&o.previousSessionId||e.recordingMode==="session"&&e.flush(),!0})}}function Hj(e){const s=e.getOptions();return{type:oe.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:s.sessionSampleRate,errorSampleRate:s.errorSampleRate,useCompressionOption:s.useCompression,blockAllMedia:s.blockAllMedia,maskAllText:s.maskAllText,maskAllInputs:s.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:s.networkDetailAllowUrls.length>0,networkCaptureBodies:s.networkCaptureBodies,networkRequestHasHeaders:s.networkRequestHeaders.length>0,networkResponseHasHeaders:s.networkResponseHeaders.length>0}}}}function Wj(e,s){!s||!e.session||e.session.segmentId!==0||Vo(e,Hj(e),!1)}function zj(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function Yj(e,s,r,t){return Gs(fc(e,eo(e),t,r),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof s=="string"?new TextEncoder().encode(s).length:s.length},s]])}function Gj({recordingData:e,headers:s}){let r;const t=`${JSON.stringify(s)}
`;if(typeof e=="string")r=`${t}${e}`;else{const o=new TextEncoder().encode(t);r=new Uint8Array(o.length+e.length),r.set(o),r.set(e,o.length)}return r}async function Jj({client:e,scope:s,replayId:r,event:t}){const i=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,o={event_id:r,integrations:i};e.emit("preprocessEvent",t,o);const a=await yc(e.getOptions(),t,o,s,e,ms());if(!a)return null;e.emit("postprocessEvent",a,o),a.platform=a.platform||"javascript";const l=e.getSdkMetadata(),{name:c,version:u,settings:d}=(l==null?void 0:l.sdk)||{};return a.sdk={...a.sdk,name:c||"sentry.javascript.unknown",version:u||"0.0.0",settings:d},a}async function Kj({recordingData:e,replayId:s,segmentId:r,eventContext:t,timestamp:i,session:o}){const a=Gj({recordingData:e,headers:{segment_id:r}}),{urls:l,errorIds:c,traceIds:u,initialTimestamp:d}=t,m=ue(),f=Ee(),h=m==null?void 0:m.getTransport(),g=m==null?void 0:m.getDsn();if(!m||!h||!g||!o.sampled)return Promise.resolve({});const p={type:Tb,replay_start_timestamp:d/1e3,timestamp:i/1e3,error_ids:c,trace_ids:u,urls:l,replay_id:s,segment_id:r,replay_type:o.sampled},N=await Jj({scope:f,client:m,replayId:s,event:p});if(!N)return m.recordDroppedEvent("event_processor","replay"),ee&&se.log("An event processor returned `null`, will not send event."),Promise.resolve({});delete N.sdkProcessingMetadata;const y=Yj(N,a,g,m.getOptions().tunnel);let E;try{E=await h.send(y)}catch(A){const _=new Error(Eo);try{_.cause=A}catch{}throw _}const R=wc({},E);if(Dc(R,"replay"))throw new Ro(R);if(typeof E.statusCode=="number"&&(E.statusCode<200||E.statusCode>=300))throw new rm(E.statusCode);return E}class rm extends Error{constructor(s){super(`Transport returned status code ${s}`)}}class Ro extends Error{constructor(s){super("Rate limit hit"),this.rateLimits=s}}class hl extends Error{constructor(){super("Session is too long, not sending replay")}}async function tm(e,s={count:0,interval:Vb}){const{recordingData:r,onError:t}=e;if(r.length)try{return await Kj(e),!0}catch(i){if(i instanceof rm||i instanceof Ro)throw i;if(jc("Replays",{_retryCount:s.count}),t&&t(i),s.count>=Ib){const o=new Error(`${Eo} - max retries exceeded`);try{o.cause=i}catch{}throw o}return s.interval*=++s.count,new Promise((o,a)=>{St(async()=>{try{await tm(e,s),o(!0)}catch(l){a(l)}},s.interval)})}}const nm="__THROTTLED",Xj="__SKIPPED";function Zj(e,s,r){const t=new Map,i=l=>{const c=l-r;t.forEach((u,d)=>{d<c&&t.delete(d)})},o=()=>[...t.values()].reduce((l,c)=>l+c,0);let a=!1;return(...l)=>{const c=Math.floor(Date.now()/1e3);if(i(c),o()>=s){const d=a;return a=!0,d?Xj:nm}a=!1;const u=t.get(c)||0;return t.set(c,u+1),e(...l)}}class Qj{constructor({options:s,recordingOptions:r}){this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:kb,sessionIdleExpire:_b},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=r,this._options=s,this._debouncedFlush=$j(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Zj((a,l)=>YE(this,a,l),300,5);const{slowClickTimeout:t,slowClickIgnoreSelectors:i}=this.getOptions(),o=t?{threshold:Math.min(Rb,t),timeout:t,scrollTimeout:Mb,ignoreSelector:i?i.join(","):""}:void 0;if(o&&(this.clickDetector=new oE(this,o)),ee){const a=s._experiments;se.setConfig({captureExceptions:!!a.captureExceptions,traceInternals:!!a.traceInternals})}this._handleVisibilityChange=()=>{xe.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{const a=js({category:"ui.blur"});this._doChangeToBackgroundTasks(a)},this._handleWindowFocus=()=>{const a=js({category:"ui.focus"});this._doChangeToForegroundTasks(a)},this._handleKeyboardEvent=a=>{yE(this,a)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(s){ee&&se.exception(s),this._options.onError&&this._options.onError(s)}initializeSampling(s){const{errorSampleRate:r,sessionSampleRate:t}=this._options,i=r<=0&&t<=0;if(this._requiresManualStart=i,!i){if(this._initializeSessionForSampling(s),!this.session){ee&&se.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",ee&&se.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){ee&&se.log("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){ee&&se.log("Buffering is in progress, call `flush()` to save the replay");return}ee&&se.infoTick("Starting replay in session mode"),this._updateUserActivity();const s=si({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=s,this.recordingMode="session",this._initializeRecording()}startBuffering(){if(this._isEnabled){ee&&se.log("Buffering is in progress, call `flush()` to save the replay");return}ee&&se.infoTick("Starting replay in buffer mode");const s=si({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=s,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const s=this._canvas;this._stopRecording=ws({...this._recordingOptions,...this.recordingMode==="buffer"?{checkoutEveryNms:Ub}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:qj(this),...Bj(),onMutation:this._onMutationHandler.bind(this),...s?{recordCanvas:s.recordCanvas,getCanvasManager:s.getCanvasManager,sampling:s.sampling,dataURLOptions:s.dataURLOptions}:{}})}catch(s){this.handleException(s)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(s){return this.handleException(s),!1}}async stop({forceFlush:s=!1,reason:r}={}){var t;if(this._isEnabled){this._isEnabled=!1,this.recordingMode="buffer";try{ee&&se.log(`Stopping Replay${r?` triggered by ${r}`:""}`),Xu(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),s&&await this._flush({force:!0}),(t=this.eventBuffer)==null||t.destroy(),this.eventBuffer=null,BE(this)}catch(i){this.handleException(i)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),ee&&se.log("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),ee&&se.log("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:s=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const r=Date.now();ee&&se.log("Converting buffer to session"),await this.flushImmediate();const t=this.stopRecording();!s||!t||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this.session.dirty=!1,this._updateUserActivity(r),this._updateSessionActivity(r),this._maybeSaveSession()),this.startRecording())}addUpdate(s){const r=s();this.recordingMode==="buffer"||!this._isEnabled||r!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(s){var r,t;if(!(s&&((r=this.session)==null?void 0:r.sampled)===!1))return(t=this.session)==null?void 0:t.id}checkAndHandleExpiredSession(){if(this._lastActivity&&Pi(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const s=`${xe.location.pathname}${xe.location.hash}${xe.location.search}`,r=`${xe.location.origin}${s}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=r,this._context.initialTimestamp=Date.now(),this._context.urls.push(r)}throttledAddEvent(s,r){const t=this._throttledAddEvent(s,r);if(t===nm){const i=js({category:"replay.throttled"});this.addUpdate(()=>!Vo(this,{type:Qy,timestamp:i.timestamp||0,data:{tag:"breadcrumb",payload:i,metric:!0}}))}return t}getCurrentRoute(){const s=this.lastActiveSpan||We(),r=s&&Le(s),i=(r&&ge(r).data||{})[ps];if(!(!r||!i||!["route","custom"].includes(i)))return ge(r).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=LE({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(s){const r=this._options.errorSampleRate>0,t=si({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:s},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:r});this.session=t}_checkSession(){if(!this.session)return!1;const s=this.session;return Yu(s,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(s),!1):!0}async _refreshSession(s){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(s.id))}_addListeners(){try{xe.document.addEventListener("visibilitychange",this._handleVisibilityChange),xe.addEventListener("blur",this._handleWindowBlur),xe.addEventListener("focus",this._handleWindowFocus),xe.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(Oj(this),this._hasInitializedCoreListeners=!0)}catch(s){this.handleException(s)}this._performanceCleanupCallback=VE(this)}_removeListeners(){try{xe.document.removeEventListener("visibilitychange",this._handleVisibilityChange),xe.removeEventListener("blur",this._handleWindowBlur),xe.removeEventListener("focus",this._handleWindowFocus),xe.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(s){this.handleException(s)}}_doChangeToBackgroundTasks(s){!this.session||zu(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(s&&this._createCustomBreadcrumb(s),this.conditionalFlush())}_doChangeToForegroundTasks(s){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){ee&&se.log("Document has become active, but session has expired");return}s&&this._createCustomBreadcrumb(s)}_updateUserActivity(s=Date.now()){this._lastActivity=s}_updateSessionActivity(s=Date.now()){this.session&&(this.session.lastActivity=s,this._maybeSaveSession())}_createCustomBreadcrumb(s){this.addUpdate(()=>{this.throttledAddEvent({type:oe.Custom,timestamp:s.timestamp||0,data:{tag:"breadcrumb",payload:s}})})}_addPerformanceEntries(){let s=vE(this.performanceEntries).concat(this.replayPerformanceEntries);if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){const r=this._context.initialTimestamp/1e3;s=s.filter(t=>t.start>=r)}return Promise.all(kn(this,s))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:s,eventBuffer:r}=this;if(!s||!r||this._requiresManualStart||s.segmentId)return;const t=r.getEarliestTimestamp();t&&t<this._context.initialTimestamp&&(this._context.initialTimestamp=t)}_popEventContext(){const s={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),s}async _runFlush(){var r;const s=this.getSessionId();if(!this.session||!this.eventBuffer||!s){ee&&se.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!!((r=this.eventBuffer)!=null&&r.hasEvents)&&(await Lj(this),!!this.eventBuffer&&s===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const t=Date.now();if(t-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new hl;const i=this._popEventContext(),o=this.session.segmentId++;this._maybeSaveSession();const a=await this.eventBuffer.finish();await tm({replayId:s,recordingData:a,segmentId:o,eventContext:i,session:this.session,timestamp:t,onError:l=>this.handleException(l)})}catch(t){this.handleException(t),this.stop({reason:"sendReplay"});const i=ue();if(i){let o;t instanceof Ro?o="ratelimit_backoff":t instanceof hl?o="invalid":o="send_error",i.recordDroppedEvent(o,"replay")}}}async _flush({force:s=!1}={}){if(!this._isEnabled&&!s)return;if(!this.checkAndHandleExpiredSession()){ee&&se.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;const r=this.session.started,i=Date.now()-r;this._debouncedFlush.cancel();const o=i<this._options.minReplayDuration,a=i>this._options.maxReplayDuration+5e3;if(o||a){ee&&se.log(`Session duration (${Math.floor(i/1e3)}s) is too ${o?"short":"long"}, not sending replay.`),o&&this._debouncedFlush();return}const l=this.eventBuffer;l&&this.session.segmentId===0&&!l.hasCheckout&&ee&&se.log("Flushing initial segment without checkout.");const c=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(u){this.handleException(u)}finally{this._flushLock=void 0,c&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&Tn(this.session)}_onMutationHandler(s){const{ignoreMutations:r}=this._options._experiments;if(r!=null&&r.length&&s.some(l=>{const c=zj(l.target),u=r.join(",");return c==null?void 0:c.matches(u)}))return!1;const t=s.length,i=this._options.mutationLimit,o=this._options.mutationBreadcrumbLimit,a=i&&t>i;if(t>o||a){const l=js({category:"replay.mutations",data:{count:t,limit:a}});this._createCustomBreadcrumb(l)}return a?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}function Jr(e,s){return[...e,...s].join(",")}function eS({mask:e,unmask:s,block:r,unblock:t,ignore:i}){const o=["base","iframe[srcdoc]:not([src])"],a=Jr(e,[".sentry-mask","[data-sentry-mask]"]),l=Jr(s,[]);return{maskTextSelector:a,unmaskTextSelector:l,blockSelector:Jr(r,[".sentry-block","[data-sentry-block]",...o]),unblockSelector:Jr(t,[]),ignoreSelector:Jr(i,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function sS({el:e,key:s,maskAttributes:r,maskAllText:t,privacyOptions:i,value:o}){return!t||i.unmaskTextSelector&&e.matches(i.unmaskTextSelector)?o:r.includes(s)||s==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?o.replace(/[\S]/g,"*"):o}const gl='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',rS=["content-length","content-type","accept"],tS=Symbol.for("sentry__originalRequestBody");let pl=!1,Nl=!1;function nS(){if(typeof Request>"u"||Nl)return;const e=Request;try{const s=function(r,t){const i=new e(r,t);return(t==null?void 0:t.body)!=null&&(i[tS]=t.body),i};s.prototype=e.prototype,ce.Request=s,Nl=!0}catch{}}const iS=e=>new oS(e);class oS{constructor({flushMinDelay:s=Db,flushMaxDelay:r=wb,minReplayDuration:t=Pb,maxReplayDuration:i=Ya,stickySession:o=!0,useCompression:a=!0,workerUrl:l,_experiments:c={},maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:m=!0,mutationBreadcrumbLimit:f=750,mutationLimit:h=1e4,slowClickTimeout:g=7e3,slowClickIgnoreSelectors:p=[],networkDetailAllowUrls:N=[],networkDetailDenyUrls:y=[],networkCaptureBodies:E=!0,networkRequestHeaders:R=[],networkResponseHeaders:A=[],mask:_=[],maskAttributes:C=["title","placeholder","aria-label"],unmask:S=[],block:I=[],unblock:F=[],ignore:U=[],maskFn:T,beforeAddRecordingEvent:w,beforeErrorSampling:v,onError:D,attachRawBodyFromRequest:H=!1}={}){this.name="Replay";const z=eS({mask:_,unmask:S,block:I,unblock:F,ignore:U});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{password:!0},maskTextFn:T,maskInputFn:T,maskAttributeFn:($,O,V)=>sS({maskAttributes:C,maskAllText:u,privacyOptions:z,key:$,value:O,el:V}),...z,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:$=>{try{$.__rrweb__=!0}catch{}},recordCrossOriginIframes:!!c.recordCrossOriginIframes},this._initialOptions={flushMinDelay:s,flushMaxDelay:r,minReplayDuration:Math.min(t,Ab),maxReplayDuration:Math.min(i,Ya),stickySession:o,useCompression:a,workerUrl:l,blockAllMedia:m,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:f,mutationLimit:h,slowClickTimeout:g,slowClickIgnoreSelectors:p,networkDetailAllowUrls:N,networkDetailDenyUrls:y,networkCaptureBodies:E,networkRequestHeaders:bl(R),networkResponseHeaders:bl(A),beforeAddRecordingEvent:w,beforeErrorSampling:v,onError:D,attachRawBodyFromRequest:H,_experiments:c},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${gl}`:gl,this._recordingOptions.ignoreCSSAttributes=new Set(["background-image"])),this._isInitialized&&ji())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return pl}set _isInitialized(s){pl=s}afterAllSetup(s){!ji()||this._replay||(this._initialOptions.attachRawBodyFromRequest&&nS(),this._setup(s),this._initialize(s))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(s){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(s):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(s){var r;if((r=this._replay)!=null&&r.isEnabled())return this._replay.getSessionId(s)}getRecordingMode(){var s;if((s=this._replay)!=null&&s.isEnabled())return this._replay.recordingMode}_initialize(s){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(s),this._replay.initializeSampling())}_setup(s){const r=aS(this._initialOptions,s);this._replay=new Qj({options:r,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(s){try{const r=s.getIntegrationByName("ReplayCanvas");if(!r)return;this._replay._canvas=r.getOptions()}catch{}}}function aS(e,s){const r=s.getOptions(),t={sessionSampleRate:0,errorSampleRate:0,...e},i=ir(r.replaysSessionSampleRate),o=ir(r.replaysOnErrorSampleRate);return i==null&&o==null&&cr(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),i!=null&&(t.sessionSampleRate=i),o!=null&&(t.errorSampleRate=o),t}function bl(e){return[...rS,...e.map(s=>s.toLowerCase())]}function lS(e){return e.split(",").some(s=>s.trim().startsWith("sentry-"))}function im(e){try{return new URL(e,pe.location.origin).href}catch{return}}function cS(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function om(e){try{return new Headers(e)}catch{return}}const yl=new WeakMap,ri=new Map,am={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function uS(e,s){const{traceFetch:r,traceXHR:t,trackFetchStreamPerformance:i,shouldCreateSpanForRequest:o,enableHTTPTimings:a,tracePropagationTargets:l,onRequestSpanStart:c,onRequestSpanEnd:u}={...am,...s},d=typeof o=="function"?o:g=>!0,m=g=>mS(g,l),f={},h=e.getOptions().propagateTraceparent;r&&(e.addEventProcessor(g=>(g.type==="transaction"&&g.spans&&g.spans.forEach(p=>{if(p.op==="http.client"){const N=ri.get(p.span_id);N&&(p.timestamp=N/1e3,ri.delete(p.span_id))}}),g)),i&&Rg(g=>{if(g.response){const p=yl.get(g.response);p&&g.endTimestamp&&ri.set(p,g.endTimestamp)}}),Hc(g=>{const p=Cg(g,d,m,f,{propagateTraceparent:h,onRequestSpanEnd:u});if(g.response&&g.fetchData.__span&&yl.set(g.response,g.fetchData.__span),p){const N=im(g.fetchData.url),y=N?tr(N).host:void 0;p.setAttributes({"http.url":N?Fs(N):void 0,"server.address":y}),a&&El(p),c==null||c(p,{headers:g.headers})}})),t&&uu(g=>{var N;const p=dS(g,d,m,f,h,u);p&&(a&&El(p),c==null||c(p,{headers:om((N=g.xhr.__sentry_xhr_v3__)==null?void 0:N.request_headers)}))})}function El(e){const{url:s}=ge(e).data;if(!s||typeof s!="string")return;const r=ar("resource",({entries:t})=>{t.forEach(i=>{cS(i)&&i.name.endsWith(s)&&(e.setAttributes(lu(i)),setTimeout(r))})})}function mS(e,s){const r=$r();if(r){let t,i;try{t=new URL(e,r),i=new URL(r).origin}catch{return!1}const o=t.origin===i;return s?_s(t.toString(),s)||o&&_s(t.pathname,s):o}else{const t=!!e.match(/^\/(?!\/)/);return s?_s(e,s):t}}function dS(e,s,r,t,i,o){const a=e.xhr,l=a==null?void 0:a[Zs];if(!a||a.__sentry_own_request__||!l)return;const{url:c,method:u}=l,d=Ns()&&s(c);if(e.endTimestamp&&d){const y=a.__sentry_xhr_span_id__;if(!y)return;const E=t[y];E&&l.status_code!==void 0&&(Kl(E,l.status_code),E.end(),o==null||o(E,{headers:om(hu(a)),error:e.error}),delete t[y]);return}const m=im(c),f=tr(m||c),h=Fs(Hh(c)),g=!!We(),p=d&&g?Wr({name:`${u} ${h}`,attributes:{url:Fs(c),type:"xhr","http.method":u,"http.url":m?Fs(m):void 0,"server.address":f==null?void 0:f.host,[Re]:"auto.http.browser",[Rs]:"http.client",...(f==null?void 0:f.search)&&{"http.query":f==null?void 0:f.search},...(f==null?void 0:f.hash)&&{"http.fragment":f==null?void 0:f.hash}}}):new qs;a.__sentry_xhr_span_id__=p.spanContext().spanId,t[a.__sentry_xhr_span_id__]=p,r(c)&&fS(a,Ns()&&g?p:void 0,i);const N=ue();return N&&N.emit("beforeOutgoingRequestSpan",p,e),p}function fS(e,s,r){const{"sentry-trace":t,baggage:i,traceparent:o}=Oc({span:s,propagateTraceparent:r});t&&hS(e,t,i,o)}function hS(e,s,r,t){var o;const i=(o=e.__sentry_xhr_v3__)==null?void 0:o.request_headers;if(!(i!=null&&i["sentry-trace"]||!e.setRequestHeader))try{if(e.setRequestHeader("sentry-trace",s),t&&!(i!=null&&i.traceparent)&&e.setRequestHeader("traceparent",t),r){const a=i==null?void 0:i.baggage;(!a||!lS(a))&&e.setRequestHeader("baggage",r)}}catch{}}function gS(){pe.document?pe.document.addEventListener("visibilitychange",()=>{const e=We();if(!e)return;const s=Le(e);if(pe.document.hidden&&s){const r="cancelled",{op:t,status:i}=ge(s);rs&&L.log(`[Tracing] Transaction: ${r} -> since tab moved to the background, op: ${t}`),i||s.setStatus({code:Ie,message:r}),s.setAttribute("sentry.cancellation_reason","document.hidden"),s.end()}}):rs&&L.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const pS=3600,lm="sentry_previous_trace",NS="sentry.previous_trace";function bS(e,{linkPreviousTrace:s,consistentTraceSampling:r}){const t=s==="session-storage";let i=t?jS():void 0;e.on("spanStart",a=>{if(Le(a)!==a)return;const l=Ee().getPropagationContext();i=yS(i,a,l),t&&ES(i)});let o=!0;r&&e.on("beforeSampling",a=>{if(!i)return;const l=Ee(),c=l.getPropagationContext();if(o&&c.parentSpanId){o=!1;return}l.setPropagationContext({...c,dsc:{...c.dsc,sample_rate:String(i.sampleRate),sampled:String(Li(i.spanContext))},sampleRand:i.sampleRand}),a.parentSampled=Li(i.spanContext),a.parentSampleRate=i.sampleRate,a.spanAttributes={...a.spanAttributes,[Jl]:i.sampleRate}})}function yS(e,s,r){const t=ge(s);function i(){var l,c;try{return Number((l=r.dsc)==null?void 0:l.sample_rate)??Number((c=t.data)==null?void 0:c[Gi])}catch{return 0}}const o={spanContext:s.spanContext(),startTimestamp:t.start_timestamp,sampleRate:i(),sampleRand:r.sampleRand};if(!e)return o;const a=e.spanContext;return a.traceId===t.trace_id?e:(Date.now()/1e3-e.startTimestamp<=pS&&(rs&&L.log(`Adding previous_trace \`${JSON.stringify(a)}\` link to span \`${JSON.stringify({op:t.op,...s.spanContext()})}\``),s.addLink({context:a,attributes:{[Rd]:"previous_trace"}}),s.setAttribute(NS,`${a.traceId}-${a.spanId}-${Li(a)?1:0}`)),o)}function ES(e){try{pe.sessionStorage.setItem(lm,JSON.stringify(e))}catch(s){rs&&L.warn("Could not store previous trace in sessionStorage",s)}}function jS(){var e;try{const s=(e=pe.sessionStorage)==null?void 0:e.getItem(lm);return JSON.parse(s)}catch{return}}function Li(e){return e.traceFlags===1}const SS="BrowserTracing",vS={...Bt,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,enableReportPageLoaded:!1,_experiments:{},...am},xS=(e={})=>{const s={name:void 0,source:void 0},r=pe.document,{enableInp:t,enableElementTiming:i,enableLongTask:o,enableLongAnimationFrame:a,_experiments:{enableInteractions:l,enableStandaloneClsSpans:c,enableStandaloneLcpSpans:u},beforeStartSpan:d,idleTimeout:m,finalTimeout:f,childSpanTimeout:h,markBackgroundSpan:g,traceFetch:p,traceXHR:N,trackFetchStreamPerformance:y,shouldCreateSpanForRequest:E,enableHTTPTimings:R,ignoreResourceSpans:A,ignorePerformanceApiSpans:_,instrumentPageLoad:C,instrumentNavigation:S,detectRedirects:I,linkPreviousTrace:F,consistentTraceSampling:U,enableReportPageLoaded:T,onRequestSpanStart:w,onRequestSpanEnd:v}={...vS,...e};let D,H,z;function $(O,V,M=!0){const B=V.op==="pageload",W=V.name,Q=d?d(V):V,me=Q.attributes||{};if(W!==Q.name&&(me[ps]="custom",Q.attributes=me),!M){const Me=ur();Wr({...Q,startTime:Me}).end(Me);return}s.name=Q.name,s.source=me[ps];const je=bc(Q,{idleTimeout:m,finalTimeout:f,childSpanTimeout:h,disableAutoFinish:B,beforeSpanEnd:Me=>{D==null||D(),Hp(Me,{recordClsOnPageloadSpan:!c,recordLcpOnPageloadSpan:!u,ignoreResourceSpans:A,ignorePerformanceApiSpans:_}),Sl(O,void 0);const Pe=Ee(),Ye=Pe.getPropagationContext();Pe.setPropagationContext({...Ye,traceId:je.spanContext().traceId,sampled:Ys(je),dsc:Ms(Me)}),B&&(z=void 0)},trimIdleSpanEndTimestamp:!T});B&&T&&(z=je),Sl(O,je);function ze(){r&&["interactive","complete"].includes(r.readyState)&&O.emit("idleSpanEnableAutoFinish",je)}B&&!T&&r&&(r.addEventListener("readystatechange",()=>{ze()}),ze())}return{name:SS,setup(O){if(mf(),D=Ap({recordClsStandaloneSpans:c||!1,recordLcpStandaloneSpans:u||!1,client:O}),t&&pN(),i&&rN(),a&&ce.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?Lp():o&&Op(),l&&Fp(),I&&r){const M=()=>{H=Ae()};addEventListener("click",M,{capture:!0}),addEventListener("keydown",M,{capture:!0,passive:!0})}function V(){const M=ct(O);M&&!ge(M).timestamp&&(rs&&L.log(`[Tracing] Finishing current active span with op: ${ge(M).op}`),M.setAttribute(rt,"cancelled"),M.end())}O.on("startNavigationSpan",(M,B)=>{if(ue()!==O)return;if(B!=null&&B.isRedirect){rs&&L.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),$(O,{op:"navigation.redirect",...M},!1);return}H=void 0,V(),ms().setPropagationContext({traceId:Is(),sampleRand:Math.random(),propagationSpanId:Ns()?void 0:Ds()});const W=Ee();W.setPropagationContext({traceId:Is(),sampleRand:Math.random(),propagationSpanId:Ns()?void 0:Ds()}),W.setSDKProcessingMetadata({normalizedRequest:void 0}),$(O,{op:"navigation",...M,parentSpan:null,forceTransaction:!0})}),O.on("startPageLoadSpan",(M,B={})=>{if(ue()!==O)return;V();const W=B.sentryTrace||jl("sentry-trace"),Q=B.baggage||jl("baggage"),me=sf(W,Q),je=Ee();je.setPropagationContext(me),Ns()||(je.getPropagationContext().propagationSpanId=Ds()),je.setSDKProcessingMetadata({normalizedRequest:lo()}),$(O,{op:"pageload",...M})}),O.on("endPageloadSpan",()=>{T&&z&&(z.setAttribute(rt,"reportPageLoaded"),z.end())})},afterAllSetup(O){let V=$r();if(F!=="off"&&bS(O,{linkPreviousTrace:F,consistentTraceSampling:U}),pe.location){if(C){const M=Qe();CS(O,{name:pe.location.pathname,startTime:M?M/1e3:void 0,attributes:{[ps]:"url",[Re]:"auto.pageload.browser"}})}S&&Sn(({to:M,from:B})=>{if(B===void 0&&(V==null?void 0:V.indexOf(M))!==-1){V=void 0;return}V=void 0;const W=ao(M),Q=ct(O),me=Q&&I&&_S(Q,H);TS(O,{name:(W==null?void 0:W.pathname)||pe.location.pathname,attributes:{[ps]:"url",[Re]:"auto.navigation.browser"}},{url:M,isRedirect:me})})}g&&gS(),l&&kS(O,m,f,h,s),t&&yN(),uS(O,{traceFetch:p,traceXHR:N,trackFetchStreamPerformance:y,tracePropagationTargets:O.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:E,enableHTTPTimings:R,onRequestSpanStart:w,onRequestSpanEnd:v})}}};function CS(e,s,r){e.emit("startPageLoadSpan",s,r),Ee().setTransactionName(s.name);const t=ct(e);return t&&e.emit("afterStartPageLoadSpan",t),t}function TS(e,s,r){const{url:t,isRedirect:i}=r||{};e.emit("beforeStartNavigationSpan",s,{isRedirect:i}),e.emit("startNavigationSpan",s,{isRedirect:i});const o=Ee();return o.setTransactionName(s.name),t&&!i&&o.setSDKProcessingMetadata({normalizedRequest:{...lo(),url:t}}),ct(e)}function jl(e){const s=pe.document,r=s==null?void 0:s.querySelector(`meta[name=${e}]`);return(r==null?void 0:r.getAttribute("content"))||void 0}function kS(e,s,r,t,i){const o=pe.document;let a;const l=()=>{const c="ui.action.click",u=ct(e);if(u){const d=ge(u).op;if(["navigation","pageload"].includes(d)){rs&&L.warn(`[Tracing] Did not create ${c} span because a pageload or navigation span is in progress.`);return}}if(a&&(a.setAttribute(rt,"interactionInterrupted"),a.end(),a=void 0),!i.name){rs&&L.warn(`[Tracing] Did not create ${c} transaction because _latestRouteName is missing.`);return}a=bc({name:i.name,op:c,attributes:{[ps]:i.source||"url"}},{idleTimeout:s,finalTimeout:r,childSpanTimeout:t})};o&&addEventListener("click",l,{capture:!0})}const cm="_sentry_idleSpan";function ct(e){return e[cm]}function Sl(e,s){Ze(e,cm,s)}const vl=1.5;function _S(e,s){const r=ge(e),t=ur(),i=r.start_timestamp;return!(t-i>vl||s&&t-s<=vl)}function DS(e){const s={...e};return Ac(s,"react"),jc("react",{version:j.version}),Cb(s)}function wS(){DS({dsn:"https://d2f7689e214c0de237646bb5fe8737be@o4510817165049856.ingest.de.sentry.io/4510817190019152",integrations:[xS(),iS({maskAllText:!0,blockAllMedia:!0})],tracesSampleRate:.1,replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1,environment:"production",release:"1.0.0",beforeSend(s,r){var t;if(s.request&&(delete s.request.cookies,s.request.headers&&(delete s.request.headers.Authorization,delete s.request.headers.authorization)),(t=s.request)!=null&&t.url)try{const i=new URL(s.request.url);i.searchParams.delete("token"),i.searchParams.delete("apikey"),s.request.url=i.toString()}catch{}return s},ignoreErrors:["top.GLOBALS","chrome-extension://","moz-extension://","ResizeObserver loop limit exceeded","ResizeObserver loop completed with undelivered notifications","NetworkError","Failed to fetch","Load failed","Non-Error promise rejection captured"]}),console.log(" Sentry initialized")}function ti(e){ya(e?{id:e.id,email:e.email,role:e.role}:null)}function um(e){vs(e)}const mm=j.createContext(null);function US({children:e}){const[s,r]=j.useState(null),[t,i]=j.useState(null),[o,a]=j.useState(null),[l,c]=j.useState([]),[u,d]=j.useState(null),[m,f]=j.useState(null),[h,g]=j.useState([]),[p,N]=j.useState(!0),y=async(w,v)=>{if(!w||!v)return[];const D=["learn","teach"];return g(D),D},E=()=>{const w=window.location.pathname;if(w.startsWith("/teach"))return"teach";if(w.startsWith("/learn"))return"learn";const v=localStorage.getItem("last_portal");return v==="teach"||v==="learn"?v:(t==null?void 0:t.role)==="instructor"?"teach":(t==null?void 0:t.role)==="student"?"learn":null},R=w=>{(w==="teach"||w==="learn")&&(f(w),localStorage.setItem("last_portal",w),w==="teach"?d(null):w==="learn"&&l.length>0&&!u&&d(l[0]))};j.useEffect(()=>{Xm().then(({session:v,user:D})=>{v&&D?(a(v),r(D),An().then(async({profile:H})=>{if(H){i(H),ti({id:D.id,email:D.email,role:H.role}),await y(D.id,H);const z=E();f(z)}N(!1)})):N(!1)});const w=Zm((v,D)=>{a(D),r((D==null?void 0:D.user)||null),D!=null&&D.user?An().then(async({profile:H})=>{if(H){i(H),ti({id:D.user.id,email:D.user.email,role:H.role}),await y(D.user.id,H);const z=E();f(z)}}):(i(null),c([]),d(null),g([]),f(null))});return()=>{w==null||w.unsubscribe()}},[]);const A=async(w,v)=>{const{user:D,session:H,profile:z,error:$}=await Jm(w,v);if($)return console.error("Login error:",$),{error:$};if(r(D),a(H),i(z),D&&z){await y(D.id,z);const O=E();f(O)}return{user:D,profile:z,error:null}},_=async w=>{const{user:v,session:D,error:H}=await Gm(w);if(H)return console.error("Registration error:",H),{error:H};if(r(v),a(D),v){const{profile:z}=await An();if(i(z),z){await y(v.id,z);const $=E();f($)}}return{user:v,error:null}},C=async w=>{if(console.log(" Adding student:",w),console.log(" Current user:",s==null?void 0:s.id,"Role:",t==null?void 0:t.role),!s||(t==null?void 0:t.role)!=="parent")return console.error(" Only parents can add students"),{error:"Only parents can add students"};try{const v={parent_id:s.id,first_name:w.firstName,last_name:(t==null?void 0:t.last_name)||w.lastName||"Student",age:parseInt(w.age),date_of_birth:w.dateOfBirth||null,grade_level:w.gradeLevel||null,neurodiversity_profile:w.neurodiversityProfile||[],other_needs:w.otherNeeds||null,interests:w.interests||[],bio:w.bio||null};console.log(" Student record to insert:",v);const{data:D,error:H}=await x.from("students").insert([v]).select().single();if(console.log(" Insert result:",{newStudent:D,error:H}),H)return console.error(" Error creating student:",H),{error:H.message};const z=[...l,D];return c(z),console.log(" Students updated:",z.length),z.length===1&&(d(D),console.log(" Set as active student:",D)),{student:D,error:null}}catch(v){return console.error(" Student creation error:",v),{error:v.message}}},S=async(w,v)=>{if(!s||(t==null?void 0:t.role)!=="parent")return console.error("Only parents can update students"),{error:"Only parents can update students"};try{const{data:D,error:H}=await x.from("students").update(v).eq("id",w).eq("parent_id",s.id).select().single();if(H)return console.error("Error updating student:",H),{error:H.message};const z=l.map($=>$.id===w?D:$);return c(z),(u==null?void 0:u.id)===w&&d(D),{student:D,error:null}}catch(D){return console.error("Student update error:",D),{error:D.message}}},I=async w=>{if(!s||(t==null?void 0:t.role)!=="parent")return console.error("Only parents can delete students"),{error:"Only parents can delete students"};try{const{error:v}=await x.from("students").delete().eq("id",w).eq("parent_id",s.id);if(v)return console.error("Error deleting student:",v),{error:v.message};const D=l.filter(H=>H.id!==w);if(c(D),(u==null?void 0:u.id)===w){const H=D[0]||null;d(H)}return{error:null}}catch(v){return console.error("Student deletion error:",v),{error:v.message}}},F=w=>{if(console.log(" switchStudent called with:",w),console.log(" Available students:",l),w===null)console.log(" Switching to parent (activeStudent = null)"),d(null);else{const v=l.find(D=>D.id===w);console.log(" Found student:",v),v?(console.log(" Setting active student:",v),d(v)):console.error(" Student not found with ID:",w)}},U=async()=>{},T=async()=>{const{error:w}=await Km();return w?(console.error("Logout error:",w),{error:w}):(ti(null),r(null),a(null),i(null),c([]),d(null),f(null),g([]),{error:null})};return p?n.jsxDEV("div",{children:"Loading..."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/context/AuthContext.jsx",lineNumber:409,columnNumber:12},this):n.jsxDEV(mm.Provider,{value:{user:s,profile:t,session:o,students:l,activeStudent:u,activePortal:m,availablePortals:h,loading:p,login:A,register:_,logout:T,addStudent:C,updateStudent:S,deleteStudent:I,switchStudent:F,refreshStudents:U,detectAvailablePortals:y,getActivePortal:E,switchPortal:R},children:e},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/context/AuthContext.jsx",lineNumber:413,columnNumber:5},this)}function ke(){const e=j.useContext(mm);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function dm({size:e="medium"}){const s={small:{height:50},medium:{height:80},large:{height:100}},{height:r}=s[e];return n.jsxDEV("div",{style:{display:"flex",alignItems:"center"},children:n.jsxDEV("img",{src:"/uniquebrains-logo.png.png",alt:"UniqueBrains",style:{height:`${r}px`,width:"auto",backgroundColor:"transparent"},onError:t=>{t.target.style.display="none",t.target.parentElement.innerHTML='<span style="font-size: 1.5rem; font-weight: 700; background: linear-gradient(135deg, #6366f1 0%, #ec4899 50%, #f59e0b 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">UniqueBrains</span>'}},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Logo.jsx",lineNumber:12,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Logo.jsx",lineNumber:11,columnNumber:5},this)}function Mo({currentPortal:e,availablePortals:s,compact:r=!1}){if(!s||s.length===0)return null;const t=e==="teach"?"learn":"teach",i=t==="teach"?"Teaching Portal":"Learning Portal",o=t==="teach"?"":"",a=l=>{l.preventDefault(),window.location.href=`/${t}/dashboard`};return r?n.jsxDEV("div",{className:"portal-switcher compact",children:n.jsxDEV("a",{href:`/${t}/dashboard`,onClick:a,className:"portal-switch-link",children:["Switch to ",i," ",o]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/PortalSwitcher.jsx",lineNumber:25,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/PortalSwitcher.jsx",lineNumber:24,columnNumber:7},this):n.jsxDEV("div",{className:"portal-switcher",children:[n.jsxDEV("span",{className:"portal-switcher-label",children:["Currently in ",e==="teach"?"Teaching":"Learning"," Portal"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/PortalSwitcher.jsx",lineNumber:35,columnNumber:7},this),n.jsxDEV("a",{href:`/${t}/dashboard`,onClick:a,className:"portal-switch-link",children:[n.jsxDEV("span",{className:"portal-switch-icon",children:o},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/PortalSwitcher.jsx",lineNumber:37,columnNumber:9},this),n.jsxDEV("span",{children:["Switch to ",i]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/PortalSwitcher.jsx",lineNumber:38,columnNumber:9},this),n.jsxDEV("span",{className:"portal-switch-arrow",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/PortalSwitcher.jsx",lineNumber:39,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/PortalSwitcher.jsx",lineNumber:36,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/PortalSwitcher.jsx",lineNumber:34,columnNumber:5},this)}function VS(){const{user:e,profile:s,students:r,activeStudent:t,activePortal:i,availablePortals:o,switchStudent:a,logout:l}=ke(),c=bs(),[u,d]=j.useState(!1),[m,f]=j.useState(!1),h=()=>{l(),c("/login"),d(!1)},g=()=>{d(!1)};return n.jsxDEV("div",{className:"layout",children:[n.jsxDEV("header",{className:"header",children:n.jsxDEV("div",{className:"header-content",children:[n.jsxDEV(he,{to:"/",className:"logo",onClick:g,children:n.jsxDEV(dm,{size:"medium"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:35,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:34,columnNumber:11},this),n.jsxDEV("button",{className:"mobile-menu-toggle",onClick:()=>d(!u),"aria-label":"Toggle menu",children:u?"":""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:38,columnNumber:11},this),n.jsxDEV("nav",{className:`nav ${u?"nav-open":""}`,children:[n.jsxDEV(he,{to:"/marketplace",className:"nav-link",onClick:g,children:"Marketplace"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:47,columnNumber:13},this),e&&n.jsxDEV(n.Fragment,{children:[i==="teach"&&n.jsxDEV(n.Fragment,{children:n.jsxDEV(he,{to:"/teach/dashboard",className:"nav-link",onClick:g,children:"Dashboard"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:54,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:53,columnNumber:19},this),i==="learn"&&n.jsxDEV(n.Fragment,{children:n.jsxDEV(he,{to:"/learn/dashboard",className:"nav-link",onClick:g,children:"My Courses"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:60,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:59,columnNumber:19},this),!i&&(s==null?void 0:s.role)==="student"&&n.jsxDEV(n.Fragment,{children:n.jsxDEV(he,{to:"/learn/dashboard",className:"nav-link",onClick:g,children:"My Courses"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:67,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:66,columnNumber:19},this),!i&&(s==null?void 0:s.role)==="instructor"&&n.jsxDEV(n.Fragment,{children:[n.jsxDEV(he,{to:"/teach/dashboard",className:"nav-link",onClick:g,children:"Dashboard"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:73,columnNumber:21},this),n.jsxDEV(he,{to:"/teach/create-course",className:"nav-link",onClick:g,children:"Create Course"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:74,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:72,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:50,columnNumber:15},this),n.jsxDEV("div",{className:"mobile-header-actions",children:e?n.jsxDEV(n.Fragment,{children:[n.jsxDEV("div",{className:"mobile-user-info",children:[n.jsxDEV("span",{className:"user-name",children:[s==null?void 0:s.first_name," ",s==null?void 0:s.last_name]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:84,columnNumber:21},this),n.jsxDEV("span",{className:"user-role",children:["(",s==null?void 0:s.role,")"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:85,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:83,columnNumber:19},this),n.jsxDEV(he,{to:"/profile",className:"btn-secondary",onClick:g,children:"Profile"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:87,columnNumber:19},this),n.jsxDEV("button",{onClick:h,className:"btn-secondary",children:"Logout"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:88,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:82,columnNumber:17},this):n.jsxDEV(n.Fragment,{children:[n.jsxDEV(he,{to:"/login",className:"btn-secondary",onClick:g,children:"Login"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:92,columnNumber:19},this),n.jsxDEV(he,{to:"/register",className:"btn-primary",onClick:g,children:"Sign Up"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:93,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:91,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:80,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:46,columnNumber:11},this),n.jsxDEV("div",{className:"desktop-header-actions",children:e?n.jsxDEV("div",{className:"user-menu",children:[n.jsxDEV("span",{className:"user-name",children:[s==null?void 0:s.first_name," ",s==null?void 0:s.last_name]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:102,columnNumber:17},this),n.jsxDEV(he,{to:"/profile",className:"btn-secondary",children:"Profile"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:103,columnNumber:17},this),n.jsxDEV("button",{onClick:h,className:"btn-secondary",children:"Logout"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:104,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:101,columnNumber:15},this):n.jsxDEV(n.Fragment,{children:[n.jsxDEV(he,{to:"/login",className:"btn-secondary",children:"Login"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:108,columnNumber:17},this),n.jsxDEV(he,{to:"/register",className:"btn-primary",children:"Sign Up"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:109,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:107,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:99,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:33,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:32,columnNumber:7},this),n.jsxDEV("main",{className:"main-content",children:n.jsxDEV(Om,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:117,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:116,columnNumber:7},this),n.jsxDEV("footer",{className:"footer",children:n.jsxDEV("div",{className:"footer-content",children:[e&&o&&o.length>1&&n.jsxDEV("div",{className:"footer-portal-switcher",children:n.jsxDEV(Mo,{currentPortal:i,availablePortals:o,compact:!0},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:125,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:124,columnNumber:13},this),n.jsxDEV("p",{children:" 2025 UniqueBrains. Where every brain learns differently."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:133,columnNumber:11},this),n.jsxDEV("div",{className:"footer-links",children:[n.jsxDEV(he,{to:"/privacy-policy",className:"footer-link",children:"Privacy Policy"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:135,columnNumber:13},this),n.jsxDEV("span",{className:"footer-separator",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:136,columnNumber:13},this),n.jsxDEV(he,{to:"/terms-of-service",className:"footer-link",children:"Terms of Service"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:137,columnNumber:13},this),n.jsxDEV("span",{className:"footer-separator",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:138,columnNumber:13},this),n.jsxDEV("a",{href:"mailto:hello@uniquebrains.org",className:"footer-link",children:"Contact Us"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:139,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:134,columnNumber:11},this),n.jsxDEV("div",{className:"footer-social",children:n.jsxDEV("a",{href:"https://www.instagram.com/ouruniquebrains",target:"_blank",rel:"noopener noreferrer",className:"social-link instagram-link","aria-label":"Follow us on Instagram",children:[n.jsxDEV("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"instagram-icon",children:[n.jsxDEV("defs",{children:n.jsxDEV("linearGradient",{id:"instagram-gradient",x1:"0%",y1:"100%",x2:"100%",y2:"0%",children:[n.jsxDEV("stop",{offset:"0%",style:{stopColor:"#FED373",stopOpacity:1}},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:158,columnNumber:21},this),n.jsxDEV("stop",{offset:"15%",style:{stopColor:"#F15245",stopOpacity:1}},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:159,columnNumber:21},this),n.jsxDEV("stop",{offset:"35%",style:{stopColor:"#D92E7F",stopOpacity:1}},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:160,columnNumber:21},this),n.jsxDEV("stop",{offset:"65%",style:{stopColor:"#9B36B7",stopOpacity:1}},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:161,columnNumber:21},this),n.jsxDEV("stop",{offset:"100%",style:{stopColor:"#515ECF",stopOpacity:1}},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:162,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:157,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:156,columnNumber:17},this),n.jsxDEV("path",{fill:"url(#instagram-gradient)",d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:165,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:149,columnNumber:15},this),"Follow us on Instagram"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:142,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:141,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:121,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:120,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/Layout.jsx",lineNumber:31,columnNumber:5},this)}function IS(){const{pathname:e}=Il();return j.useEffect(()=>{window.scrollTo(0,0)},[e]),null}function RS(){const{user:e}=ke(),[s,r]=j.useState("https://www.gofundme.com/f/help-me-support-autism-awareness-and-families-with-genai");return j.useEffect(()=>{(async()=>{try{const i=Intl.DateTimeFormat().resolvedOptions().timeZone;if(i.includes("Asia/Kolkata")||i.includes("Asia/Calcutta"))r("https://milaap.org/fundraisers/support-autistic-kids-1");else try{(await(await fetch("https://ipapi.co/json/")).json()).country_code==="IN"&&r("https://milaap.org/fundraisers/support-autistic-kids-1")}catch{console.log("Geolocation detection failed, using default link")}}catch{console.log("Country detection failed, using default link")}})()},[]),n.jsxDEV("div",{className:"landing-page",children:[n.jsxDEV("section",{className:"hero",children:n.jsxDEV("div",{className:"hero-content",children:[n.jsxDEV("h1",{className:"hero-title",children:n.jsxDEV("span",{className:"gradient-text",children:"UniqueBrains"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:46,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:45,columnNumber:11},this),n.jsxDEV("p",{className:"hero-tagline",children:"Where every brain learns differently"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:48,columnNumber:11},this),n.jsxDEV("p",{className:"hero-description",children:"A free learning marketplace connecting neurodivergent children with specialized instructors who understand and celebrate their unique learning styles."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:49,columnNumber:11},this),n.jsxDEV("div",{className:"hero-actions",children:[n.jsxDEV(he,{to:"/marketplace",className:"btn-primary-large",children:"Explore Courses"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:54,columnNumber:13},this),n.jsxDEV(he,{to:e?"/teach/create-course":"/register?role=instructor",className:"btn-primary-large",children:"Start Teaching"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:57,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:53,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:44,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:43,columnNumber:7},this),n.jsxDEV("section",{className:"mission",children:n.jsxDEV("div",{className:"mission-content",children:[n.jsxDEV("h2",{children:"Our Mission"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:69,columnNumber:11},this),n.jsxDEV("p",{children:["UniqueBrains is a ",n.jsxDEV("strong",{children:"100% free platform"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:71,columnNumber:31},this)," dedicated to making quality education accessible to neurodivergent children. We believe that every child deserves to learn in a way that honors their unique brain, without financial barriers."]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:70,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:68,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:67,columnNumber:7},this),n.jsxDEV("section",{className:"features",children:[n.jsxDEV("h2",{children:"What Makes Us Different"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:79,columnNumber:9},this),n.jsxDEV("div",{className:"features-grid",children:[n.jsxDEV("div",{className:"feature-card",children:[n.jsxDEV("div",{className:"feature-icon",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:82,columnNumber:13},this),n.jsxDEV("h3",{children:"Neurodiversity-First Design"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:83,columnNumber:13},this),n.jsxDEV("p",{children:"Built from the ground up with neurodivergent learners in mind. Clear interfaces, consistent patterns, and supportive guidance at every step."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:84,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:81,columnNumber:11},this),n.jsxDEV("div",{className:"feature-card",children:[n.jsxDEV("div",{className:"feature-icon",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:91,columnNumber:13},this),n.jsxDEV("h3",{children:"Specialized Instructors"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:92,columnNumber:13},this),n.jsxDEV("p",{children:"Connect with educators trained in neurodiversity-affirming practices who understand ADHD, Autism, Dyslexia, and other learning differences."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:93,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:90,columnNumber:11},this),n.jsxDEV("div",{className:"feature-card",children:[n.jsxDEV("div",{className:"feature-icon",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:100,columnNumber:13},this),n.jsxDEV("h3",{children:"Diverse Learning Paths"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:101,columnNumber:13},this),n.jsxDEV("p",{children:"From music and art to coding and science, explore courses designed for different learning styles and interests."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:102,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:99,columnNumber:11},this),n.jsxDEV("div",{className:"feature-card",children:[n.jsxDEV("div",{className:"feature-icon",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:109,columnNumber:13},this),n.jsxDEV("h3",{children:"Always Free"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:110,columnNumber:13},this),n.jsxDEV("p",{children:"No subscriptions, no hidden fees. Quality education for neurodivergent children should never be behind a paywall."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:111,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:108,columnNumber:11},this),n.jsxDEV("div",{className:"feature-card",children:[n.jsxDEV("div",{className:"feature-icon",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:118,columnNumber:13},this),n.jsxDEV("h3",{children:"Flexible Scheduling"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:119,columnNumber:13},this),n.jsxDEV("p",{children:"Choose between group classes or one-on-one sessions. Learn at your own pace, on your own schedule."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:120,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:117,columnNumber:11},this),n.jsxDEV("div",{className:"feature-card",children:[n.jsxDEV("div",{className:"feature-icon",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:127,columnNumber:13},this),n.jsxDEV("h3",{children:"Celebrate Differences"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:128,columnNumber:13},this),n.jsxDEV("p",{children:`We don't try to "fix" anyone. We celebrate neurodiversity and help every child discover their unique strengths.`},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:129,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:126,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:80,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:78,columnNumber:7},this),n.jsxDEV("section",{className:"support-section",children:n.jsxDEV("div",{className:"support-content",children:[n.jsxDEV("h2",{children:"Help Us Keep UniqueBrains Free"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:139,columnNumber:11},this),n.jsxDEV("p",{children:"Running a platform takes resourcesservers, development, and support. Your donation helps us:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:140,columnNumber:11},this),n.jsxDEV("ul",{className:"support-list",children:[n.jsxDEV("li",{children:" Keep the platform 100% free for all families"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:144,columnNumber:13},this),n.jsxDEV("li",{children:" Add new features and courses"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:145,columnNumber:13},this),n.jsxDEV("li",{children:" Support instructors who volunteer their time"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:146,columnNumber:13},this),n.jsxDEV("li",{children:" Maintain and improve our technology"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:147,columnNumber:13},this),n.jsxDEV("li",{children:" Reach more neurodivergent children worldwide"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:148,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:143,columnNumber:11},this),n.jsxDEV("div",{className:"support-actions",children:[n.jsxDEV("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"btn-donate",children:"Donate Now "},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:151,columnNumber:13},this),n.jsxDEV(he,{to:"/register?role=instructor",className:"btn-volunteer",children:"Volunteer as Instructor"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:159,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:150,columnNumber:11},this),n.jsxDEV("p",{className:"support-note",children:"Every contribution, no matter how small, makes a difference in a child's learning journey."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:166,columnNumber:11},this),n.jsxDEV("p",{className:"volunteer-note",children:[n.jsxDEV("strong",{children:"Are you an instructor?"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:170,columnNumber:13},this)," Share your expertise and make a difference! We're looking for passionate educators to volunteer their time teaching neurodivergent children."]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:169,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:138,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:137,columnNumber:7},this),n.jsxDEV("section",{className:"cta-section",children:n.jsxDEV("div",{className:"cta-content",children:[n.jsxDEV("h2",{children:"Ready to Start Learning?"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:178,columnNumber:11},this),n.jsxDEV("p",{children:"Join our community of unique learners and supportive instructors today."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:179,columnNumber:11},this),n.jsxDEV("div",{className:"cta-actions",children:[n.jsxDEV(he,{to:"/register",className:"btn-primary-large",children:"Sign Up Free"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:181,columnNumber:13},this),n.jsxDEV(he,{to:"/marketplace",className:"btn-secondary-large",children:"Browse Courses"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:184,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:180,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:177,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:176,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/LandingPage.jsx",lineNumber:42,columnNumber:5},this)}function fm({provider:e,children:s,className:r=""}){const t=async()=>{try{const i={redirectTo:`${window.location.origin}/auth/callback`,queryParams:{access_type:"offline",prompt:"consent"}};e==="google"&&(i.scopes="email profile");const{data:o,error:a}=await x.auth.signInWithOAuth({provider:e,options:i});if(a)throw a}catch(i){console.error(`OAuth ${e} error:`,i),alert(`Failed to sign in with ${e}: ${i.message}`)}};return n.jsxDEV("button",{onClick:t,className:`oauth-button oauth-button-${e} ${r}`,type:"button",children:s},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/OAuthButton.jsx",lineNumber:44,columnNumber:5},this)}function MS(){const[e,s]=j.useState(""),[r,t]=j.useState(""),[i,o]=j.useState(""),{login:a}=ke(),l=bs(),c=async u=>{u.preventDefault(),o("");try{const d=await a(e,r);d.error?d.error.message&&d.error.message.includes("Email not confirmed")?o("Please verify your email address. Check your inbox for the confirmation link."):o(d.error.message||"Invalid credentials"):d.profile&&(d.profile.role==="instructor"?l("/teach/dashboard"):d.profile.role==="student"?l("/learn/dashboard"):l("/marketplace"))}catch(d){d.message&&d.message.includes("Email not confirmed")?o("Please verify your email address. Check your inbox for the confirmation link."):o("Invalid credentials")}};return n.jsxDEV("div",{className:"auth-container",children:n.jsxDEV("div",{className:"auth-card",children:[n.jsxDEV("div",{className:"auth-logo",children:n.jsxDEV(dm,{size:"medium"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Login.jsx",lineNumber:52,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Login.jsx",lineNumber:51,columnNumber:9},this),n.jsxDEV("h2",{children:"Welcome Back"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Login.jsx",lineNumber:54,columnNumber:9},this),n.jsxDEV("p",{className:"auth-subtitle",children:"Sign in to continue your learning journey"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Login.jsx",lineNumber:55,columnNumber:9},this),i&&n.jsxDEV("div",{className:"error-message",children:i},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Login.jsx",lineNumber:57,columnNumber:19},this),n.jsxDEV("div",{className:"oauth-section",children:n.jsxDEV(fm,{provider:"google",children:"Continue with Google"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Login.jsx",lineNumber:60,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Login.jsx",lineNumber:59,columnNumber:9},this),n.jsxDEV("div",{className:"divider",children:n.jsxDEV("span",{children:"or"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Login.jsx",lineNumber:66,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Login.jsx",lineNumber:65,columnNumber:9},this),n.jsxDEV("form",{onSubmit:c,className:"auth-form",children:[n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"email",children:"Email"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Login.jsx",lineNumber:71,columnNumber:13},this),n.jsxDEV("input",{id:"email",type:"email",value:e,onChange:u=>s(u.target.value),required:!0,placeholder:"your@email.com"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Login.jsx",lineNumber:72,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Login.jsx",lineNumber:70,columnNumber:11},this),n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"password",children:"Password"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Login.jsx",lineNumber:83,columnNumber:13},this),n.jsxDEV("input",{id:"password",type:"password",value:r,onChange:u=>t(u.target.value),required:!0,placeholder:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Login.jsx",lineNumber:84,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Login.jsx",lineNumber:82,columnNumber:11},this),n.jsxDEV("button",{type:"submit",className:"btn-primary btn-full",children:"Sign In"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Login.jsx",lineNumber:94,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Login.jsx",lineNumber:69,columnNumber:9},this),n.jsxDEV("p",{className:"auth-footer",children:["Don't have an account? ",n.jsxDEV(he,{to:"/register",children:"Sign up"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Login.jsx",lineNumber:100,columnNumber:34},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Login.jsx",lineNumber:99,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Login.jsx",lineNumber:50,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Login.jsx",lineNumber:49,columnNumber:5},this)}function PS(){const[e]=$i(),s=e.get("role"),[r,t]=j.useState(s==="instructor"?"instructor":"student"),[i,o]=j.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",role:s==="instructor"?"instructor":"student"}),[a,l]=j.useState(""),[c,u]=j.useState(!1),{register:d}=ke();bs(),j.useEffect(()=>{o(h=>({...h,role:r}))},[r]);const m=h=>{o({...i,[h.target.name]:h.target.value})},f=async h=>{if(h.preventDefault(),l(""),i.password!==i.confirmPassword){l("Passwords do not match");return}const g={...i,role:r};try{const p=await d(g);p.error?l("Registration failed: "+p.error.message):u(!0)}catch{l("Registration failed")}};return c?n.jsxDEV("div",{className:"auth-container",children:n.jsxDEV("div",{className:"auth-card",children:n.jsxDEV("div",{className:"success-message-container",children:[n.jsxDEV("div",{className:"success-icon",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:67,columnNumber:13},this),n.jsxDEV("h2",{children:"Check Your Email!"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:68,columnNumber:13},this),n.jsxDEV("p",{className:"success-message",children:["We've sent a confirmation email to ",n.jsxDEV("strong",{children:i.email},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:70,columnNumber:50},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:69,columnNumber:13},this),n.jsxDEV("p",{className:"success-instructions",children:"Please click the link in the email to verify your account. Once verified, you can log in and complete your profile setup!"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:72,columnNumber:13},this),n.jsxDEV("div",{className:"success-actions",children:n.jsxDEV(he,{to:"/login",className:"btn-primary",children:"Go to Login"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:77,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:76,columnNumber:13},this),n.jsxDEV("p",{className:"success-note",children:["Didn't receive the email? Check your spam folder or"," ",n.jsxDEV("a",{href:"#",onClick:h=>{h.preventDefault(),u(!1)},children:"try again"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:83,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:81,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:66,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:65,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:64,columnNumber:7},this):n.jsxDEV("div",{className:"auth-container",children:n.jsxDEV("div",{className:"auth-card",children:[n.jsxDEV("h2",{children:"Create Your Account"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:96,columnNumber:9},this),n.jsxDEV("p",{className:"auth-subtitle",children:"Join UniqueBrains and start your journey"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:97,columnNumber:9},this),a&&n.jsxDEV("div",{className:"error-message",children:a},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:101,columnNumber:19},this),n.jsxDEV("div",{className:"role-selection",children:[n.jsxDEV("p",{className:"role-label",children:"I want to sign up as:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:104,columnNumber:13},this),n.jsxDEV("div",{className:"role-cards",children:[n.jsxDEV("div",{className:`role-card ${r==="student"?"selected":""}`,onClick:()=>t("student"),children:[n.jsxDEV("div",{className:"role-icon",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:110,columnNumber:17},this),n.jsxDEV("h3",{children:"Student"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:111,columnNumber:17},this),n.jsxDEV("p",{children:"Enroll in courses and learn"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:112,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:106,columnNumber:15},this),n.jsxDEV("div",{className:`role-card ${r==="instructor"?"selected":""}`,onClick:()=>t("instructor"),children:[n.jsxDEV("div",{className:"role-icon",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:118,columnNumber:17},this),n.jsxDEV("h3",{children:"Instructor"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:119,columnNumber:17},this),n.jsxDEV("p",{children:"Teach and inspire"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:120,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:114,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:105,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:103,columnNumber:9},this),n.jsxDEV("div",{className:"oauth-section",children:[n.jsxDEV("button",{type:"button",className:"oauth-button oauth-button-google",onClick:()=>{console.log(" Storing OAuth role preference:",r),localStorage.setItem("oauth_role_preference",r),document.querySelector(".oauth-button-google-hidden").click()},children:[n.jsxDEV("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n.jsxDEV("path",{d:"M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z",fill:"#4285F4"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:138,columnNumber:19},this),n.jsxDEV("path",{d:"M9.003 18c2.43 0 4.467-.806 5.956-2.18L12.05 13.56c-.806.54-1.836.86-3.047.86-2.344 0-4.328-1.584-5.036-3.711H.96v2.332C2.44 15.983 5.485 18 9.003 18z",fill:"#34A853"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:139,columnNumber:19},this),n.jsxDEV("path",{d:"M3.964 10.712c-.18-.54-.282-1.117-.282-1.71 0-.593.102-1.17.282-1.71V4.96H.957C.347 6.175 0 7.55 0 9.002c0 1.452.348 2.827.957 4.042l3.007-2.332z",fill:"#FBBC05"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:140,columnNumber:19},this),n.jsxDEV("path",{d:"M9.003 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.464.891 11.426 0 9.003 0 5.485 0 2.44 2.017.96 4.958L3.967 7.29c.708-2.127 2.692-3.71 5.036-3.71z",fill:"#EA4335"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:141,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:137,columnNumber:17},this),"Sign up with Google as ",r==="instructor"?"Instructor":"Student"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:126,columnNumber:15},this),n.jsxDEV("div",{style:{display:"none"},children:n.jsxDEV(fm,{provider:"google",className:"oauth-button-google-hidden",children:"Hidden"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:148,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:147,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:125,columnNumber:9},this),n.jsxDEV("div",{className:"divider",children:n.jsxDEV("span",{children:"or"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:155,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:154,columnNumber:9},this),n.jsxDEV("form",{onSubmit:f,className:"auth-form",children:[n.jsxDEV("div",{className:"form-row",children:[n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"firstName",children:"First Name"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:161,columnNumber:15},this),n.jsxDEV("input",{id:"firstName",name:"firstName",type:"text",value:i.firstName,onChange:m,required:!0},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:162,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:160,columnNumber:13},this),n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"lastName",children:"Last Name"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:173,columnNumber:15},this),n.jsxDEV("input",{id:"lastName",name:"lastName",type:"text",value:i.lastName,onChange:m,required:!0},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:174,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:172,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:159,columnNumber:11},this),n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"email",children:"Email"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:186,columnNumber:13},this),n.jsxDEV("input",{id:"email",name:"email",type:"email",value:i.email,onChange:m,required:!0},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:187,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:185,columnNumber:11},this),n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"password",children:"Password"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:198,columnNumber:13},this),n.jsxDEV("input",{id:"password",name:"password",type:"password",value:i.password,onChange:m,required:!0},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:199,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:197,columnNumber:11},this),n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"confirmPassword",children:"Confirm Password"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:210,columnNumber:13},this),n.jsxDEV("input",{id:"confirmPassword",name:"confirmPassword",type:"password",value:i.confirmPassword,onChange:m,required:!0},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:211,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:209,columnNumber:11},this),n.jsxDEV("button",{type:"submit",className:"btn-primary btn-full",children:"Create Account"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:221,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:158,columnNumber:9},this),n.jsxDEV("p",{className:"auth-footer",children:["Already have an account? ",n.jsxDEV(he,{to:"/login",children:"Sign in"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:227,columnNumber:36},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:226,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:95,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Register.jsx",lineNumber:94,columnNumber:5},this)}function hm({rating:e,onRate:s,size:r="medium"}){const t=[1,2,3,4,5];return n.jsxDEV("div",{className:`star-rating ${r}`,children:t.map(i=>n.jsxDEV("span",{className:`star ${i<=e?"filled":""} ${s?"interactive":""}`,onClick:()=>s&&s(i),children:""},i,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/StarRating.jsx",lineNumber:9,columnNumber:9},this))},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/StarRating.jsx",lineNumber:7,columnNumber:5},this)}function AS(e){const s={"performing-arts":["#f093fb","#f5576c"],"visual-arts":["#fa709a","#fee140"],parenting:["#667eea","#764ba2"],academics:["#4facfe","#00f2fe"],language:["#ff6b6b","#feca57"],spirituality:["#43e97b","#38f9d7"],lifeskills:["#feca57","#ff6b6b"],default:["#667eea","#764ba2"]},r=s[e]||s.default;return{gradient:r,style:{background:`linear-gradient(135deg, ${r[0]} 0%, ${r[1]} 100%)`,display:"flex",alignItems:"center",justifyContent:"center",color:"white"}}}function OS(e){const s={"performing-arts":"","visual-arts":"",parenting:"",academics:"",language:"",spirituality:"",lifeskills:"",default:""};return s[e]||s.default}function LS({course:e}){const s=e.enrollmentLimit&&e.currentEnrollment>=e.enrollmentLimit,r=e.enrollmentLimit?e.enrollmentLimit-e.currentEnrollment:null,t=AS(e.category),i=OS(e.category);return n.jsxDEV(he,{to:`/courses/${e.id}`,className:"course-card",children:[n.jsxDEV("div",{className:"course-image",children:[n.jsxDEV("div",{className:"generated-image",style:t.style,children:n.jsxDEV("div",{className:"category-icon-large",children:i},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/CourseCard.jsx",lineNumber:16,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/CourseCard.jsx",lineNumber:15,columnNumber:9},this),e.price===0&&n.jsxDEV("span",{className:"free-badge",children:"Free"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/CourseCard.jsx",lineNumber:18,columnNumber:32},this),s&&n.jsxDEV("span",{className:"full-badge",children:"Class Full"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/CourseCard.jsx",lineNumber:19,columnNumber:20},this),!s&&r!==null&&r<=3&&r>0&&n.jsxDEV("span",{className:"spots-badge",children:[r," spots left"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/CourseCard.jsx",lineNumber:21,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/CourseCard.jsx",lineNumber:14,columnNumber:7},this),n.jsxDEV("div",{className:"course-content",children:[n.jsxDEV("div",{className:"course-category",children:e.category},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/CourseCard.jsx",lineNumber:26,columnNumber:9},this),n.jsxDEV("h3",{className:"course-title",children:e.title},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/CourseCard.jsx",lineNumber:27,columnNumber:9},this),n.jsxDEV("p",{className:"course-description",children:e.description},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/CourseCard.jsx",lineNumber:28,columnNumber:9},this),n.jsxDEV("div",{className:"course-instructor",children:n.jsxDEV("span",{children:["By ",e.instructorName]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/CourseCard.jsx",lineNumber:31,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/CourseCard.jsx",lineNumber:30,columnNumber:9},this),n.jsxDEV("div",{className:"course-footer",children:[n.jsxDEV("div",{className:"course-rating",children:[n.jsxDEV(hm,{rating:e.averageRating},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/CourseCard.jsx",lineNumber:36,columnNumber:13},this),n.jsxDEV("span",{className:"rating-count",children:["(",e.totalRatings,")"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/CourseCard.jsx",lineNumber:37,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/CourseCard.jsx",lineNumber:35,columnNumber:11},this),n.jsxDEV("div",{className:"course-price",children:e.price===0?"Free":`$${e.price}`},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/CourseCard.jsx",lineNumber:40,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/CourseCard.jsx",lineNumber:34,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/CourseCard.jsx",lineNumber:25,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/CourseCard.jsx",lineNumber:13,columnNumber:5},this)}class gm extends Error{constructor(s,r,t){super(s),this.name="APIError",this.code=r,this.details=t}}function FS(e,s={}){const r=new gm(e.message||"An error occurred",e.code||"UNKNOWN",e.details||{});return gt(r,{tags:{errorType:"supabase",errorCode:e.code||"UNKNOWN",operation:s.operation},contexts:{supabase:{...s,hint:e.hint,details:e.details}}}),console.error("Supabase Error:",{error:r,context:s,originalError:e}),r}function pm(e){if(e instanceof gm)switch(e.code){case"PGRST116":return"No data found. Please try again.";case"PGRST301":return"You do not have permission to access this resource.";case"NETWORK_ERROR":return"Network error. Please check your internet connection.";case"23505":return"This item already exists.";case"23503":return"Cannot complete this action due to related data.";default:return e.message||"An unexpected error occurred."}return e.message||"An unexpected error occurred."}async function $S(e,s){var t;if(!s)throw new Error("Authentication required to create a course");const r=["title","description","category","courseType"];for(const i of r)if(!e[i])throw new Error(`${i} is required`);try{const i={title:e.title.trim(),description:e.description.trim(),category:e.category,course_type:e.courseType,price:0,session_duration:e.sessionDuration?parseInt(e.sessionDuration):null,enrollment_limit:e.enrollmentLimit?parseInt(e.enrollmentLimit):null,is_self_paced:e.isSelfPaced||!1,instructor_id:s.id,status:"published",is_published:!0,timezone:e.timezone||"America/New_York",meeting_link:e.meetingLink||null,start_date:e.startDate||null,end_date:e.endDate||null,has_end_date:e.hasEndDate||!1,session_time:e.sessionTime||null,selected_days:e.selectedDays||null,frequency:e.frequency||"weekly"},{data:o,error:a}=await x.from("courses").insert([i]).select().single();if(a)throw console.error("Course creation error:",a),new Error(`Failed to create course: ${a.message}`);let l=[];return e.courseType==="group"&&!e.isSelfPaced&&e.startDate&&((t=e.selectedDays)==null?void 0:t.length)>0&&(l=await BS(o.id,e)),{course:o,sessions:l,message:"Course created and published successfully! Students can now enroll."}}catch(i){throw console.error("Error in createCourse:",i),i}}async function BS(e,s){const r=[],t=new Date(s.startDate),i=s.hasEndDate&&s.endDate,o=i?new Date(s.endDate):null,a=i?1e3:5;let l=new Date(t),c=1,u=0;for(;u<a&&(!o||l<=o);){const d=l.toLocaleDateString("en-US",{weekday:"long"});if(s.selectedDays.includes(d)){const m=new Date(l),[f,h]=s.sessionTime.split(":");m.setHours(parseInt(f),parseInt(h),0,0),r.push({course_id:e,title:`Topic ${c}`,description:"",session_date:m.toISOString(),duration_minutes:parseInt(s.sessionDuration),meeting_link:s.meetingLink||"",status:"scheduled"}),c++,u++}l.setDate(l.getDate()+1)}if(r.length>0){const{data:d,error:m}=await x.from("sessions").insert(r).select();return m?(console.error("Error creating sessions:",m),[]):(console.log(`Created ${d.length} sessions for course ${e}`),d)}return[]}async function qS(e){if(!e)throw new Error("Instructor ID is required");try{const{data:s,error:r}=await x.from("courses").select(`
        *,
        enrollments!inner(count),
        sessions(count)
      `).eq("instructor_id",e).neq("enrollments.status","dropped").order("created_at",{ascending:!1});if(r)throw console.error("Error fetching instructor courses:",r),new Error(`Failed to fetch courses: ${r.message}`);return s||[]}catch(s){throw console.error("Error in getInstructorCourses:",s),s}}async function Nm(){try{vs({category:"api",message:"Fetching published courses",level:"info"});const{data:e,error:s}=await x.from("courses").select(`
        *,
        profiles!instructor_id(id, first_name, last_name, avatar_url),
        enrollments!left(count),
        sessions(count)
      `).eq("status","published").eq("is_published",!0).not("enrollments.status","eq","dropped").order("created_at",{ascending:!1});if(s)throw FS(s,{operation:"getAllPublishedCourses",table:"courses"});const r=(e||[]).map(i=>{var o,a,l,c;return{...i,instructorName:i.profiles?`${i.profiles.first_name} ${i.profiles.last_name}`.trim():"Unknown Instructor",currentEnrollment:((a=(o=i.enrollments)==null?void 0:o[0])==null?void 0:a.count)||0,totalSessions:((c=(l=i.sessions)==null?void 0:l[0])==null?void 0:c.count)||0,sessionFrequency:i.frequency||"weekly"}});return await Promise.all(r.map(async i=>{try{const{data:o}=await x.from("reviews").select("rating").eq("course_id",i.id).eq("is_published",!0),a=(o==null?void 0:o.length)||0,l=a>0?Math.round(o.reduce((c,u)=>c+u.rating,0)/a*10)/10:0;return{...i,averageRating:l,totalRatings:a}}catch(o){return console.error(`Error fetching ratings for course ${i.id}:`,o),{...i,averageRating:0,totalRatings:0}}}))}catch(e){throw console.error("Error in getAllPublishedCourses:",e),e}}async function HS(e){var s,r,t,i,o;if(!e)throw new Error("Course ID is required");try{const{data:a,error:l}=await x.from("courses").select(`
        *,
        profiles!instructor_id(id, first_name, last_name, avatar_url, bio, expertise),
        enrollments!left(count),
        sessions(*)
      `).eq("id",e).not("enrollments.status","eq","dropped").single();if(l)throw console.error("Error fetching course:",l),new Error(`Failed to fetch course: ${l.message}`);const{data:c}=await x.from("reviews").select("rating").eq("course_id",e).eq("is_published",!0),u=(c==null?void 0:c.length)||0,d=u>0?Math.round(c.reduce((f,h)=>f+h.rating,0)/u*10)/10:0;return{...a,instructorName:a.profiles?`${a.profiles.first_name} ${a.profiles.last_name}`.trim():"Unknown Instructor",instructorBio:((s=a.profiles)==null?void 0:s.bio)||"",instructorExpertise:((r=a.profiles)==null?void 0:r.expertise)||[],currentEnrollment:((i=(t=a.enrollments)==null?void 0:t[0])==null?void 0:i.count)||0,totalSessions:((o=a.sessions)==null?void 0:o.length)||0,averageRating:d,totalRatings:u,sessionFrequency:a.frequency||"weekly",selectedDays:a.selected_days||[],dayTimes:a.session_time?[a.session_time]:[],isSelfPaced:a.is_self_paced||!1,sessionDuration:a.session_duration||60,enrollmentLimit:a.enrollment_limit||null,price:a.price||0}}catch(a){throw console.error("Error in getCourseById:",a),a}}async function Po(e,s,r){if(!e||!r)throw new Error("Course ID and instructor ID are required");try{const{data:t,error:i}=await x.from("courses").select("instructor_id").eq("id",e).single();if(i)throw new Error(`Course not found: ${i.message}`);if(t.instructor_id!==r)throw new Error("Unauthorized: You can only update your own courses");const o={...s,updated_at:new Date().toISOString()},{data:a,error:l}=await x.from("courses").update(o).eq("id",e).select().single();if(l)throw console.error("Error updating course:",l),new Error(`Failed to update course: ${l.message}`);return a}catch(t){throw console.error("Error in updateCourse:",t),t}}async function WS(e,s){return Po(e,{is_published:!0,status:"published"},s)}async function zS(e,s){return Po(e,{is_published:!1,status:"draft"},s)}async function YS(e,s){if(!e||!s)throw new Error("Course ID and instructor ID are required");try{const{data:r,error:t}=await x.from("courses").select("instructor_id, title").eq("id",e).single();if(t)throw new Error(`Course not found: ${t.message}`);if(r.instructor_id!==s)throw new Error("Unauthorized: You can only delete your own courses");const{data:i,error:o}=await x.from("enrollments").select("id").eq("course_id",e).neq("status","dropped").limit(1);if(o&&console.error("Error checking enrollments:",o),i&&i.length>0)throw new Error("Cannot delete course with active enrollments. Please contact students first.");const{error:a}=await x.from("courses").delete().eq("id",e);if(a)throw console.error("Error deleting course:",a),new Error(`Failed to delete course: ${a.message}`);return!0}catch(r){throw console.error("Error in deleteCourse:",r),r}}async function GS(e){if(!e)throw new Error("Instructor ID is required");try{const{data:s,error:r}=await x.from("courses").select("id, status, is_published").eq("instructor_id",e);if(r)throw new Error(`Failed to fetch course stats: ${r.message}`);const{data:t,error:i}=await x.from("enrollments").select("course_id").in("course_id",s.map(a=>a.id));return i&&console.error("Error fetching enrollment stats:",i),{totalCourses:s.length,publishedCourses:s.filter(a=>a.is_published).length,draftCourses:s.filter(a=>!a.is_published).length,totalEnrollments:t?t.length:0}}catch(s){throw console.error("Error in getCourseStats:",s),s}}function ni(){const{user:e}=ke(),[s,r]=j.useState(""),[t,i]=j.useState("all"),[o,a]=j.useState([]),[l,c]=j.useState(!0),[u,d]=j.useState(""),[m,f]=j.useState(0),h=[{value:"all",label:"All",icon:""},{value:"performing-arts",label:"Performing Arts",icon:""},{value:"visual-arts",label:"Visual Arts",icon:""},{value:"parenting",label:"Parenting",icon:""},{value:"academics",label:"Academics",icon:""},{value:"language",label:"Language",icon:""},{value:"spirituality",label:"Spirituality",icon:""},{value:"lifeskills",label:"Life Skills",icon:""}];j.useEffect(()=>{(async()=>{try{c(!0),d(""),um({category:"navigation",message:"Marketplace page loaded",level:"info",data:{userId:e==null?void 0:e.id,retryCount:m}});const y=await Nm();a(y)}catch(y){console.error("Error fetching courses:",y);const E=pm(y);d(E)}finally{c(!1)}})()},[e,m]);const g=()=>{f(N=>N+1)},p=o.filter(N=>{const y=N.title.toLowerCase().includes(s.toLowerCase())||N.description.toLowerCase().includes(s.toLowerCase()),E=t==="all"||N.category===t;return y&&E});return n.jsxDEV("div",{className:"marketplace",children:[n.jsxDEV("div",{className:"marketplace-header",children:[n.jsxDEV("h1",{children:"Discover Courses"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Marketplace.jsx",lineNumber:75,columnNumber:9},this),n.jsxDEV("p",{className:"tagline",children:"Here every brain learns differently"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Marketplace.jsx",lineNumber:76,columnNumber:9},this),n.jsxDEV("p",{className:"subtitle",children:"Personalized live classes for unique learners"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Marketplace.jsx",lineNumber:77,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Marketplace.jsx",lineNumber:74,columnNumber:7},this),n.jsxDEV("div",{className:"marketplace-filters",children:[n.jsxDEV("div",{className:"search-bar",children:n.jsxDEV("input",{type:"text",placeholder:"Search courses...",value:s,onChange:N=>r(N.target.value)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Marketplace.jsx",lineNumber:82,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Marketplace.jsx",lineNumber:81,columnNumber:9},this),n.jsxDEV("div",{className:"category-filters",children:h.map(N=>n.jsxDEV("button",{className:`category-btn ${t===N.value?"active":""}`,onClick:()=>i(N.value),children:[N.icon," ",N.label]},N.value,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Marketplace.jsx",lineNumber:92,columnNumber:13},this))},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Marketplace.jsx",lineNumber:90,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Marketplace.jsx",lineNumber:80,columnNumber:7},this),l?n.jsxDEV("div",{className:"loading-state",style:{textAlign:"center",padding:"3rem"},children:n.jsxDEV("p",{children:"Loading courses..."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Marketplace.jsx",lineNumber:105,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Marketplace.jsx",lineNumber:104,columnNumber:9},this):u?n.jsxDEV("div",{className:"error-state",style:{textAlign:"center",padding:"3rem",background:"#fff",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",maxWidth:"500px",margin:"2rem auto"},children:[n.jsxDEV("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Marketplace.jsx",lineNumber:117,columnNumber:11},this),n.jsxDEV("h2",{style:{marginBottom:"1rem",color:"#333"},children:"Failed to load courses"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Marketplace.jsx",lineNumber:118,columnNumber:11},this),n.jsxDEV("p",{style:{color:"#666",marginBottom:"2rem"},children:u},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Marketplace.jsx",lineNumber:119,columnNumber:11},this),n.jsxDEV("button",{onClick:g,style:{padding:"12px 24px",fontSize:"1rem",background:"#667eea",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"500"},children:"Try Again"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Marketplace.jsx",lineNumber:120,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Marketplace.jsx",lineNumber:108,columnNumber:9},this):n.jsxDEV("div",{className:"courses-grid",children:p.length>0?p.map(N=>n.jsxDEV(LS,{course:N},N.id,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Marketplace.jsx",lineNumber:140,columnNumber:15},this)):n.jsxDEV("div",{className:"no-results",children:[n.jsxDEV("p",{children:"No courses found matching your criteria"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Marketplace.jsx",lineNumber:144,columnNumber:15},this),o.length===0&&n.jsxDEV("p",{style:{marginTop:"1rem",color:"#6b7280"},children:"No courses have been published yet. Check back soon!"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Marketplace.jsx",lineNumber:146,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Marketplace.jsx",lineNumber:143,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Marketplace.jsx",lineNumber:137,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Marketplace.jsx",lineNumber:73,columnNumber:5},this)}class JS extends j.Component{constructor(r){super(r);Tt(this,"handleRetry",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,t){console.error(`PageErrorBoundary (${this.props.pageName}) caught an error:`,r,t),gt(r,{tags:{errorBoundary:"page",page:this.props.pageName},contexts:{react:{componentStack:t.componentStack}}})}render(){return this.state.hasError?n.jsxDEV("div",{className:"page-error-boundary",children:n.jsxDEV("div",{className:"page-error-content",children:[n.jsxDEV("h2",{children:[" Failed to load ",this.props.pageName]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/PageErrorBoundary.jsx",lineNumber:48,columnNumber:13},this),n.jsxDEV("p",{children:"Something went wrong. We've been notified."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/PageErrorBoundary.jsx",lineNumber:49,columnNumber:13},this),n.jsxDEV("div",{className:"page-error-actions",children:[n.jsxDEV("button",{onClick:this.handleRetry,className:"btn-primary",children:"Try Again"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/PageErrorBoundary.jsx",lineNumber:52,columnNumber:15},this),n.jsxDEV("button",{onClick:()=>window.history.back(),className:"btn-secondary",children:"Go Back"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/PageErrorBoundary.jsx",lineNumber:55,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/PageErrorBoundary.jsx",lineNumber:51,columnNumber:13},this),this.state.error&&n.jsxDEV("details",{className:"error-details",children:[n.jsxDEV("summary",{children:"Error Details (Dev Only)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/PageErrorBoundary.jsx",lineNumber:62,columnNumber:17},this),n.jsxDEV("pre",{children:this.state.error.toString()},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/PageErrorBoundary.jsx",lineNumber:63,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/PageErrorBoundary.jsx",lineNumber:61,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/PageErrorBoundary.jsx",lineNumber:47,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/PageErrorBoundary.jsx",lineNumber:46,columnNumber:9},this):this.props.children}}function KS({message:e="Something went wrong",onRetry:s,showRetry:r=!0}){return n.jsxDEV("div",{className:"error-state-container",children:n.jsxDEV("div",{className:"error-state-content",children:[n.jsxDEV("div",{className:"error-icon",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/ErrorState.jsx",lineNumber:15,columnNumber:9},this),n.jsxDEV("h3",{children:e},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/ErrorState.jsx",lineNumber:16,columnNumber:9},this),r&&s&&n.jsxDEV("button",{onClick:s,className:"retry-button",children:"Try Again"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/ErrorState.jsx",lineNumber:18,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/ErrorState.jsx",lineNumber:14,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/ErrorState.jsx",lineNumber:13,columnNumber:5},this)}async function XS(e,s){if(!e||!s)throw new Error("Course ID and user ID are required");try{if(!await tv(e,s))throw new Error("Unauthorized: You do not have access to this course");const{data:t,error:i}=await x.from("sessions").select("*").eq("course_id",e).order("session_date",{ascending:!0});if(i)throw console.error("Error fetching sessions:",i),new Error(`Failed to fetch sessions: ${i.message}`);return t||[]}catch(r){throw console.error("Error in getCourseSessions:",r),r}}async function ZS(e,s,r){if(!e||!r)throw new Error("Session ID and instructor ID are required");try{const{data:t,error:i}=await x.from("sessions").select(`
        id,
        course_id,
        courses!inner(instructor_id)
      `).eq("id",e).single();if(i)throw new Error(`Session not found: ${i.message}`);if(t.courses.instructor_id!==r)throw new Error("Unauthorized: You can only update sessions for your own courses");if(s.meeting_link&&!Ao(s.meeting_link))throw new Error("Invalid meeting link URL");const o={meeting_link:s.meeting_link||"",meeting_password:s.meeting_password||"",meeting_platform:s.meeting_platform||null},{data:a,error:l}=await x.from("sessions").update(o).eq("id",e).select().single();if(l)throw console.error("Error updating session:",l),new Error(`Failed to update session: ${l.message}`);return a}catch(t){throw console.error("Error in updateSessionMeeting:",t),t}}async function QS(e,s,r){var t;if(!e||!r)throw new Error("Course ID and instructor ID are required");try{const{data:i,error:o}=await x.from("courses").select("instructor_id, title").eq("id",e).single();if(o)throw new Error(`Course not found: ${o.message}`);if(i.instructor_id!==r)throw new Error("Unauthorized: You can only create sessions for your own courses");if(!s.title||!s.session_date)throw new Error("Session title and date are required");const a={course_id:e,title:s.title.trim(),description:((t=s.description)==null?void 0:t.trim())||"",session_date:new Date(s.session_date).toISOString(),duration_minutes:s.duration_minutes||s.duration||60,meeting_link:s.meeting_link||"",meeting_password:s.meeting_password||"",meeting_platform:s.meeting_platform||null,student_id:s.student_id||null,status:"scheduled"};if(a.meeting_link&&!Ao(a.meeting_link))throw new Error("Invalid meeting link URL");const{data:l,error:c}=await x.from("sessions").insert([a]).select().single();if(c)throw console.error("Error creating session:",c),new Error(`Failed to create session: ${c.message}`);return l}catch(i){throw console.error("Error in createSession:",i),i}}async function ev(e,s,r){if(!e||!r)throw new Error("Session ID and instructor ID are required");try{const{data:t,error:i}=await x.from("sessions").select(`
        id,
        course_id,
        courses!inner(instructor_id)
      `).eq("id",e).single();if(i)throw new Error(`Session not found: ${i.message}`);if(t.courses.instructor_id!==r)throw new Error("Unauthorized: You can only update sessions for your own courses");if(s.meeting_link&&!Ao(s.meeting_link))throw new Error("Invalid meeting link URL");const o={...s};o.session_date&&(o.session_date=new Date(o.session_date).toISOString());const{data:a,error:l}=await x.from("sessions").update(o).eq("id",e).select().single();if(l)throw console.error("Error updating session:",l),new Error(`Failed to update session: ${l.message}`);return a}catch(t){throw console.error("Error in updateSession:",t),t}}async function sv(e,s){if(!e||!s)throw new Error("Session ID and instructor ID are required");try{const{data:r,error:t}=await x.from("sessions").select(`
        id,
        course_id,
        title,
        courses!inner(instructor_id)
      `).eq("id",e).single();if(t)throw new Error(`Session not found: ${t.message}`);if(r.courses.instructor_id!==s)throw new Error("Unauthorized: You can only delete sessions for your own courses");const{error:i}=await x.from("sessions").delete().eq("id",e);if(i)throw console.error("Error deleting session:",i),new Error(`Failed to delete session: ${i.message}`);return!0}catch(r){throw console.error("Error in deleteSession:",r),r}}async function rv(e,s=5){if(!e)throw new Error("Instructor ID is required");try{const{data:r,error:t}=await x.from("sessions").select(`
        *,
        courses!inner(title, instructor_id)
      `).eq("courses.instructor_id",e).gte("session_date",new Date().toISOString()).order("session_date",{ascending:!0}).limit(s);if(t)throw console.error("Error fetching upcoming sessions:",t),new Error(`Failed to fetch upcoming sessions: ${t.message}`);return r||[]}catch(r){throw console.error("Error in getUpcomingSessions:",r),r}}async function tv(e,s){try{const{data:r,error:t}=await x.from("courses").select("instructor_id").eq("id",e).single();if(t)return!1;if(r.instructor_id===s)return!0;const{data:i}=await x.from("enrollments").select("id").eq("course_id",e).eq("student_id",s).single();return!!i}catch(r){return console.error("Error checking course access:",r),!1}}function Ao(e){try{return new URL(e),!0}catch{return!1}}async function nv(e,s,r){if(!e||!r)throw new Error("Course ID and instructor ID are required");try{const{data:t,error:i}=await x.from("courses").select("instructor_id, title").eq("id",e).single();if(i)throw new Error(`Course not found: ${i.message}`);if(t.instructor_id!==r)throw new Error("Unauthorized: You can only create homework for your own courses");if(!s.title||!s.description)throw new Error("Title and description are required");const o={course_id:e,title:s.title.trim(),description:s.description.trim(),due_date:s.due_date?new Date(s.due_date).toISOString():null,points:s.points||100,submission_type:s.submission_type||"text",is_published:s.is_published||!1,attachments:s.attachments||null},{data:a,error:l}=await x.from("homework").insert([o]).select().single();if(l)throw console.error("Error creating homework:",l),new Error(`Failed to create homework: ${l.message}`);return a}catch(t){throw console.error("Error in createHomework:",t),t}}async function iv(e,s,r=!0){if(!e||!s)throw new Error("Course ID and user ID are required");try{if(!await dv(e,s))throw new Error("Unauthorized: You do not have access to this course");const i=await bm(e,s);let o=x.from("homework").select(`
        *,
        submissions(
          id,
          student_id,
          status,
          submitted_at,
          grade,
          feedback
        )
      `).eq("course_id",e);!i&&r&&(o=o.eq("is_published",!0)),o=o.order("due_date",{ascending:!0,nullsLast:!0});const{data:a,error:l}=await o;if(l)throw console.error("Error fetching homework:",l),new Error(`Failed to fetch homework: ${l.message}`);return a||[]}catch(t){throw console.error("Error in getCourseHomework:",t),t}}async function ov(e,s,r,t=!1){if(!e||!r)throw new Error("Homework ID and student ID are required");try{const{data:i,error:o}=await x.from("homework").select("id, course_id, title, due_date, is_published, submission_type").eq("id",e).single();if(o)throw new Error(`Homework not found: ${o.message}`);if(!i.is_published)throw new Error("This homework assignment is not yet available for submission");let a=x.from("enrollments").select("id").eq("course_id",i.course_id);t?a=a.eq("student_profile_id",r):a=a.eq("student_id",r);const{data:l,error:c}=await a.single();if(c)throw new Error("You must be enrolled in this course to submit homework");let u=x.from("submissions").select("id").eq("homework_id",e);t?u=u.eq("student_profile_id",r):u=u.eq("student_id",r);const{data:d}=await u.single();if(d)throw new Error("You have already submitted this homework. Contact your instructor to resubmit.");if(i.submission_type==="text"&&!s.content)throw new Error("Text content is required for this assignment");if(i.submission_type==="file"&&!s.file_url)throw new Error("File upload is required for this assignment");const m={homework_id:e,student_id:t?null:r,student_profile_id:t?r:null,content:s.content||"",file_url:s.file_url||null,status:"submitted"},{data:f,error:h}=await x.from("submissions").insert([m]).select().single();if(h)throw console.error("Error creating submission:",h),new Error(`Failed to submit homework: ${h.message}`);return f}catch(i){throw console.error("Error in submitHomework:",i),i}}async function av(e,s){if(!e||!s)throw new Error("Homework ID and instructor ID are required");try{const{data:r,error:t}=await x.from("homework").select(`
        id,
        course_id,
        courses!inner(instructor_id)
      `).eq("id",e).single();if(t)throw new Error(`Homework not found: ${t.message}`);if(r.courses.instructor_id!==s)throw new Error("Unauthorized: You can only view submissions for your own courses");const{data:i,error:o}=await x.from("submissions").select(`
        *,
        profiles!inner(id, full_name, avatar_url)
      `).eq("homework_id",e).order("submitted_at",{ascending:!1});if(o)throw console.error("Error fetching submissions:",o),new Error(`Failed to fetch submissions: ${o.message}`);return i||[]}catch(r){throw console.error("Error in getHomeworkSubmissions:",r),r}}async function lv(e,s,r){if(!e||!r)throw new Error("Submission ID and instructor ID are required");try{const{data:t,error:i}=await x.from("submissions").select(`
        id,
        homework_id,
        homework!inner(
          course_id,
          courses!inner(instructor_id)
        )
      `).eq("id",e).single();if(i)throw new Error(`Submission not found: ${i.message}`);if(t.homework.courses.instructor_id!==r)throw new Error("Unauthorized: You can only grade submissions for your own courses");const o={grade:s.grade||null,feedback:s.feedback||"",status:s.grade!==null?"graded":"submitted",graded_at:s.grade!==null?new Date().toISOString():null},{data:a,error:l}=await x.from("submissions").update(o).eq("id",e).select(`
        *,
        profiles!inner(id, full_name, avatar_url),
        homework!inner(title, course_id)
      `).single();if(l)throw console.error("Error grading submission:",l),new Error(`Failed to grade submission: ${l.message}`);return a}catch(t){throw console.error("Error in gradeSubmission:",t),t}}async function cv(e,s,r){if(!e||!r)throw new Error("Homework ID and instructor ID are required");try{const{data:t,error:i}=await x.from("homework").select(`
        id,
        course_id,
        courses!inner(instructor_id)
      `).eq("id",e).single();if(i)throw new Error(`Homework not found: ${i.message}`);if(t.courses.instructor_id!==r)throw new Error("Unauthorized: You can only update homework for your own courses");const o={...s};o.due_date&&(o.due_date=new Date(o.due_date).toISOString());const{data:a,error:l}=await x.from("homework").update(o).eq("id",e).select().single();if(l)throw console.error("Error updating homework:",l),new Error(`Failed to update homework: ${l.message}`);return a}catch(t){throw console.error("Error in updateHomework:",t),t}}async function uv(e,s){if(!e||!s)throw new Error("Homework ID and instructor ID are required");try{const{data:r,error:t}=await x.from("homework").select(`
        id,
        title,
        course_id,
        courses!inner(instructor_id)
      `).eq("id",e).single();if(t)throw new Error(`Homework not found: ${t.message}`);if(r.courses.instructor_id!==s)throw new Error("Unauthorized: You can only delete homework for your own courses");const{data:i,error:o}=await x.from("submissions").select("id").eq("homework_id",e).limit(1);if(o&&console.error("Error checking submissions:",o),i&&i.length>0)throw new Error("Cannot delete homework with existing submissions. Please contact students first.");const{error:a}=await x.from("homework").delete().eq("id",e);if(a)throw console.error("Error deleting homework:",a),new Error(`Failed to delete homework: ${a.message}`);return!0}catch(r){throw console.error("Error in deleteHomework:",r),r}}async function mv(e,s){if(!e||!s)throw new Error("Course ID and student ID are required");try{const{data:r,error:t}=await x.from("enrollments").select("id").eq("course_id",e).eq("student_id",s).single();if(t)throw new Error("You must be enrolled in this course to view submissions");const{data:i,error:o}=await x.from("submissions").select(`
        *,
        homework!inner(
          id,
          title,
          description,
          due_date,
          points,
          course_id
        )
      `).eq("student_id",s).eq("homework.course_id",e).order("submitted_at",{ascending:!1});if(o)throw console.error("Error fetching student submissions:",o),new Error(`Failed to fetch submissions: ${o.message}`);return i||[]}catch(r){throw console.error("Error in getStudentSubmissions:",r),r}}async function dv(e,s,r=null){try{if(await bm(e,s))return!0;const{data:i}=await x.from("enrollments").select("id").eq("course_id",e).eq("student_id",s).single();if(i)return!0;if(r){const{data:a}=await x.from("enrollments").select(`
          id,
          students!inner(parent_id)
        `).eq("course_id",e).eq("student_profile_id",r).eq("students.parent_id",s).single();if(a)return!0}const{data:o}=await x.from("enrollments").select(`
        id,
        student_profile_id,
        students!inner(parent_id)
      `).eq("course_id",e).eq("students.parent_id",s).limit(1);return!!o&&o.length>0}catch(t){return console.error("Error checking course access:",t),!1}}async function bm(e,s){try{const{data:r,error:t}=await x.from("courses").select("instructor_id").eq("id",e).single();return!t&&r.instructor_id===s}catch(r){return console.error("Error checking instructor status:",r),!1}}async function fv(e,s,r){var t;if(!e||!r)throw new Error("Course ID and instructor ID are required");try{const{data:i,error:o}=await x.from("courses").select("instructor_id, title").eq("id",e).single();if(o)throw new Error(`Course not found: ${o.message}`);if(i.instructor_id!==r)throw new Error("Unauthorized: You can only add resources to your own courses");if(!s.title)throw new Error("Resource title is required");if(!s.resource_type||!["file","link"].includes(s.resource_type))throw new Error('Resource type must be either "file" or "link"');if(s.resource_type==="file"&&!s.file_url)throw new Error("File URL is required for file resources");if(s.resource_type==="link"&&!s.link_url)throw new Error("Link URL is required for link resources");if(s.link_url&&!ym(s.link_url))throw new Error("Invalid link URL");const a={course_id:e,title:s.title.trim(),description:((t=s.description)==null?void 0:t.trim())||"",resource_type:s.resource_type,file_url:s.file_url||null,link_url:s.link_url||null,file_size:s.file_size||null,file_type:s.file_type||null,is_public:s.is_public||!1},{data:l,error:c}=await x.from("resources").insert([a]).select().single();if(c)throw console.error("Error creating resource:",c),new Error(`Failed to create resource: ${c.message}`);return l}catch(i){throw console.error("Error in createResource:",i),i}}async function hv(e,s){if(!e||!s)throw new Error("Course ID and user ID are required");try{if(!await Ev(e,s))throw new Error("Unauthorized: You do not have access to this course");const{data:t,error:i}=await x.from("resources").select("*").eq("course_id",e).order("created_at",{ascending:!1});if(i)throw console.error("Error fetching resources:",i),new Error(`Failed to fetch resources: ${i.message}`);return t||[]}catch(r){throw console.error("Error in getCourseResources:",r),r}}async function gv(e,s,r){if(!e||!r)throw new Error("Resource ID and instructor ID are required");try{const{data:t,error:i}=await x.from("resources").select(`
        id,
        course_id,
        courses!inner(instructor_id)
      `).eq("id",e).single();if(i)throw new Error(`Resource not found: ${i.message}`);if(t.courses.instructor_id!==r)throw new Error("Unauthorized: You can only update resources for your own courses");if(s.link_url&&!ym(s.link_url))throw new Error("Invalid link URL");const o={...s},{data:a,error:l}=await x.from("resources").update(o).eq("id",e).select().single();if(l)throw console.error("Error updating resource:",l),new Error(`Failed to update resource: ${l.message}`);return a}catch(t){throw console.error("Error in updateResource:",t),t}}async function pv(e,s){if(!e||!s)throw new Error("Resource ID and instructor ID are required");try{const{data:r,error:t}=await x.from("resources").select(`
        id,
        title,
        file_url,
        course_id,
        courses!inner(instructor_id)
      `).eq("id",e).single();if(t)throw new Error(`Resource not found: ${t.message}`);if(r.courses.instructor_id!==s)throw new Error("Unauthorized: You can only delete resources for your own courses");const{error:i}=await x.from("resources").delete().eq("id",e);if(i)throw console.error("Error deleting resource:",i),new Error(`Failed to delete resource: ${i.message}`);return!0}catch(r){throw console.error("Error in deleteResource:",r),r}}async function Nv(e,s,r=!1){if(!e||!s)throw new Error("Resource ID and student ID are required");try{const{data:t,error:i}=await x.from("resources").select("course_id").eq("id",e).single();if(i)throw new Error(`Resource not found: ${i.message}`);let o=x.from("enrollments").select("id").eq("course_id",t.course_id);r?o=o.eq("student_profile_id",s):o=o.eq("student_id",s);const{data:a,error:l}=await o.single();if(l)throw new Error("You must be enrolled in this course to access resources");return console.log(`Student ${s} (profile: ${r}) accessed resource ${e}`),!0}catch(t){throw console.error("Error in trackResourceAccess:",t),t}}async function bv(e,s,r){if(!e||!s||!r)throw new Error("File, course ID, and instructor ID are required");try{const{data:t,error:i}=await x.from("courses").select("instructor_id").eq("id",s).single();if(i)throw new Error(`Course not found: ${i.message}`);if(t.instructor_id!==r)throw new Error("Unauthorized: You can only upload files to your own courses");const o=100*1024*1024;if(e.size>o)throw new Error("File size must be less than 100MB");const a=e.name.split(".").pop(),l=`${s}/${Date.now()}-${Math.random().toString(36).substring(2)}.${a}`,{data:c,error:u}=await x.storage.from("course-resources").upload(l,e,{cacheControl:"3600",upsert:!1});if(u)throw console.error("Error uploading file:",u),new Error(`Failed to upload file: ${u.message}`);const{data:d}=x.storage.from("course-resources").getPublicUrl(l);return{file_url:d.publicUrl,file_name:e.name,file_size:e.size,file_type:e.type,storage_path:l}}catch(t){throw console.error("Error in uploadResourceFile:",t),t}}async function yv(e){if(!e)throw new Error("Instructor ID is required");try{const{data:s,error:r}=await x.from("resources").select(`
        id,
        resource_type,
        course_id,
        courses!inner(instructor_id, title)
      `).eq("courses.instructor_id",e);if(r)throw console.error("Error fetching resource stats:",r),new Error(`Failed to fetch resource stats: ${r.message}`);const t={totalResources:s.length,fileResources:s.filter(i=>i.resource_type==="file").length,linkResources:s.filter(i=>i.resource_type==="link").length,resourcesByCourse:{}};return s.forEach(i=>{const o=i.courses.title;t.resourcesByCourse[o]||(t.resourcesByCourse[o]=0),t.resourcesByCourse[o]++}),t}catch(s){throw console.error("Error in getResourceStats:",s),s}}async function Ev(e,s){try{const{data:r,error:t}=await x.from("courses").select("instructor_id").eq("id",e).single();if(t)return!1;if(r.instructor_id===s)return!0;const{data:i}=await x.from("enrollments").select("id").eq("course_id",e).eq("student_id",s).single();if(i)return!0;const{data:o}=await x.from("enrollments").select(`
        id,
        student_profile_id,
        students!inner(parent_id)
      `).eq("course_id",e).eq("students.parent_id",s).limit(1);return!!o&&o.length>0}catch(r){return console.error("Error checking course access:",r),!1}}function ym(e){try{return new URL(e),!0}catch{return!1}}const cs=new Map,ii=new Map;function Em(e,s={}){if(!e)throw new Error("Course ID is required");const r=`course:${e}:messages`;if(cs.has(r)){const o=cs.get(r),a=o.channel.state;if(console.log(`Channel ${r} exists with state: ${a}`),a==="closed"||a==="errored")console.log(`Removing closed/errored channel ${r}`),cs.delete(r);else return console.log(`Returning existing active channel ${r}`),o}console.log(`Creating new channel: ${r}`);const t=x.channel(r).on("broadcast",{event:"new_message"},o=>{console.log(" New message received via broadcast:",o),s.onMessage&&s.onMessage(o.payload)}).subscribe((o,a)=>{console.log(`Channel ${r} status:`,o),a&&console.error(`Channel ${r} error:`,a),o==="SUBSCRIBED"?console.log(` Channel ${r} successfully subscribed!`):o==="CLOSED"?(console.error(` Channel ${r} closed unexpectedly`),cs.delete(r)):o==="CHANNEL_ERROR"&&(console.error(` Channel ${r} error:`,a),cs.delete(r))}),i={channel:t,unsubscribe:async()=>{await x.removeChannel(t),cs.delete(r),console.log(`Channel ${r} unsubscribed`)}};return cs.set(r,i),i}function jm(e,s,r={},t={}){if(!e||!s)throw new Error("Course ID and user ID are required");const i=`course:${e}:presence`;if(cs.has(i))return console.warn(`Presence channel ${i} already exists`),cs.get(i);const o=x.channel(i).on("presence",{event:"sync"},()=>{const l=o.presenceState();console.log("Presence sync:",l),ii.set(i,l),t.onSync&&t.onSync(l)}).on("presence",{event:"join"},({key:l,newPresences:c})=>{console.log("User joined:",l,c),t.onJoin&&t.onJoin(l,c)}).on("presence",{event:"leave"},({key:l,leftPresences:c})=>{console.log("User left:",l,c),t.onLeave&&t.onLeave(l,c)}).subscribe(async l=>{console.log(`Presence channel ${i} status:`,l),l==="SUBSCRIBED"&&await o.track({user_id:s,online_at:new Date().toISOString(),...r})}),a={channel:o,track:async(l={})=>{await o.track({user_id:s,online_at:new Date().toISOString(),...r,...l})},untrack:async()=>{await o.untrack()},getPresenceState:()=>ii.get(i)||{},unsubscribe:async()=>{await o.untrack(),await x.removeChannel(o),cs.delete(i),ii.delete(i),console.log(`Presence channel ${i} unsubscribed`)}};return cs.set(i,a),a}function jv(){return cs}const xl=jv();async function Sv(e,s,r){if(!e||!r)throw new Error("Course ID and sender ID are required");try{if(!await Pr(e,r))throw new Error("Unauthorized: You do not have access to this course");if(!s.content||s.content.trim().length===0)throw new Error("Message content is required");if(s.content.length>2e3)throw new Error("Message content must be less than 2000 characters");const i={course_id:e,sender_id:r,content:s.content.trim(),recipient_id:s.recipient_id||null,is_announcement:s.is_announcement||!1,attachments:s.attachments||null};if(s.recipient_id&&!await Pr(e,s.recipient_id))throw new Error("Recipient does not have access to this course");const{data:o,error:a}=await x.from("messages").insert([i]).select(`
        *,
        profiles!sender_id(id, full_name, avatar_url, role)
      `).single();if(a)throw console.error("Error sending message:",a),new Error(`Failed to send message: ${a.message}`);return console.log(" Broadcasting message to channel:",`course:${e}:messages`),console.log(" Message payload:",o),await vv(e,"new_message",o),console.log(" Broadcast complete"),o}catch(t){throw console.error("Error in sendMessage:",t),t}}async function vv(e,s,r){try{const t=`course:${e}:messages`;console.log("Looking for existing channel:",t),console.log("Active channels:",Array.from(xl.keys()));const i=xl.get(t);if(i&&i.channel){console.log("Using existing channel for broadcast, state:",i.channel.state);const o=await i.channel.send({type:"broadcast",event:s,payload:r});console.log("Broadcast result:",o)}else{console.log("No existing channel found in activeChannels");const o=x.getChannels();console.log("All Supabase channels:",o.map(l=>l.topic));const a=o.find(l=>l.topic===t||l.topic===`realtime:${t}`);if(a){console.log("Found matching channel in Supabase, using it");const l=await a.send({type:"broadcast",event:s,payload:r});console.log("Broadcast result:",l)}else console.warn("No channel found - message saved but not broadcast")}console.log("Broadcast sent successfully")}catch(t){console.error("Error broadcasting message:",t)}}async function xv(e,s,r=50,t=null){if(!e||!s)throw new Error("Course ID and user ID are required");try{if(!await Pr(e,s))throw new Error("Unauthorized: You do not have access to this course");let o=x.from("messages").select(`
        *,
        profiles!sender_id(id, full_name, avatar_url, role)
      `).eq("course_id",e).is("recipient_id",null).order("created_at",{ascending:!1}).limit(r);t&&(o=o.lt("created_at",t));const{data:a,error:l}=await o;if(l)throw console.error("Error fetching messages:",l),new Error(`Failed to fetch messages: ${l.message}`);return(a||[]).reverse()}catch(i){throw console.error("Error in getCourseMessages:",i),i}}async function Cv(e,s,r,t=50,i=null){if(!e||!s||!r)throw new Error("Course ID, user ID, and other user ID are required");try{const o=await Pr(e,s),a=await Pr(e,r);if(!o||!a)throw new Error("Unauthorized: One or both users do not have access to this course");let l=x.from("messages").select(`
        *,
        profiles!sender_id(id, full_name, avatar_url, role)
      `).eq("course_id",e).or(`and(sender_id.eq.${s},recipient_id.eq.${r}),and(sender_id.eq.${r},recipient_id.eq.${s})`).order("created_at",{ascending:!1}).limit(t);i&&(l=l.lt("created_at",i));const{data:c,error:u}=await l;if(u)throw console.error("Error fetching conversation:",u),new Error(`Failed to fetch conversation: ${u.message}`);return(c||[]).reverse()}catch(o){throw console.error("Error in getConversation:",o),o}}async function Tv(e,s){if(!e||!s)throw new Error("Course ID and instructor ID are required");try{const{data:r,error:t}=await x.from("courses").select("instructor_id, course_type").eq("id",e).single();if(t)throw new Error(`Course not found: ${t.message}`);if(r.instructor_id!==s)throw new Error("Unauthorized: You can only view conversations for your own courses");const{data:i,error:o}=await x.from("enrollments").select(`
        student_id,
        profiles!student_id(id, full_name, avatar_url)
      `).eq("course_id",e).eq("status","active");if(o)throw console.error("Error fetching enrollments:",o),new Error(`Failed to fetch enrollments: ${o.message}`);console.log(" Fetched enrollments for threads:",i);const a=[];for(const l of i||[]){const c=l.profiles,u=l.student_id;if(!c||!u){console.warn(" Skipping enrollment with missing student data:",l);continue}const{data:d,error:m}=await x.from("messages").select(`
          *,
          profiles!sender_id(id, full_name, avatar_url, role)
        `).eq("course_id",e).or(`and(sender_id.eq.${s},recipient_id.eq.${u}),and(sender_id.eq.${u},recipient_id.eq.${s})`).order("created_at",{ascending:!1}).limit(1).single();a.push({student:c,lastMessage:m?null:d,unreadCount:0})}return a.sort((l,c)=>!l.lastMessage&&!c.lastMessage?0:l.lastMessage?c.lastMessage?new Date(c.lastMessage.created_at)-new Date(l.lastMessage.created_at):-1:1),a}catch(r){throw console.error("Error in getConversationThreads:",r),r}}async function kv(e,s,r=null){if(!e||!s)throw new Error("Course ID and user ID are required");try{if(!await Pr(e,s))throw new Error("Unauthorized: You do not have access to this course");return console.log(`User ${s} marked messages as read in course ${e}`,r?`with ${r}`:"(group chat)"),!0}catch(t){throw console.error("Error in markMessagesAsRead:",t),t}}async function _v(e){if(!e)throw new Error("Instructor ID is required");try{const{data:s,error:r}=await x.from("messages").select(`
        id,
        created_at,
        course_id,
        courses!inner(instructor_id, title, course_type)
      `).eq("courses.instructor_id",e);if(r)throw console.error("Error fetching message stats:",r),new Error(`Failed to fetch message stats: ${r.message}`);const t=new Date,i=new Date(t.getFullYear(),t.getMonth(),t.getDate()),o=new Date(i.getTime()-7*24*60*60*1e3),a={totalMessages:s.length,messagesToday:s.filter(l=>new Date(l.created_at)>=i).length,messagesThisWeek:s.filter(l=>new Date(l.created_at)>=o).length,messagesByCourse:{}};return s.forEach(l=>{const c=l.courses.title;a.messagesByCourse[c]||(a.messagesByCourse[c]=0),a.messagesByCourse[c]++}),a}catch(s){throw console.error("Error in getMessageStats:",s),s}}async function Dv(e,s){if(!e||!s)throw new Error("Message ID and instructor ID are required");try{const{data:r,error:t}=await x.from("messages").select(`
        id,
        sender_id,
        course_id,
        courses!inner(instructor_id)
      `).eq("id",e).single();if(t)throw new Error(`Message not found: ${t.message}`);if(r.courses.instructor_id!==s&&r.sender_id!==s)throw new Error("Unauthorized: You can only delete your own messages or messages in your courses");const{error:i}=await x.from("messages").delete().eq("id",e);if(i)throw console.error("Error deleting message:",i),new Error(`Failed to delete message: ${i.message}`);return!0}catch(r){throw console.error("Error in deleteMessage:",r),r}}async function Pr(e,s){try{console.log("Checking course access:",{courseId:e,userId:s});const{data:r,error:t}=await x.from("courses").select("instructor_id").eq("id",e).single();if(console.log("Course query result:",{course:r,courseError:t}),t)return console.error("Course not found or error:",t),!1;if(r.instructor_id===s)return console.log("User is the instructor - access granted"),!0;const{data:i}=await x.from("enrollments").select("id").eq("course_id",e).eq("student_id",s).single();if(i)return console.log("User is enrolled as student - access granted"),!0;const o=!1;return console.log("Access check result:",o),o}catch(r){return console.error("Error checking course access:",r),!1}}async function Kr(e){try{console.log("=== Sending Enrollment Email ==="),console.log("Email data:",e);const{data:s,error:r}=await x.functions.invoke("send-enrollment-email",{body:e});r?(console.error("=== Email Error ==="),console.error("Error object:",r),console.error("Error message:",r.message),console.error("Error details:",JSON.stringify(r,null,2))):(console.log("=== Email Success ==="),console.log("Response data:",s))}catch(s){console.error("=== Email Exception ==="),console.error("Exception:",s),console.error("Exception message:",s.message),console.error("Exception stack:",s.stack)}}async function wv(e,s){if(!e)throw new Error("Course ID is required");if(!s)throw new Error("Student ID is required");try{const{data:r,error:t}=await x.from("courses").select("id, title, is_published, enrollment_limit, instructor_id").eq("id",e).single();if(t)throw new Error(`Course not found: ${t.message}`);if(!r.is_published)throw new Error("This course is not currently available for enrollment");if(s&&r.instructor_id===s)throw new Error("Instructors cannot enroll in their own courses");const{data:i}=await x.from("enrollments").select("id, status").eq("course_id",e).eq("student_id",s).single();if(i){if(i.status==="active")throw new Error("You are already enrolled in this course");if(i.status==="completed")throw new Error("You have already completed this course");if(i.status==="dropped"){const{data:c,error:u}=await x.from("enrollments").update({status:"active",progress:0,enrolled_at:new Date().toISOString()}).eq("id",i.id).select(`
            *,
            courses!inner(id, title, instructor_id, course_type),
            profiles!student_id(id, full_name, avatar_url)
          `).single();if(u)throw console.error("Error reactivating enrollment:",u),new Error(`Failed to re-enroll in course: ${u.message}`);try{const{data:d}=await x.from("profiles").select("email, first_name, last_name").eq("id",s).single(),{data:m}=await x.from("profiles").select("email, first_name, last_name").eq("id",r.instructor_id).single();d&&await Kr({type:"student_enrolled",studentEmail:d.email,studentName:`${d.first_name} ${d.last_name}`,courseTitle:r.title,courseId:r.id}),m&&await Kr({type:"instructor_notification",instructorEmail:m.email,instructorName:`${m.first_name} ${m.last_name}`,studentName:`${d.first_name} ${d.last_name}`,courseTitle:r.title,courseId:r.id})}catch(d){console.error("Error sending re-enrollment emails:",d)}return c}}if(r.enrollment_limit){const{data:c,error:u}=await x.from("enrollments").select("id").eq("course_id",e).eq("status","active");if(u)console.error("Error checking enrollment count:",u);else if(c&&c.length>=r.enrollment_limit)throw new Error("This course is full. Please check back later for availability.")}const o={course_id:e,student_id:s,status:"active",progress:0,enrolled_at:new Date().toISOString()};console.log("Creating enrollment with data:",o);const{data:a,error:l}=await x.from("enrollments").insert([o]).select(`
        *,
        courses!inner(id, title, instructor_id, course_type),
        profiles!student_id(id, full_name, avatar_url)
      `).single();if(l)throw console.error("Error creating enrollment:",l),new Error(`Failed to enroll in course: ${l.message}`);try{const{data:c}=await x.from("profiles").select("email, first_name, last_name").eq("id",s).single(),{data:u}=await x.from("profiles").select("email, first_name, last_name").eq("id",r.instructor_id).single();console.log("Instructor profile:",u),c?await Kr({type:"student_enrolled",studentEmail:c.email,studentName:`${c.first_name} ${c.last_name}`,courseTitle:r.title,courseId:r.id}):console.log("Student profile not found, skipping student email"),u?(console.log("Sending instructor notification email to:",u.email),await Kr({type:"instructor_notification",instructorEmail:u.email,instructorName:`${u.first_name} ${u.last_name}`,studentName:`${c.first_name} ${c.last_name}`,courseTitle:r.title,courseId:r.id})):console.log("Instructor profile not found, skipping instructor email")}catch(c){console.error("Error sending enrollment emails:",c)}return a}catch(r){throw console.error("Error in enrollStudent:",r),r}}async function Uv(e,s=null){if(!e)throw new Error("Student ID is required");try{let r=x.from("enrollments").select(`
        *,
        courses!inner(
          id,
          title,
          description,
          category,
          course_type,
          instructor_id,
          is_published,
          profiles!instructor_id(id, full_name, avatar_url)
        )
      `).eq("student_id",e).neq("status","dropped").order("enrolled_at",{ascending:!1});s&&(r=r.eq("status",s));const{data:t,error:i}=await r;if(i)throw console.error("Error fetching student enrollments:",i),new Error(`Failed to fetch enrollments: ${i.message}`);return t||[]}catch(r){throw console.error("Error in getStudentEnrollments:",r),r}}async function Vv(e,s){if(!e||!s)throw new Error("Course ID and instructor ID are required");try{const{data:r,error:t}=await x.from("courses").select("instructor_id, title").eq("id",e).single();if(t)throw new Error(`Course not found: ${t.message}`);if(r.instructor_id!==s)throw new Error("Unauthorized: You can only view enrollments for your own courses");const{data:i,error:o}=await x.from("enrollments").select(`
        *,
        profiles!student_id(
          id,
          full_name,
          first_name,
          last_name,
          avatar_url,
          bio,
          neurodiversity_profile
        )
      `).eq("course_id",e).neq("status","dropped").order("enrolled_at",{ascending:!1});if(o)throw console.error("Error fetching course enrollments:",o),new Error(`Failed to fetch enrollments: ${o.message}`);return i||[]}catch(r){throw console.error("Error in getCourseEnrollments:",r),r}}async function Iv(e,s,r){if(!e||!r)throw new Error("Enrollment ID and instructor ID are required");try{const{data:t,error:i}=await x.from("enrollments").select(`
        id,
        student_id,
        course_id,
        courses!inner(instructor_id)
      `).eq("id",e).single();if(i)throw new Error(`Enrollment not found: ${i.message}`);if(t.courses.instructor_id!==r)throw new Error("Unauthorized: You can only update enrollments for your own courses");const o={...s};s.status==="completed"&&!s.completed_at&&(o.completed_at=new Date().toISOString());const{data:a,error:l}=await x.from("enrollments").update(o).eq("id",e).select(`
        *,
        profiles!student_id(id, full_name, avatar_url),
        courses!inner(id, title)
      `).single();if(l)throw console.error("Error updating enrollment:",l),new Error(`Failed to update enrollment: ${l.message}`);return a}catch(t){throw console.error("Error in updateEnrollment:",t),t}}async function Rv(e,s){if(!e||!s)throw new Error("Course ID and student ID are required");try{const{data:r,error:t}=await x.from("enrollments").select("id, status").eq("course_id",e).eq("student_id",s).single();if(t)throw new Error(`Enrollment not found: ${t.message}`);if(r.status==="dropped")throw new Error("You have already withdrawn from this course");const{error:i}=await x.from("enrollments").update({status:"dropped"}).eq("id",r.id);if(i)throw console.error("Error withdrawing from course:",i),new Error(`Failed to withdraw from course: ${i.message}`);try{console.log("=== Fetching student and course data for unenrollment email ===");const{data:o}=await x.from("profiles").select("email, first_name, last_name").eq("id",s).single();console.log("Student profile:",o);const{data:a}=await x.from("courses").select("title").eq("id",e).single();console.log("Course data:",a),o&&a?(console.log("=== Sending unenrollment email ==="),await Kr({type:"student_unenrolled",studentEmail:o.email,studentName:`${o.first_name} ${o.last_name}`,courseTitle:a.title,courseId:e}),console.log("=== Unenrollment email sent successfully ===")):console.log("=== Missing student profile or course data, skipping email ===")}catch(o){console.error("Error sending unenrollment email:",o)}return!0}catch(r){throw console.error("Error in withdrawStudent:",r),r}}async function Mv(e){if(!e)throw new Error("Instructor ID is required");try{const{data:s,error:r}=await x.from("enrollments").select(`
        id,
        status,
        progress,
        enrolled_at,
        completed_at,
        course_id,
        courses!inner(instructor_id, title)
      `).eq("courses.instructor_id",e);if(r)throw console.error("Error fetching enrollment stats:",r),new Error(`Failed to fetch enrollment stats: ${r.message}`);const t=new Date,i=new Date(t.getFullYear(),t.getMonth(),1),o={totalEnrollments:s.length,activeEnrollments:s.filter(l=>l.status==="active").length,completedEnrollments:s.filter(l=>l.status==="completed").length,withdrawnEnrollments:s.filter(l=>l.status==="withdrawn").length,enrollmentsThisMonth:s.filter(l=>new Date(l.enrolled_at)>=i).length,averageProgress:0,enrollmentsByCourse:{}},a=s.filter(l=>l.status==="active");if(a.length>0){const l=a.reduce((c,u)=>c+(u.progress||0),0);o.averageProgress=Math.round(l/a.length)}return s.forEach(l=>{const c=l.courses.title;o.enrollmentsByCourse[c]||(o.enrollmentsByCourse[c]={total:0,active:0,completed:0,withdrawn:0}),o.enrollmentsByCourse[c].total++,o.enrollmentsByCourse[c][l.status]++}),o}catch(s){throw console.error("Error in getEnrollmentStats:",s),s}}async function Pv(e,s){if(!e||!s)throw new Error("Course ID and student ID are required");try{const{data:r}=await x.from("enrollments").select("*").eq("course_id",e).eq("student_id",s).neq("status","dropped").single();return r||null}catch(r){return console.error("Error in checkEnrollment:",r),null}}async function Av(e,s){if(!e||!s)throw new Error("Course ID and instructor ID are required");try{const{data:r,error:t}=await x.from("courses").select("instructor_id, title").eq("id",e).single();if(t)throw new Error(`Course not found: ${t.message}`);if(r.instructor_id!==s)throw new Error("Unauthorized: You can only view completion rates for your own courses");const{data:i,error:o}=await x.from("enrollments").select("status, progress").eq("course_id",e);if(o)throw console.error("Error fetching completion rate:",o),new Error(`Failed to fetch completion rate: ${o.message}`);const a=i.length,l=i.filter(m=>m.status==="completed").length,c=i.filter(m=>m.status==="active").length,u=i.filter(m=>m.status==="active"),d=u.length>0?Math.round(u.reduce((m,f)=>m+(f.progress||0),0)/u.length):0;return{totalEnrollments:a,completedEnrollments:l,activeEnrollments:c,completionRate:a>0?Math.round(l/a*100):0,averageProgress:d}}catch(r){throw console.error("Error in getCourseCompletionRate:",r),r}}async function Ov(e,s,r){if(!e||!s)throw new Error("Course ID and student ID are required");if(!r||r<1||r>5)throw new Error("Rating must be between 1 and 5");try{const{data:t}=await x.from("reviews").select("id").eq("course_id",e).eq("student_id",s).single();if(t){const{data:i,error:o}=await x.from("reviews").update({rating:r,updated_at:new Date().toISOString()}).eq("id",t.id).select().single();if(o)throw console.error("Error updating rating:",o),new Error(`Failed to update rating: ${o.message}`);return i}else{const{data:i,error:o}=await x.from("reviews").insert([{course_id:e,student_id:s,rating:r,is_published:!0}]).select().single();if(o)throw console.error("Error creating rating:",o),new Error(`Failed to submit rating: ${o.message}`);return i}}catch(t){throw console.error("Error in submitRating:",t),t}}async function Lv(e,s){if(!e||!s)throw new Error("Course ID and student ID are required");try{const{data:r,error:t}=await x.from("reviews").select("*").eq("course_id",e).eq("student_id",s).single();if(t&&t.code!=="PGRST116")throw console.error("Error fetching rating:",t),new Error(`Failed to fetch rating: ${t.message}`);return r||null}catch(r){return console.error("Error in getStudentRating:",r),null}}async function Fv(e){if(!e)throw new Error("Course ID is required");try{const{data:s,error:r}=await x.from("reviews").select("rating").eq("course_id",e).eq("is_published",!0);if(r)throw console.error("Error fetching course ratings:",r),new Error(`Failed to fetch course ratings: ${r.message}`);if(!s||s.length===0)return{averageRating:0,totalRatings:0};const t=s.length,o=s.reduce((a,l)=>a+l.rating,0)/t;return{averageRating:Math.round(o*10)/10,totalRatings:t}}catch(s){return console.error("Error in getCourseRating:",s),{averageRating:0,totalRatings:0}}}const $v={create:$S,getAll:Nm,getById:HS,getInstructorCourses:qS,update:Po,delete:YS,publish:WS,unpublish:zS,getStats:GS},Bv={create:QS,getCourse:XS,update:ev,delete:sv,updateMeeting:ZS,getUpcoming:rv},qv={create:nv,getCourse:iv,update:cv,delete:uv,submit:ov,getSubmissions:av,grade:lv,getStudentSubmissions:mv},Hv={create:fv,getCourse:hv,update:gv,delete:pv,uploadFile:bv,trackAccess:Nv,getStats:yv},Wv={send:Sv,getCourse:xv,getConversation:Cv,delete:Dv,getThreads:Tv,markAsRead:kv,getStats:_v},zv={enroll:wv,withdraw:Rv,update:Iv,check:Pv,getStudent:Uv,getCourse:Vv,getStats:Mv,getCompletionRate:Av},Yv={submit:Ov,getStudent:Lv,getCourse:Fv},X={courses:$v,sessions:Bv,homework:qv,resources:Hv,messages:Wv,enrollments:zv,ratings:Yv};class Cl extends Error{constructor(s,r="API_ERROR",t=null){super(s),this.name="ApiError",this.code=r,this.details=t}}async function Z(e,...s){try{return await e(...s)}catch(r){throw console.error("API call failed:",r),r instanceof Cl?r:new Cl(r.message||"An unexpected error occurred",r.code||"UNKNOWN_ERROR",r)}}const Gv=[{id:"1",courseId:"1",studentName:"Jennifer Smith",rating:5,reviewText:"This course completely transformed my parenting approach. Dr. Johnson's techniques are practical and effective!",createdAt:"2024-11-15"},{id:"2",courseId:"1",studentName:"Robert Brown",rating:4,reviewText:"Great content and well-structured lessons. Would have liked more real-world examples.",createdAt:"2024-11-10"}];function Jv(e,s,r=new Date){if(!e||!s)return e;try{const[t,i]=e.split(":").map(Number),o=r.toISOString().split("T")[0],l=new Date(`${o}T${e}:00`).toLocaleString("en-US",{timeZone:s,hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),[c,u]=l.split(", "),[d,m,f]=c.split("/"),[h,g]=u.split(":"),p=new Date(Date.UTC(parseInt(f),parseInt(d)-1,parseInt(m),parseInt(h),parseInt(g))),N=Kv(s,p),y=new Date(p.getTime()-N*6e4),E=y.getHours().toString().padStart(2,"0"),R=y.getMinutes().toString().padStart(2,"0");return`${E}:${R}`}catch(t){return console.error("Error converting time:",t),e}}function Kv(e,s){const r=new Date(s.toLocaleString("en-US",{timeZone:"UTC"}));return(new Date(s.toLocaleString("en-US",{timeZone:e})).getTime()-r.getTime())/6e4}function Xv(e,s=null){if(!e)return"";try{const[r,t]=e.split(":").map(Number),i=new Date;i.setHours(r,t,0,0);const o={hour:"numeric",minute:"2-digit",hour12:!0,timeZoneName:"short"};return s&&(o.timeZone=s),i.toLocaleString("en-US",o)}catch(r){return console.error("Error formatting time:",r),e}}function Tl(){return Intl.DateTimeFormat().resolvedOptions().timeZone}function kl(e,s){return e===s}function Zv(){var S;const{courseId:e}=Ar(),{user:s,profile:r,activeStudent:t}=ke(),i=bs(),[o,a]=j.useState(!1),[l,c]=j.useState(null),[u,d]=j.useState(!0),[m,f]=j.useState(""),[h,g]=j.useState(!1),[p,N]=j.useState(!1),[y,E]=j.useState(0);j.useEffect(()=>{console.log(" CourseDetail - activeStudent changed:",t),console.log(" CourseDetail - user:",s==null?void 0:s.id)},[t,s]),Gv.filter(I=>I.courseId===e),j.useEffect(()=>{e&&(async()=>{try{d(!0),f(""),um({category:"navigation",message:"Course detail page loaded",level:"info",data:{courseId:e,userId:s==null?void 0:s.id}});const F=await Z(X.courses.getById,e);if(c(F),s&&F.instructor_id===s.id&&N(!0),s)try{const U=t?t.id:s.id,T=t!==null,w=await Z(X.enrollments.check,e,U);g(!!w)}catch(U){console.log("Not enrolled or error checking enrollment:",U),g(!1)}}catch(F){console.error("Error fetching course:",F);const U=pm(F);f(U)}finally{d(!1)}})()},[e,s,t,y]);const R=()=>{E(I=>I+1)};if(u)return n.jsxDEV("div",{className:"course-detail",children:n.jsxDEV("div",{className:"loading-state",children:"Loading course..."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:87,columnNumber:43},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:87,columnNumber:12},this);if(m||!l)return n.jsxDEV("div",{className:"course-detail",children:n.jsxDEV(KS,{message:m||"Course not found",onRetry:R},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:93,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:92,columnNumber:7},this);const A=l.enrollmentLimit&&l.currentEnrollment>=l.enrollmentLimit,_=l.enrollmentLimit?l.enrollmentLimit-l.currentEnrollment:null,C=async()=>{if(!s){i("/login");return}if(A){alert("Sorry, this class is full!");return}try{const I={courseId:e,studentId:t?null:s.id,studentProfileId:t?t.id:null};console.log("=== ENROLLMENT DEBUG ==="),console.log("User ID:",s.id),console.log("Active Student:",t),console.log("Enrollment Data:",I),console.log("========================"),await Z(X.enrollments.enroll,I.courseId,I.studentId,I.studentProfileId),a(!0)}catch(I){console.error("Enrollment error:",I),alert(I.message||"Failed to enroll in course. Please try again.")}};return n.jsxDEV("div",{className:"course-detail",children:[n.jsxDEV("div",{className:"course-hero",children:[n.jsxDEV("div",{className:"course-hero-content",children:[n.jsxDEV("div",{className:"course-category-badge",children:l.category},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:145,columnNumber:11},this),n.jsxDEV("h1",{children:l.title},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:146,columnNumber:11},this),n.jsxDEV("p",{className:"course-lead",children:l.description},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:147,columnNumber:11},this),n.jsxDEV("div",{className:"course-meta",children:[n.jsxDEV("div",{className:"meta-item",children:n.jsxDEV("span",{children:[" Instructor: ",l.instructorName]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:151,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:150,columnNumber:13},this),l.instructorExpertise&&l.instructorExpertise.length>0&&n.jsxDEV("div",{className:"meta-item",children:n.jsxDEV("span",{children:[" Specializes in: ",l.instructorExpertise.join(", ")]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:155,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:154,columnNumber:15},this),!l.isSelfPaced&&n.jsxDEV(n.Fragment,{children:[n.jsxDEV("div",{className:"meta-item",children:n.jsxDEV("span",{children:[" ",l.sessionDuration," min sessions"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:161,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:160,columnNumber:17},this),n.jsxDEV("div",{className:"meta-item",children:n.jsxDEV("span",{children:[" ",l.sessionFrequency.charAt(0).toUpperCase()+l.sessionFrequency.slice(1)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:164,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:163,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:159,columnNumber:15},this),l.isSelfPaced&&n.jsxDEV("div",{className:"meta-item",children:n.jsxDEV("span",{children:" Self-paced (learn at your own speed)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:170,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:169,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:149,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:144,columnNumber:9},this),n.jsxDEV("div",{className:"course-enroll-card",children:[n.jsxDEV("div",{className:"enroll-price",children:l.price===0?"Free":`$${l.price}`},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:177,columnNumber:11},this),l.enrollmentLimit&&n.jsxDEV("div",{className:"enrollment-status",children:[n.jsxDEV("div",{className:"enrollment-bar",children:n.jsxDEV("div",{className:"enrollment-fill",style:{width:`${l.currentEnrollment/l.enrollmentLimit*100}%`}},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:184,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:183,columnNumber:15},this),n.jsxDEV("div",{className:"enrollment-text",children:[l.currentEnrollment," / ",l.enrollmentLimit," students enrolled",!A&&_<=5&&n.jsxDEV("span",{className:"spots-warning",children:["  Only ",_," spots left!"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:192,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:189,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:182,columnNumber:13},this),A?n.jsxDEV("button",{className:"btn-secondary btn-full",disabled:!0,children:"Class Full"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:199,columnNumber:13},this):p?n.jsxDEV("button",{onClick:()=>i(`/teach/course/${e}/manage`),className:"btn-secondary btn-full",children:"Manage Course"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:203,columnNumber:13},this):h?n.jsxDEV("button",{className:"btn-secondary btn-full",disabled:!0,children:" Enrolled"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:210,columnNumber:13},this):n.jsxDEV("button",{onClick:C,className:"btn-primary btn-full",children:"Enroll Now"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:214,columnNumber:13},this),n.jsxDEV("div",{className:"enroll-features",children:[n.jsxDEV("div",{className:"feature",children:" Live classes"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:220,columnNumber:13},this),n.jsxDEV("div",{className:"feature",children:" Online feedback"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:221,columnNumber:13},this),n.jsxDEV("div",{className:"feature",children:" Instructor support"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:222,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:219,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:176,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:143,columnNumber:7},this),!l.isSelfPaced&&l.course_type==="group"&&n.jsxDEV("div",{className:"course-schedule-table-full",children:[n.jsxDEV("h3",{children:" Course Schedule"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:230,columnNumber:11},this),n.jsxDEV("div",{className:"schedule-info-row",children:[n.jsxDEV("div",{className:"schedule-info-item",children:[n.jsxDEV("span",{className:"info-label",children:"Days:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:233,columnNumber:15},this),n.jsxDEV("span",{className:"info-value",children:((S=l.selected_days)==null?void 0:S.join(", "))||"Not set"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:234,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:232,columnNumber:13},this),n.jsxDEV("div",{className:"schedule-info-item",children:[n.jsxDEV("span",{className:"info-label",children:"Time:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:237,columnNumber:15},this),n.jsxDEV("span",{className:"info-value",children:l.session_time?n.jsxDEV(n.Fragment,{children:[Xv(l.timezone&&!kl(l.timezone,Tl())?Jv(l.session_time,l.timezone):l.session_time),l.timezone&&!kl(l.timezone,Tl())&&n.jsxDEV("span",{style:{fontSize:"0.85em",color:"#666",marginLeft:"0.5rem"},children:"(converted to your timezone)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:247,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:240,columnNumber:19},this):"Not set"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:238,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:236,columnNumber:13},this),n.jsxDEV("div",{className:"schedule-info-item",children:[n.jsxDEV("span",{className:"info-label",children:"Duration:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:256,columnNumber:15},this),n.jsxDEV("span",{className:"info-value",children:[l.session_duration," minutes"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:257,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:255,columnNumber:13},this),n.jsxDEV("div",{className:"schedule-info-item",children:[n.jsxDEV("span",{className:"info-label",children:"Frequency:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:260,columnNumber:15},this),n.jsxDEV("span",{className:"info-value",children:l.frequency||"weekly"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:261,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:259,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:231,columnNumber:11},this),l.start_date&&n.jsxDEV("div",{className:"schedule-dates-row",children:[n.jsxDEV("span",{className:"info-label",children:"Start Date:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:266,columnNumber:15},this),n.jsxDEV("span",{className:"info-value",children:new Date(l.start_date).toLocaleDateString()},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:267,columnNumber:15},this),l.has_end_date&&l.end_date&&n.jsxDEV(n.Fragment,{children:[n.jsxDEV("span",{className:"info-label",children:"End Date:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:270,columnNumber:19},this),n.jsxDEV("span",{className:"info-value",children:new Date(l.end_date).toLocaleDateString()},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:271,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:269,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:265,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:229,columnNumber:9},this),!l.isSelfPaced&&l.course_type==="one-on-one"&&n.jsxDEV("div",{className:"course-schedule-table-full",children:[n.jsxDEV("h3",{children:" Course Schedule"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:281,columnNumber:11},this),n.jsxDEV("div",{className:"schedule-note",children:n.jsxDEV("p",{children:" Schedule to be discussed between instructor and student after enrollment"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:283,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:282,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:280,columnNumber:9},this),o&&n.jsxDEV("div",{className:"enrollment-success-overlay",children:n.jsxDEV("div",{className:"enrollment-success-popup",children:[n.jsxDEV("div",{className:"success-icon",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:292,columnNumber:13},this),n.jsxDEV("h2",{children:"Enrollment Successful!"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:293,columnNumber:13},this),n.jsxDEV("p",{children:[n.jsxDEV("strong",{children:t?`${t.first_name} has been enrolled`:"You have been enrolled"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:295,columnNumber:15},this)," in ",n.jsxDEV("strong",{children:l.title},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:300,columnNumber:28},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:294,columnNumber:13},this),n.jsxDEV("p",{className:"success-subtitle",children:t?`${t.first_name} can now access the course materials and join sessions.`:"You can now access the course materials and join sessions."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:302,columnNumber:13},this),n.jsxDEV("div",{className:"success-actions",children:[n.jsxDEV("button",{onClick:()=>{a(!1),i("/learn/my-courses")},className:"btn-primary",children:"View My Courses"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:309,columnNumber:15},this),n.jsxDEV("button",{onClick:()=>{a(!1),i("/learn/marketplace")},className:"btn-secondary",children:"Continue Browsing"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:318,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:308,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:291,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:290,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:142,columnNumber:5},this)}function Qv(){return n.jsxDEV(JS,{pageName:"Course Detail",children:n.jsxDEV(Zv,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:338,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseDetail.jsx",lineNumber:337,columnNumber:5},this)}const ex={autism:"Autism Spectrum",adhd:"ADHD",dyslexia:"Dyslexia",dysgraphia:"Dysgraphia",dyscalculia:"Dyscalculia",other:"Other"},_l={autism:"#4A90E2",adhd:"#F5A623",dyslexia:"#7ED321",dysgraphia:"#9013FE",dyscalculia:"#FF6B6B",other:"#6C757D"};function Fi({profile:e,size:s="medium",showLabel:r=!0}){return!e||!e.length?null:n.jsxDEV("div",{className:`neurodiversity-badges ${s}`,children:[r&&n.jsxDEV("span",{className:"badges-label",children:"Neurodiversity Profile:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/NeurodiversityBadges.jsx",lineNumber:34,columnNumber:21},this),n.jsxDEV("div",{className:"badges-list",children:e.map((t,i)=>n.jsxDEV("span",{className:"neurodiversity-badge",style:{backgroundColor:_l[t]||_l.other,color:"white"},children:ex[t]||t},i,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/NeurodiversityBadges.jsx",lineNumber:37,columnNumber:11},this))},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/NeurodiversityBadges.jsx",lineNumber:35,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/NeurodiversityBadges.jsx",lineNumber:33,columnNumber:5},this)}function oi(){const{user:e,profile:s,activeStudent:r,activePortal:t,availablePortals:i}=ke(),[o,a]=j.useState([]),[l,c]=j.useState([]),[u,d]=j.useState({}),[m,f]=j.useState({totalCourses:0,totalInstructors:0,sessionsCompleted:0}),[h,g]=j.useState(!0),[p,N]=j.useState(""),[y,E]=j.useState(null),R=C=>C?C.charAt(0).toUpperCase()+C.slice(1).toLowerCase():"";j.useEffect(()=>{(async()=>{if(e)try{g(!0),N("");const S=r!==null,I=(r==null?void 0:r.id)||e.id;console.log(" Fetching enrollments for:",{studentId:I,isStudentProfile:S,activeStudent:r});const F=await Z(X.enrollments.getStudent,I,S);c(F),console.log(" Enrollments fetched:",F);const U=F.map($=>Z(X.courses.getById,$.course_id)),T=await Promise.all(U);a(T);const w=T.map($=>Z(X.ratings.getStudent,$.id,I)),v=await Promise.all(w),D={};T.forEach(($,O)=>{var V;D[$.id]=((V=v[O])==null?void 0:V.rating)||0}),d(D);const H=new Set(T.map($=>$.instructor_id)).size,z=F.reduce(($,O)=>$+(O.progress||0),0);f({totalCourses:T.length,totalInstructors:H,sessionsCompleted:Math.floor(z/10)})}catch(S){console.error("Error fetching enrolled courses:",S),N("Failed to load your courses")}finally{g(!1)}})()},[e,r]);const A=async(C,S)=>{if(window.confirm(`Are you sure you want to unenroll from "${S}"?`))try{if(E(C),!l.find(U=>U.course_id===C))throw new Error("Enrollment not found");const F=(r==null?void 0:r.id)||e.id;await Z(X.enrollments.withdraw,C,F),a(o.filter(U=>U.id!==C)),c(l.filter(U=>U.course_id!==C)),f(U=>({...U,totalCourses:U.totalCourses-1}))}catch(I){console.error("Error unenrolling:",I),alert("Failed to unenroll. Please try again.")}finally{E(null)}},_=async(C,S)=>{try{const I=(r==null?void 0:r.id)||e.id;await Z(X.ratings.submit,C,I,S),d(U=>({...U,[C]:S}));const F=await Promise.all(o.map(async U=>{if(U.id===C){const T=await Z(X.ratings.getCourse,C);return{...U,averageRating:T.averageRating,totalRatings:T.totalRatings}}return U}));a(F)}catch(I){console.error("Error submitting rating:",I),alert("Failed to submit rating. Please try again.")}};return h?n.jsxDEV("div",{className:"my-courses",children:n.jsxDEV("div",{className:"loading-state",style:{textAlign:"center",padding:"3rem"},children:n.jsxDEV("p",{children:"Loading your courses..."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:165,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:164,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:163,columnNumber:7},this):p?n.jsxDEV("div",{className:"my-courses",children:n.jsxDEV("div",{className:"error-state",style:{textAlign:"center",padding:"3rem"},children:n.jsxDEV("p",{children:p},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:175,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:174,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:173,columnNumber:7},this):n.jsxDEV("div",{className:"my-courses",children:[i&&i.length>1&&n.jsxDEV("div",{className:"dashboard-portal-switcher",children:n.jsxDEV(Mo,{currentPortal:t,availablePortals:i,compact:!1},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:186,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:185,columnNumber:9},this),n.jsxDEV("div",{className:"dashboard-header",children:[n.jsxDEV("div",{children:[n.jsxDEV("h1",{children:r?`${R(r.first_name)}'s Dashboard`:"My Learning Dashboard"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:196,columnNumber:11},this),n.jsxDEV("div",{className:"student-profile-summary",children:[n.jsxDEV("p",{children:r?`Learning progress for ${R(r.first_name)}`:`Welcome back, ${(s==null?void 0:s.first_name)||"Student"}!`},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:203,columnNumber:13},this),(r==null?void 0:r.neurodiversity_profile)&&r.neurodiversity_profile.length>0&&n.jsxDEV(Fi,{profile:r.neurodiversity_profile,size:"small",showLabel:!1},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:210,columnNumber:15},this),!r&&(s==null?void 0:s.neurodiversity_profile)&&s.neurodiversity_profile.length>0&&n.jsxDEV(Fi,{profile:s.neurodiversity_profile,size:"small",showLabel:!1},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:217,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:202,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:195,columnNumber:9},this),n.jsxDEV("div",{className:"dashboard-header-actions",children:[n.jsxDEV(he,{to:"/learn/marketplace",className:"btn-primary",children:"Browse More Courses"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:226,columnNumber:11},this),i&&i.includes("teach")&&n.jsxDEV(he,{to:"/teach/create-course",className:"btn-secondary",children:"Create Course"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:230,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:225,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:194,columnNumber:7},this),n.jsxDEV("div",{className:"stats-grid",children:[n.jsxDEV("div",{className:"stat-card",children:[n.jsxDEV("div",{className:"stat-value",children:m.totalCourses},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:239,columnNumber:11},this),n.jsxDEV("div",{className:"stat-label",children:"Enrolled Courses"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:240,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:238,columnNumber:9},this),n.jsxDEV("div",{className:"stat-card",children:[n.jsxDEV("div",{className:"stat-value",children:m.totalInstructors},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:243,columnNumber:11},this),n.jsxDEV("div",{className:"stat-label",children:"Instructors"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:244,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:242,columnNumber:9},this),n.jsxDEV("div",{className:"stat-card",children:[n.jsxDEV("div",{className:"stat-value",children:m.sessionsCompleted},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:247,columnNumber:11},this),n.jsxDEV("div",{className:"stat-label",children:"Sessions Completed"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:248,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:246,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:237,columnNumber:7},this),n.jsxDEV("div",{className:"dashboard-section",children:[n.jsxDEV("h2",{children:"My Courses"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:253,columnNumber:9},this),o.length>0?n.jsxDEV("div",{className:"student-courses-list",children:o.map(C=>n.jsxDEV("div",{className:"student-course-card",children:[n.jsxDEV("div",{className:"course-details",children:[n.jsxDEV("h3",{children:C.title},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:260,columnNumber:21},this),n.jsxDEV("p",{className:"course-description",children:C.description},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:261,columnNumber:21},this),n.jsxDEV("div",{className:"course-meta",children:[n.jsxDEV("span",{className:"instructor-name",children:[" ",C.instructorName]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:263,columnNumber:23},this),!C.is_self_paced&&C.session_duration&&n.jsxDEV("span",{className:"session-info",children:[" ",C.session_duration," min sessions"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:265,columnNumber:25},this),C.is_self_paced&&n.jsxDEV("span",{className:"session-info",children:" Self-paced"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:270,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:262,columnNumber:21},this),n.jsxDEV("div",{className:"course-rating-section",children:[n.jsxDEV("div",{className:"rating-display",children:[n.jsxDEV(hm,{rating:C.averageRating},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:275,columnNumber:25},this),n.jsxDEV("span",{className:"rating-count",children:["(",C.totalRatings," ratings)"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:276,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:274,columnNumber:23},this),n.jsxDEV("div",{className:"your-rating",children:[n.jsxDEV("label",{children:"Your rating:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:279,columnNumber:25},this),n.jsxDEV("div",{className:"rating-stars-interactive",children:[1,2,3,4,5].map(S=>n.jsxDEV("button",{type:"button",className:`star-button ${u[C.id]>=S?"filled":""}`,onClick:()=>_(C.id,S),"aria-label":`Rate ${S} stars`,children:""},S,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:282,columnNumber:29},this))},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:280,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:278,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:273,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:259,columnNumber:19},this),n.jsxDEV("div",{className:"course-actions",children:[n.jsxDEV(he,{to:`/courses/${C.id}`,className:"btn-secondary",children:"View Details"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:298,columnNumber:21},this),n.jsxDEV(he,{to:`/learn/course/${C.id}/view`,className:"btn-primary",children:"Continue Learning"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:301,columnNumber:21},this),n.jsxDEV("button",{onClick:()=>A(C.id,C.title),className:"btn-danger",disabled:y===C.id,children:y===C.id?"Unenrolling...":"Unenroll"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:304,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:297,columnNumber:19},this)]},C.id,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:258,columnNumber:17},this))},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:255,columnNumber:11},this):n.jsxDEV("div",{className:"empty-state",children:[n.jsxDEV("p",{children:"You haven't enrolled in any courses yet."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:318,columnNumber:13},this),n.jsxDEV(he,{to:"/learn/marketplace",className:"btn-primary",children:"Browse Courses"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:319,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:317,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:252,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/MyCourses.jsx",lineNumber:182,columnNumber:5},this)}function Dn({featureName:e="this feature"}){const[s,r]=j.useState("https://www.gofundme.com/f/help-me-support-autism-awareness-and-families-with-genai");return j.useEffect(()=>{(async()=>{try{const i=Intl.DateTimeFormat().resolvedOptions().timeZone;if(i==="Asia/Kolkata"||i==="Asia/Calcutta")r("https://milaap.org/fundraisers/support-autistic-kids-1");else try{(await(await fetch("https://ipapi.co/json/")).json()).country_code==="IN"&&r("https://milaap.org/fundraisers/support-autistic-kids-1")}catch{console.log("Geolocation detection failed, using default link")}}catch{console.log("Location detection failed, using default link")}})()},[]),n.jsxDEV("div",{className:"coming-soon-banner",children:[n.jsxDEV("div",{className:"coming-soon-icon",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/ComingSoonBanner.jsx",lineNumber:39,columnNumber:7},this),n.jsxDEV("div",{className:"coming-soon-content",children:[n.jsxDEV("h3",{children:"Coming Soon!"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/ComingSoonBanner.jsx",lineNumber:41,columnNumber:9},this),n.jsxDEV("p",{children:["We're actively developing ",e,". Your support helps us build these features faster and keep UniqueBrains free for everyone."]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/ComingSoonBanner.jsx",lineNumber:42,columnNumber:9},this),n.jsxDEV("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"donation-button",children:" Support Development"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/ComingSoonBanner.jsx",lineNumber:45,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/ComingSoonBanner.jsx",lineNumber:40,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/ComingSoonBanner.jsx",lineNumber:38,columnNumber:5},this)}function sx({courseId:e,userId:s}){return n.jsxDEV("div",{className:"student-homework",children:n.jsxDEV(Dn,{featureName:"homework assignments"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentHomework.jsx",lineNumber:7,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentHomework.jsx",lineNumber:6,columnNumber:5},this)}function rx({courseId:e,userId:s}){return n.jsxDEV("div",{className:"student-resources",children:n.jsxDEV(Dn,{featureName:"course resources"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentResources.jsx",lineNumber:7,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentResources.jsx",lineNumber:6,columnNumber:5},this)}function tx({courseId:e,course:s}){const{user:r}=ke(),[t,i]=j.useState([]),[o,a]=j.useState(""),[l,c]=j.useState(!0),[u,d]=j.useState(!1),[m,f]=j.useState(""),[h,g]=j.useState(new Set),p=j.useRef(null),N=j.useRef(null),y=j.useRef(null),E=(s==null?void 0:s.course_type)==="group";j.useEffect(()=>(e&&r&&(R(),A()),()=>{N.current&&N.current.unsubscribe(),y.current&&y.current.unsubscribe()}),[e,r]),j.useEffect(()=>{_()},[t]);const R=async()=>{try{c(!0),f("");let T;E?T=await Z(X.messages.getCourse,e,r.id):T=await Z(X.messages.getConversation,e,r.id,s.instructor_id),i(T||[])}catch(T){console.error("Error loading messages:",T),f("Failed to load messages")}finally{c(!1)}},A=()=>{N.current=Em(e,{onMessage:T=>{if(console.log(" Received new message:",T),T.sender_id===r.id){console.log("Skipping own message from broadcast");return}E&&!T.recipient_id?i(w=>[...w,T]):E||(T.sender_id===s.instructor_id&&T.recipient_id===r.id||T.sender_id===r.id&&T.recipient_id===s.instructor_id)&&i(w=>[...w,T])}}),y.current=jm(e,r.id,{name:r.full_name||`${r.firstName} ${r.lastName}`,role:"student"},{onSync:T=>{const w=new Set;Object.values(T).forEach(v=>{v.forEach(D=>{D.user_id!==r.id&&w.add(D.user_id)})}),g(w)}})},_=()=>{var T;(T=p.current)==null||T.scrollIntoView({behavior:"smooth"})},C=async T=>{if(T.preventDefault(),!(!o.trim()||u))try{d(!0);const w={content:o.trim(),recipient_id:E?null:s.instructor_id},v=await Z(X.messages.send,e,w,r.id);v&&i(D=>[...D,v]),a("")}catch(w){console.error("Error sending message:",w),alert("Failed to send message. Please try again.")}finally{d(!1)}},S=T=>{const w=new Date(T);return(new Date-w)/(1e3*60*60)<24?w.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):w.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})},I=T=>{var w;return T.students&&T.students.first_name?`${T.students.first_name} ${T.students.last_name}`:((w=T.profiles)==null?void 0:w.full_name)||"Unknown"},F=T=>h.has(T),U=()=>F(s==null?void 0:s.instructor_id);return l?n.jsxDEV("div",{className:"student-chat",children:n.jsxDEV("div",{className:"loading-state",style:{textAlign:"center",padding:"2rem"},children:n.jsxDEV("p",{children:"Loading chat..."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentChat.jsx",lineNumber:194,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentChat.jsx",lineNumber:193,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentChat.jsx",lineNumber:192,columnNumber:7},this):m?n.jsxDEV("div",{className:"student-chat",children:n.jsxDEV("div",{className:"error-state",style:{textAlign:"center",padding:"2rem"},children:[n.jsxDEV("p",{children:m},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentChat.jsx",lineNumber:204,columnNumber:11},this),n.jsxDEV("button",{onClick:R,className:"btn-primary",style:{marginTop:"1rem"},children:"Try Again"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentChat.jsx",lineNumber:205,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentChat.jsx",lineNumber:203,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentChat.jsx",lineNumber:202,columnNumber:7},this):n.jsxDEV("div",{className:"student-chat",children:[n.jsxDEV("h2",{children:[E?" Class Chat":" Chat with Your Instructor",!E&&U()&&n.jsxDEV("span",{className:"online-indicator",title:"Instructor is online",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentChat.jsx",lineNumber:218,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentChat.jsx",lineNumber:215,columnNumber:7},this),n.jsxDEV("div",{className:"info-banner",children:[n.jsxDEV("span",{className:"info-icon",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentChat.jsx",lineNumber:223,columnNumber:9},this),n.jsxDEV("p",{children:E?"Chat with your instructor and classmates":"Private conversation - only you and your instructor can see these messages"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentChat.jsx",lineNumber:224,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentChat.jsx",lineNumber:222,columnNumber:7},this),n.jsxDEV("div",{className:"chat-container",children:[n.jsxDEV("div",{className:"chat-messages",children:t.length>0?n.jsxDEV(n.Fragment,{children:[t.map(T=>n.jsxDEV("div",{className:`chat-message ${T.sender_id===r.id?"own":""}`,children:[n.jsxDEV("div",{className:"message-header",children:[n.jsxDEV("span",{className:"message-sender",children:[T.sender_id===r.id?"You":I(T),T.sender_id===s.instructor_id&&" (Instructor)",T.sender_id!==r.id&&F(T.sender_id)&&n.jsxDEV("span",{className:"online-indicator",title:"Online",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentChat.jsx",lineNumber:245,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentChat.jsx",lineNumber:241,columnNumber:21},this),n.jsxDEV("span",{className:"message-time",children:S(T.created_at)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentChat.jsx",lineNumber:248,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentChat.jsx",lineNumber:240,columnNumber:19},this),n.jsxDEV("div",{className:"message-content",children:T.content},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentChat.jsx",lineNumber:250,columnNumber:19},this)]},T.id,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentChat.jsx",lineNumber:236,columnNumber:17},this)),n.jsxDEV("div",{ref:p},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentChat.jsx",lineNumber:253,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentChat.jsx",lineNumber:234,columnNumber:13},this):n.jsxDEV("div",{className:"empty-chat",children:n.jsxDEV("p",{children:"No messages yet. Start the conversation!"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentChat.jsx",lineNumber:257,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentChat.jsx",lineNumber:256,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentChat.jsx",lineNumber:232,columnNumber:9},this),n.jsxDEV("div",{className:"chat-input-container",children:[n.jsxDEV("textarea",{value:o,onChange:T=>a(T.target.value),onKeyPress:T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),C(T))},placeholder:"Type your message...",className:"chat-input",rows:"3",disabled:u},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentChat.jsx",lineNumber:263,columnNumber:11},this),n.jsxDEV("button",{onClick:C,className:"btn-primary send-button",disabled:!o.trim()||u,children:u?"Sending...":"Send"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentChat.jsx",lineNumber:277,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentChat.jsx",lineNumber:262,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentChat.jsx",lineNumber:231,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentChat.jsx",lineNumber:214,columnNumber:5},this)}function nx({homework:e,onClose:s,onSubmit:r}){const[t,i]=j.useState(""),[o,a]=j.useState(null),[l,c]=j.useState(!1),[u,d]=j.useState(!1),m=h=>{const g=h.target.files[0];g&&a(g)},f=async()=>{if(e.submissionType==="text"&&!t.trim()){alert("Please enter your response before submitting");return}if(e.submissionType==="file"&&!o){alert("Please select a file to upload");return}c(!0),setTimeout(()=>{const h={homeworkId:e.id,submittedAt:new Date().toISOString(),content:e.submissionType==="text"?t:(o==null?void 0:o.name)||"Completed",feedback:null,feedbackAt:null};r(h),c(!1),d(!0),setTimeout(()=>{s()},1500)},500)};return u?n.jsxDEV("div",{className:"modal-overlay",onClick:s,children:n.jsxDEV("div",{className:"modal-content confirmation",onClick:h=>h.stopPropagation(),children:[n.jsxDEV("div",{className:"confirmation-icon",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:56,columnNumber:11},this),n.jsxDEV("h2",{children:"Homework Submitted!"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:57,columnNumber:11},this),n.jsxDEV("p",{children:"Your instructor will review it soon."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:58,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:55,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:54,columnNumber:7},this):n.jsxDEV("div",{className:"modal-overlay",onClick:s,children:n.jsxDEV("div",{className:"modal-content",onClick:h=>h.stopPropagation(),children:[n.jsxDEV("div",{className:"modal-header",children:[n.jsxDEV("h2",{children:"Submit Homework"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:68,columnNumber:11},this),n.jsxDEV("button",{className:"close-button",onClick:s,children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:69,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:67,columnNumber:9},this),n.jsxDEV("div",{className:"modal-body",children:[n.jsxDEV("h3",{children:e.title},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:73,columnNumber:11},this),n.jsxDEV("p",{className:"homework-description",children:e.description},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:74,columnNumber:11},this),n.jsxDEV("div",{className:"submission-info",children:[n.jsxDEV("span",{children:[" Due: ",new Date(e.dueDate).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:77,columnNumber:13},this),n.jsxDEV("span",{children:[" Type: ",e.submissionType==="text"?"Text Response":e.submissionType==="file"?"File Upload":"Checkmark Only"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:78,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:76,columnNumber:11},this),n.jsxDEV("div",{className:"submission-area",children:[e.submissionType==="text"&&n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"text-response",children:"Your Response *"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:84,columnNumber:17},this),n.jsxDEV("textarea",{id:"text-response",value:t,onChange:h=>i(h.target.value),placeholder:"Type your response here...",rows:"8",className:"text-input"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:85,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:83,columnNumber:15},this),e.submissionType==="file"&&n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"file-upload",children:"Upload File *"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:98,columnNumber:17},this),n.jsxDEV("input",{id:"file-upload",type:"file",onChange:m,className:"file-input"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:99,columnNumber:17},this),o&&n.jsxDEV("p",{className:"file-selected",children:["Selected: ",o.name]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:106,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:97,columnNumber:15},this),e.submissionType==="checkmark"&&n.jsxDEV("div",{className:"checkmark-info",children:n.jsxDEV("p",{children:" Click submit to mark this assignment as complete"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:113,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:112,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:81,columnNumber:11},this),n.jsxDEV("div",{className:"info-banner",children:[n.jsxDEV("span",{className:"info-icon",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:119,columnNumber:13},this),n.jsxDEV("p",{children:"Your instructor will be notified when you submit this homework"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:120,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:118,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:72,columnNumber:9},this),n.jsxDEV("div",{className:"modal-footer",children:[n.jsxDEV("button",{className:"btn-secondary",onClick:s,disabled:l,children:"Cancel"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:125,columnNumber:11},this),n.jsxDEV("button",{className:"btn-primary",onClick:f,disabled:l,children:l?"Submitting...":"Submit Homework"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:132,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:124,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:66,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkSubmissionModal.jsx",lineNumber:65,columnNumber:5},this)}function ix({homework:e,submission:s,onClose:r}){return n.jsxDEV("div",{className:"modal-overlay",onClick:r,children:n.jsxDEV("div",{className:"modal-content",onClick:t=>t.stopPropagation(),children:[n.jsxDEV("div",{className:"modal-header",children:[n.jsxDEV("h2",{children:"Homework Details"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:8,columnNumber:11},this),n.jsxDEV("button",{className:"close-button",onClick:r,children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:9,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:7,columnNumber:9},this),n.jsxDEV("div",{className:"modal-body",children:[n.jsxDEV("h3",{children:e.title},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:13,columnNumber:11},this),n.jsxDEV("p",{className:"homework-description",children:e.description},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:14,columnNumber:11},this),n.jsxDEV("div",{className:"details-section",children:[n.jsxDEV("h4",{children:"Submission Information"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:17,columnNumber:13},this),n.jsxDEV("div",{className:"info-grid",children:[n.jsxDEV("div",{className:"info-item",children:[n.jsxDEV("span",{className:"info-label",children:"Due Date:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:20,columnNumber:17},this),n.jsxDEV("span",{className:"info-value",children:new Date(e.dueDate).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:21,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:19,columnNumber:15},this),n.jsxDEV("div",{className:"info-item",children:[n.jsxDEV("span",{className:"info-label",children:"Submitted:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:30,columnNumber:17},this),n.jsxDEV("span",{className:"info-value",children:new Date(s.submittedAt).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:31,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:29,columnNumber:15},this),n.jsxDEV("div",{className:"info-item",children:[n.jsxDEV("span",{className:"info-label",children:"Type:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:42,columnNumber:17},this),n.jsxDEV("span",{className:"info-value",children:e.submissionType==="text"?"Text Response":e.submissionType==="file"?"File Upload":"Checkmark Only"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:43,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:41,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:18,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:16,columnNumber:11},this),e.submissionType==="text"&&s.content&&n.jsxDEV("div",{className:"details-section",children:[n.jsxDEV("h4",{children:"Your Response"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:56,columnNumber:15},this),n.jsxDEV("div",{className:"response-content",children:s.content},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:57,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:55,columnNumber:13},this),e.submissionType==="file"&&s.content&&n.jsxDEV("div",{className:"details-section",children:[n.jsxDEV("h4",{children:"Submitted File"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:65,columnNumber:15},this),n.jsxDEV("div",{className:"file-info",children:[n.jsxDEV("span",{className:"file-icon",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:67,columnNumber:17},this),n.jsxDEV("span",{className:"file-name",children:s.content},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:68,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:66,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:64,columnNumber:13},this),s.feedback?n.jsxDEV("div",{className:"details-section feedback-section",children:[n.jsxDEV("h4",{children:"Instructor Feedback"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:75,columnNumber:15},this),n.jsxDEV("div",{className:"feedback-content",children:[n.jsxDEV("p",{children:s.feedback},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:77,columnNumber:17},this),s.feedbackAt&&n.jsxDEV("p",{className:"feedback-date",children:["Received: ",new Date(s.feedbackAt).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:79,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:76,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:74,columnNumber:13},this):n.jsxDEV("div",{className:"details-section",children:n.jsxDEV("div",{className:"pending-feedback-box",children:[n.jsxDEV("span",{className:"pending-icon",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:92,columnNumber:17},this),n.jsxDEV("p",{children:"Waiting for instructor feedback..."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:93,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:91,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:90,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:12,columnNumber:9},this),n.jsxDEV("div",{className:"modal-footer",children:n.jsxDEV("button",{className:"btn-primary",onClick:r,children:"Close"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:100,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:99,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:6,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/HomeworkDetailsModal.jsx",lineNumber:5,columnNumber:5},this)}function ox(){const{courseId:e}=Ar(),s=bs(),[r,t]=$i(),{user:i,activeStudent:o}=ke(),[a,l]=j.useState(null),[c,u]=j.useState([]),[d,m]=j.useState(!0),[f,h]=j.useState(""),g=r.get("tab")||"sessions",[p,N]=j.useState(0),[y,E]=j.useState(0),[R,A]=j.useState(0),[_,C]=j.useState(!1),[S,I]=j.useState(null),[F,U]=j.useState(!1),[T,w]=j.useState(null);j.useEffect(()=>{(async()=>{if(e)try{m(!0),h(""),console.log(" Fetching course:",e);const W=await Z(X.courses.getById,e);console.log(" Course fetched:",W),l(W);const Q=(o==null?void 0:o.id)||i.id,me=await Z(X.sessions.getCourse,e,Q);console.log(" Sessions fetched:",me),u(me||[])}catch(W){console.error("Error fetching course:",W),h("Failed to load course")}finally{m(!1)}})()},[e,i,o]),j.useEffect(()=>{v();const B=setInterval(v,5e3);return()=>clearInterval(B)},[e,i.id,g]),j.useEffect(()=>{const B=Q=>{I(Q.detail.homework),C(!0)},W=Q=>{I(Q.detail.homework),w(Q.detail.submission),U(!0)};return window.addEventListener("openSubmissionModal",B),window.addEventListener("viewSubmissionDetails",W),()=>{window.removeEventListener("openSubmissionModal",B),window.removeEventListener("viewSubmissionDetails",W)}},[]);const v=()=>{const B=localStorage.getItem(`chat_${e}`);if(B){const Ye=JSON.parse(B).filter(Fe=>Fe.senderRole==="instructor"&&!Fe.readBy.includes(i.id)).length;N(Ye)}const W=JSON.parse(localStorage.getItem(`viewed_homework_${e}_${i.id}`)||"[]"),me=JSON.parse(localStorage.getItem(`homework_${e}`)||"[]").filter(Pe=>!W.includes(Pe.id)).length;E(me);const je=JSON.parse(localStorage.getItem(`viewed_resources_${e}_${i.id}`)||"[]"),Me=JSON.parse(localStorage.getItem(`resources_${e}`)||"[]").filter(Pe=>!je.includes(Pe.id)).length;A(Me)},D=B=>{if(t({tab:B}),B==="chat"){N(0);const W=localStorage.getItem(`chat_${e}`);if(W){const me=JSON.parse(W).map(je=>({...je,readBy:je.readBy.includes(i.id)?je.readBy:[...je.readBy,i.id]}));localStorage.setItem(`chat_${e}`,JSON.stringify(me))}}else if(B==="homework"){E(0);const Q=JSON.parse(localStorage.getItem(`homework_${e}`)||"[]").map(me=>me.id);localStorage.setItem(`viewed_homework_${e}_${i.id}`,JSON.stringify(Q))}else if(B==="resources"){A(0);const Q=JSON.parse(localStorage.getItem(`resources_${e}`)||"[]").map(me=>me.id);localStorage.setItem(`viewed_resources_${e}_${i.id}`,JSON.stringify(Q))}},H=B=>{const W=JSON.parse(localStorage.getItem(`submissions_${e}_${i.id}`)||"{}");W[B.homeworkId]=B,localStorage.setItem(`submissions_${e}_${i.id}`,JSON.stringify(W)),C(!1),I(null),v()};if(d)return n.jsxDEV("div",{className:"student-course-view",children:n.jsxDEV("div",{className:"loading-state",style:{textAlign:"center",padding:"3rem"},children:n.jsxDEV("p",{children:"Loading course..."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:174,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:173,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:172,columnNumber:7},this);if(f||!a)return n.jsxDEV("div",{className:"student-course-view",children:n.jsxDEV("div",{className:"error-state",style:{textAlign:"center",padding:"3rem"},children:[n.jsxDEV("p",{children:f||"Course not found"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:184,columnNumber:11},this),n.jsxDEV("button",{onClick:()=>s("/my-courses"),className:"btn-primary",style:{marginTop:"1rem"},children:" Back to My Courses"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:185,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:183,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:182,columnNumber:7},this);const z=new Date,$=c.length,O=c.filter(B=>new Date(B.session_date)<z).length,V=$>0?Math.round(O/$*100):0,M=B=>{const W=new Date(B.session_date);return{date:W.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}),time:W.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}};return n.jsxDEV("div",{className:"student-course-view",children:[n.jsxDEV("div",{className:"student-course-header",children:[n.jsxDEV("button",{onClick:()=>s("/my-courses"),className:"back-button",children:" Back to My Courses"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:220,columnNumber:9},this),n.jsxDEV("h1",{children:a.title},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:223,columnNumber:9},this),n.jsxDEV("p",{className:"course-instructor",children:["with ",a.instructorName]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:224,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:219,columnNumber:7},this),n.jsxDEV("div",{className:"course-tabs",children:[n.jsxDEV("button",{className:`tab-button ${g==="sessions"?"active":""}`,onClick:()=>D("sessions"),children:" Sessions"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:228,columnNumber:9},this),n.jsxDEV("button",{className:`tab-button ${g==="homework"?"active":""}`,onClick:()=>D("homework"),children:[" Homework",y>0&&n.jsxDEV("span",{className:"notification-badge",children:y},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:239,columnNumber:31},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:234,columnNumber:9},this),n.jsxDEV("button",{className:`tab-button ${g==="resources"?"active":""}`,onClick:()=>D("resources"),children:[" Resources",R>0&&n.jsxDEV("span",{className:"notification-badge",children:R},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:246,columnNumber:32},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:241,columnNumber:9},this),n.jsxDEV("button",{className:`tab-button ${g==="chat"?"active":""}`,onClick:()=>D("chat"),children:[" Chat",p>0&&n.jsxDEV("span",{className:"notification-badge",children:p},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:253,columnNumber:34},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:248,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:227,columnNumber:7},this),n.jsxDEV("div",{className:"tab-content",children:[g==="sessions"&&n.jsxDEV("div",{className:"tab-panel",children:[n.jsxDEV("h2",{children:"Sessions"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:260,columnNumber:13},this),$>0&&n.jsxDEV("div",{className:"course-progress-section",children:[n.jsxDEV("div",{className:"progress-header",children:[n.jsxDEV("span",{className:"progress-label",children:"Course Progress"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:266,columnNumber:19},this),n.jsxDEV("span",{className:"progress-percentage",children:[V,"% Complete"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:267,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:265,columnNumber:17},this),n.jsxDEV("div",{className:"progress-bar",children:n.jsxDEV("div",{className:"progress-fill",style:{width:`${V}%`}},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:270,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:269,columnNumber:17},this),n.jsxDEV("div",{className:"progress-stats",children:n.jsxDEV("span",{children:[O," of ",$," sessions completed"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:273,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:272,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:264,columnNumber:15},this),a.course_type==="group"&&a.selected_days&&a.selected_days.length>0&&n.jsxDEV("div",{className:"course-schedule-info",children:[n.jsxDEV("h3",{children:" Class Schedule"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:281,columnNumber:17},this),n.jsxDEV("div",{className:"schedule-details-grid",children:[n.jsxDEV("div",{className:"schedule-detail",children:[n.jsxDEV("span",{className:"detail-label",children:"Days:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:284,columnNumber:21},this),n.jsxDEV("span",{className:"detail-value",children:a.selected_days.join(", ")},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:285,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:283,columnNumber:19},this),n.jsxDEV("div",{className:"schedule-detail",children:[n.jsxDEV("span",{className:"detail-label",children:"Time:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:288,columnNumber:21},this),n.jsxDEV("span",{className:"detail-value",children:a.session_time||"To be announced"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:289,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:287,columnNumber:19},this),n.jsxDEV("div",{className:"schedule-detail",children:[n.jsxDEV("span",{className:"detail-label",children:"Duration:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:292,columnNumber:21},this),n.jsxDEV("span",{className:"detail-value",children:[a.session_duration," minutes"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:293,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:291,columnNumber:19},this),n.jsxDEV("div",{className:"schedule-detail",children:[n.jsxDEV("span",{className:"detail-label",children:"Frequency:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:296,columnNumber:21},this),n.jsxDEV("span",{className:"detail-value",children:a.frequency||"Weekly"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:297,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:295,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:282,columnNumber:17},this),a.start_date&&n.jsxDEV("div",{className:"schedule-dates",children:[n.jsxDEV("span",{className:"detail-label",children:"Start Date:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:302,columnNumber:21},this),n.jsxDEV("span",{className:"detail-value",children:new Date(a.start_date).toLocaleDateString()},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:303,columnNumber:21},this),a.has_end_date&&a.end_date&&n.jsxDEV(n.Fragment,{children:[n.jsxDEV("span",{className:"detail-label",style:{marginLeft:"2rem"},children:"End Date:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:306,columnNumber:25},this),n.jsxDEV("span",{className:"detail-value",children:new Date(a.end_date).toLocaleDateString()},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:307,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:305,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:301,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:280,columnNumber:15},this),a.course_type==="one-on-one"&&n.jsxDEV("div",{className:"course-schedule-info",children:[n.jsxDEV("h3",{children:" Class Schedule"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:317,columnNumber:17},this),n.jsxDEV("p",{className:"schedule-note",children:" Your class schedule will be arranged directly with your instructor after enrollment. They will reach out to you to find times that work best for both of you."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:318,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:316,columnNumber:15},this),c.length>0?n.jsxDEV("div",{className:"sessions-list-student",children:[n.jsxDEV("h3",{children:"All Sessions"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:328,columnNumber:17},this),c.map(B=>{const{date:W,time:Q}=M(B),me=new Date(B.session_date)<z,je=B.meeting_link||a.meeting_link;return n.jsxDEV("div",{className:`session-item-student ${me?"past":"upcoming"}`,children:[n.jsxDEV("div",{className:"session-date-time",children:[n.jsxDEV("div",{className:"session-date",children:W},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:337,columnNumber:25},this),n.jsxDEV("div",{className:"session-time",children:Q},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:338,columnNumber:25},this),n.jsxDEV("div",{className:"session-duration",children:[B.duration_minutes," min"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:339,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:336,columnNumber:23},this),n.jsxDEV("div",{className:"session-details",children:[n.jsxDEV("div",{className:"session-title",children:B.title||"Session"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:342,columnNumber:25},this),je&&n.jsxDEV("a",{href:je,target:"_blank",rel:"noopener noreferrer",className:"meeting-link-button",children:" Join Meeting"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:346,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:341,columnNumber:23},this),n.jsxDEV("div",{className:"session-status",children:me?n.jsxDEV("span",{className:"status-badge completed",children:" Completed"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:358,columnNumber:27},this):n.jsxDEV("span",{className:"status-badge upcoming",children:"Upcoming"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:360,columnNumber:27},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:356,columnNumber:23},this)]},B.id,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:335,columnNumber:21},this)})]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:327,columnNumber:15},this):n.jsxDEV("div",{className:"info-banner",children:[n.jsxDEV("span",{className:"info-icon",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:369,columnNumber:17},this),n.jsxDEV("p",{children:"Your upcoming class sessions will appear here. Check back soon!"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:370,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:368,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:259,columnNumber:11},this),g==="homework"&&n.jsxDEV("div",{className:"tab-panel",children:n.jsxDEV(sx,{courseId:e,userId:i.id},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:378,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:377,columnNumber:11},this),g==="resources"&&n.jsxDEV("div",{className:"tab-panel",children:n.jsxDEV(rx,{courseId:e,userId:i.id},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:384,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:383,columnNumber:11},this),g==="chat"&&n.jsxDEV("div",{className:"tab-panel",children:n.jsxDEV(tx,{courseId:e,userId:i.id,course:a},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:390,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:389,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:257,columnNumber:7},this),_&&S&&n.jsxDEV(nx,{homework:S,onClose:()=>{C(!1),I(null)},onSubmit:H},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:397,columnNumber:9},this),F&&S&&T&&n.jsxDEV(ix,{homework:S,submission:T,onClose:()=>{U(!1),I(null),w(null)}},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:409,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentCourseView.jsx",lineNumber:218,columnNumber:5},this)}function Dl(){const{students:e,addStudent:s,updateStudent:r,deleteStudent:t,activeStudent:i,switchStudent:o,refreshStudents:a}=ke(),[l,c]=j.useState(!1),[u,d]=j.useState(null),[m,f]=j.useState({firstName:"",age:"",neurodiversityProfile:[],otherNeeds:""}),h=_=>_?_.charAt(0).toUpperCase()+_.slice(1).toLowerCase():"";j.useEffect(()=>{a()},[a]);const g=[{value:"autism",label:"Autism Spectrum"},{value:"adhd",label:"ADHD"},{value:"dyslexia",label:"Dyslexia"},{value:"multiple",label:"Multiple Conditions"},{value:"other",label:"Other"}],p=_=>{f({...m,[_.target.name]:_.target.value})},N=_=>{const C=m.neurodiversityProfile;C.includes(_)?f({...m,neurodiversityProfile:C.filter(S=>S!==_)}):f({...m,neurodiversityProfile:[...C,_]})},y=()=>{f({firstName:"",age:"",neurodiversityProfile:[],otherNeeds:""}),d(null),c(!0)},E=_=>{f({firstName:_.first_name,age:_.age,neurodiversityProfile:_.neurodiversity_profile||[],otherNeeds:_.other_needs||""}),d(_),c(!0)},R=_=>{if(_.preventDefault(),u){const C={first_name:m.firstName,age:parseInt(m.age),neurodiversity_profile:m.neurodiversityProfile,other_needs:m.otherNeeds};r(u.id,C)}else s(m);c(!1),f({firstName:"",age:"",neurodiversityProfile:[],otherNeeds:""})},A=_=>{if(e.length===1){alert("You must have at least one student profile");return}window.confirm("Are you sure you want to delete this student profile? This will remove all their enrollments.")&&t(_)};return n.jsxDEV("div",{className:"manage-students",children:[n.jsxDEV("div",{className:"students-header",children:[n.jsxDEV("h1",{children:"Manage Children Profiles"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:118,columnNumber:9},this),n.jsxDEV("button",{onClick:y,className:"btn-primary",children:"+ Add Child"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:119,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:117,columnNumber:7},this),n.jsxDEV("div",{className:"students-grid",children:e.map(_=>{var C,S;return n.jsxDEV("div",{className:`student-card ${(i==null?void 0:i.id)===_.id?"active":""}`,children:[n.jsxDEV("div",{className:"student-info",children:[n.jsxDEV("div",{className:"student-avatar",children:((C=_.first_name)==null?void 0:C.charAt(0).toUpperCase())||"?"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:131,columnNumber:15},this),n.jsxDEV("div",{className:"student-details",children:[n.jsxDEV("h3",{children:h(_.first_name)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:135,columnNumber:17},this),n.jsxDEV("p",{className:"student-age",children:["Age: ",_.age]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:136,columnNumber:17},this),_.neurodiversity_profile&&_.neurodiversity_profile.length>0&&n.jsxDEV("div",{className:"student-profile",children:_.neurodiversity_profile.map(I=>{var F;return n.jsxDEV("span",{className:"profile-badge",children:((F=g.find(U=>U.value===I))==null?void 0:F.label)||I},I,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:140,columnNumber:23},this)})},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:138,columnNumber:19},this),n.jsxDEV("p",{className:"student-courses",children:[((S=_.enrolledCourses)==null?void 0:S.length)||0," courses enrolled"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:146,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:134,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:130,columnNumber:13},this),n.jsxDEV("div",{className:"student-actions",children:[(i==null?void 0:i.id)!==_.id&&n.jsxDEV("button",{onClick:()=>o(_.id),className:"btn-secondary btn-sm",children:"Switch To"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:154,columnNumber:17},this),(i==null?void 0:i.id)===_.id&&n.jsxDEV("span",{className:"active-badge",children:"Active"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:162,columnNumber:17},this),n.jsxDEV("button",{onClick:()=>E(_),className:"btn-secondary btn-sm",children:"Edit"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:164,columnNumber:15},this),n.jsxDEV("button",{onClick:()=>A(_.id),className:"btn-secondary btn-sm btn-danger",children:"Delete"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:170,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:152,columnNumber:13},this)]},_.id,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:126,columnNumber:11},this)})},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:124,columnNumber:7},this),l&&n.jsxDEV("div",{className:"modal-overlay",onClick:()=>c(!1),children:n.jsxDEV("div",{className:"modal-content",onClick:_=>_.stopPropagation(),children:[n.jsxDEV("h2",{children:u?"Edit Student":"Add New Student"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:184,columnNumber:13},this),n.jsxDEV("form",{onSubmit:R,children:[n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"firstName",children:"First Name"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:187,columnNumber:17},this),n.jsxDEV("input",{id:"firstName",name:"firstName",type:"text",value:m.firstName,onChange:p,required:!0},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:188,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:186,columnNumber:15},this),n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"age",children:"Age"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:199,columnNumber:17},this),n.jsxDEV("input",{id:"age",name:"age",type:"number",value:m.age,onChange:p,required:!0,min:"3",max:"18"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:200,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:198,columnNumber:15},this),n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{children:"Learning Profile (Optional)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:213,columnNumber:17},this),n.jsxDEV("div",{className:"checkbox-group",children:g.map(_=>n.jsxDEV("label",{className:"checkbox-label",children:[n.jsxDEV("input",{type:"checkbox",checked:m.neurodiversityProfile.includes(_.value),onChange:()=>N(_.value)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:217,columnNumber:23},this),n.jsxDEV("span",{children:_.label},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:222,columnNumber:23},this)]},_.value,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:216,columnNumber:21},this))},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:214,columnNumber:17},this),m.neurodiversityProfile.includes("other")&&n.jsxDEV("div",{className:"nested-field",children:n.jsxDEV("input",{type:"text",name:"otherNeeds",placeholder:"Please describe specific needs...",value:m.otherNeeds,onChange:p},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:229,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:228,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:212,columnNumber:15},this),n.jsxDEV("div",{className:"modal-actions",children:[n.jsxDEV("button",{type:"button",onClick:()=>c(!1),className:"btn-secondary",children:"Cancel"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:241,columnNumber:17},this),n.jsxDEV("button",{type:"submit",className:"btn-primary",children:u?"Update Student":"Add Student"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:244,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:240,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:185,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:183,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:182,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageStudents.jsx",lineNumber:116,columnNumber:5},this)}function wl(){const{user:e,profile:s,activePortal:r,availablePortals:t}=ke(),[i,o]=j.useState([]),[a,l]=j.useState(null),[c,u]=j.useState(!0),[d,m]=j.useState(""),[f,h]=j.useState(null);j.useEffect(()=>{e&&g()},[e]);const g=async()=>{try{u(!0);const N=await Z(X.courses.getInstructorCourses,e.id);o(N||[]);const y=await Z(X.enrollments.getStats,e.id);let E=0;const R=new Date;for(const A of N||[])try{const C=(await Z(X.sessions.getCourse,A.id,e.id)||[]).filter(S=>new Date(S.session_date)<R).length;E+=C}catch(_){console.error(`Error fetching sessions for course ${A.id}:`,_)}l({...y,completedSessions:E}),console.log("Dashboard data loaded:",{courses:N,stats:y,completedSessions:E})}catch(N){console.error("Error fetching dashboard data:",N),m("Failed to load dashboard data")}finally{u(!1)}},p=async(N,y)=>{if(window.confirm(`Are you sure you want to delete "${y}"? This action cannot be undone.`))try{h(N),await Z(X.courses.delete,N,e.id),o(i.filter(R=>R.id!==N));const E=await Z(X.enrollments.getStats,e.id);l(E)}catch(E){console.error("Error deleting course:",E),alert("Failed to delete course. Please try again.")}finally{h(null)}};return n.jsxDEV("div",{className:"instructor-dashboard",children:[t&&t.length>1&&n.jsxDEV("div",{className:"dashboard-portal-switcher",children:n.jsxDEV(Mo,{currentPortal:r,availablePortals:t,compact:!1},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:91,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:90,columnNumber:9},this),n.jsxDEV("div",{className:"dashboard-header",children:[n.jsxDEV("div",{children:[n.jsxDEV("h1",{children:"Instructor Dashboard"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:101,columnNumber:11},this),n.jsxDEV("div",{className:"instructor-profile-summary",children:[n.jsxDEV("p",{children:["Welcome back, ",(s==null?void 0:s.first_name)||"Instructor","!"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:103,columnNumber:13},this),(s==null?void 0:s.neurodiversity_profile)&&s.neurodiversity_profile.length>0&&n.jsxDEV(Fi,{profile:s.neurodiversity_profile,size:"small",showLabel:!1},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:105,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:102,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:100,columnNumber:9},this),n.jsxDEV(he,{to:"/teach/create-course",className:"btn-primary",children:"Create New Course"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:113,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:99,columnNumber:7},this),c?n.jsxDEV("div",{className:"loading-state",style:{textAlign:"center",padding:"3rem"},children:n.jsxDEV("p",{children:"Loading dashboard..."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:120,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:119,columnNumber:9},this):d?n.jsxDEV("div",{className:"error-state",style:{textAlign:"center",padding:"3rem"},children:[n.jsxDEV("p",{children:d},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:124,columnNumber:11},this),n.jsxDEV("button",{onClick:g,className:"btn-primary",style:{marginTop:"1rem"},children:"Retry"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:125,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:123,columnNumber:9},this):n.jsxDEV(n.Fragment,{children:[n.jsxDEV("div",{className:"stats-grid",children:[n.jsxDEV("div",{className:"stat-card",children:[n.jsxDEV("div",{className:"stat-value",children:i.length},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:133,columnNumber:15},this),n.jsxDEV("div",{className:"stat-label",children:"Total Courses"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:134,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:132,columnNumber:13},this),n.jsxDEV("div",{className:"stat-card",children:[n.jsxDEV("div",{className:"stat-value",children:(a==null?void 0:a.activeEnrollments)||0},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:137,columnNumber:15},this),n.jsxDEV("div",{className:"stat-label",children:"Active Students"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:138,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:136,columnNumber:13},this),n.jsxDEV("div",{className:"stat-card",children:[n.jsxDEV("div",{className:"stat-value",children:(a==null?void 0:a.completedSessions)||0},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:141,columnNumber:15},this),n.jsxDEV("div",{className:"stat-label",children:"Sessions Completed"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:142,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:140,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:131,columnNumber:11},this),n.jsxDEV("div",{className:"dashboard-section",children:[n.jsxDEV("h2",{children:"My Courses"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:147,columnNumber:13},this),i.length===0?n.jsxDEV("div",{className:"empty-state",children:[n.jsxDEV("p",{children:"You haven't created any courses yet."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:150,columnNumber:17},this),n.jsxDEV(he,{to:"/teach/create-course",className:"btn-primary",children:"Create Your First Course"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:151,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:149,columnNumber:15},this):n.jsxDEV("div",{className:"instructor-courses-list",children:i.map(N=>{var R;const y=((R=a==null?void 0:a.enrollmentsByCourse[N.title])==null?void 0:R.active)||0,E=N.description&&N.description.length>150?N.description.substring(0,150)+"...":N.description;return n.jsxDEV("div",{className:"instructor-course-card",children:[n.jsxDEV("div",{className:"course-details",children:[n.jsxDEV("h3",{children:N.title},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:168,columnNumber:25},this),n.jsxDEV("div",{className:"course-stats",children:n.jsxDEV("span",{children:[y," active",N.enrollment_limit?` / ${N.enrollment_limit}`:""," students",N.enrollment_limit&&y>=N.enrollment_limit&&n.jsxDEV("span",{className:"full-indicator",children:" (FULL)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:174,columnNumber:31},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:170,columnNumber:27},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:169,columnNumber:25},this),E&&n.jsxDEV("p",{className:"course-description",children:E},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:179,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:167,columnNumber:23},this),n.jsxDEV("div",{className:"course-actions",children:[n.jsxDEV(he,{to:`/courses/${N.id}`,className:"btn-secondary",children:"View"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:183,columnNumber:25},this),n.jsxDEV(he,{to:`/teach/course/${N.id}/manage`,className:"btn-primary",children:"Manage Course"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:186,columnNumber:25},this),n.jsxDEV("button",{onClick:()=>p(N.id,N.title),className:"btn-danger",disabled:f===N.id,children:f===N.id?"Deleting...":"Delete"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:189,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:182,columnNumber:23},this)]},N.id,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:166,columnNumber:21},this)})},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:156,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:146,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:130,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/InstructorDashboard.jsx",lineNumber:87,columnNumber:5},this)}function ax(){const e=bs(),{user:s}=ke(),[r,t]=j.useState(!1),[i,o]=j.useState(""),[a,l]=j.useState({title:"",description:"",category:"performing-arts",courseType:"group",price:"",sessionDuration:"",sessionTime:"",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,enrollmentLimit:"",meetingLink:"",startDate:"",repeatEvery:1,repeatUnit:"week",selectedDays:[],endDate:"",hasEndDate:!1}),c=m=>{const f=m.target.type==="checkbox"?m.target.checked:m.target.value;l({...a,[m.target.name]:f})},u=m=>{const f=a.selectedDays;f.includes(m)?l({...a,selectedDays:f.filter(h=>h!==m)}):l({...a,selectedDays:[...f,m]})},d=async m=>{if(m.preventDefault(),!s){o("You must be logged in to create a course");return}t(!0),o("");try{const f={title:a.title,description:a.description,category:a.category,courseType:a.courseType,sessionDuration:a.sessionDuration,enrollmentLimit:a.enrollmentLimit,meetingLink:a.meetingLink,timezone:a.timezone,startDate:a.startDate,sessionTime:a.sessionTime,selectedDays:a.selectedDays,hasEndDate:a.hasEndDate,endDate:a.endDate},h=await Z(X.courses.create,f,s);console.log("Course created successfully:",h.course),alert(h.message),e("/instructor/dashboard")}catch(f){console.error("Error creating course:",f),o(f.message||"Failed to create course. Please try again.")}finally{t(!1)}};return n.jsxDEV("div",{className:"create-course",style:{padding:"1.5rem",maxWidth:"1200px",margin:"0 auto"},children:[n.jsxDEV("h1",{style:{marginBottom:"1rem",fontSize:"1.75rem"},children:"Create New Course"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:105,columnNumber:7},this),i&&n.jsxDEV("div",{className:"error-message",style:{background:"#fee2e2",border:"1px solid #fecaca",color:"#dc2626",padding:"0.75rem",borderRadius:"0.5rem",marginBottom:"1rem"},children:i},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:108,columnNumber:9},this),n.jsxDEV("form",{onSubmit:d,className:"auth-form",style:{maxWidth:"100%"},children:[n.jsxDEV("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem",marginBottom:"1rem"},children:[n.jsxDEV("div",{children:[n.jsxDEV("div",{className:"form-group",style:{marginBottom:"1rem"},children:[n.jsxDEV("label",{htmlFor:"title",style:{fontSize:"0.9rem",marginBottom:"0.25rem"},children:"Course Title *"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:127,columnNumber:15},this),n.jsxDEV("input",{id:"title",name:"title",type:"text",value:a.title,onChange:c,required:!0,placeholder:"e.g., Introduction to Positive Parenting",style:{padding:"0.5rem"}},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:128,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:126,columnNumber:13},this),n.jsxDEV("div",{className:"form-group",style:{marginBottom:"1rem"},children:[n.jsxDEV("label",{htmlFor:"description",style:{fontSize:"0.9rem",marginBottom:"0.25rem"},children:"Description *"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:141,columnNumber:15},this),n.jsxDEV("textarea",{id:"description",name:"description",value:a.description,onChange:c,required:!0,rows:"3",placeholder:"Describe what students will learn...",style:{padding:"0.5rem"}},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:142,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:140,columnNumber:13},this),n.jsxDEV("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"category",style:{fontSize:"0.9rem",marginBottom:"0.25rem"},children:"Category *"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:156,columnNumber:17},this),n.jsxDEV("select",{id:"category",name:"category",value:a.category,onChange:c,required:!0,style:{padding:"0.5rem"},children:[n.jsxDEV("option",{value:"performing-arts",children:"Performing Arts "},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:165,columnNumber:19},this),n.jsxDEV("option",{value:"visual-arts",children:"Visual Arts "},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:166,columnNumber:19},this),n.jsxDEV("option",{value:"parenting",children:"Parenting "},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:167,columnNumber:19},this),n.jsxDEV("option",{value:"academics",children:"Academics "},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:168,columnNumber:19},this),n.jsxDEV("option",{value:"language",children:"Language "},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:169,columnNumber:19},this),n.jsxDEV("option",{value:"spirituality",children:"Spirituality "},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:170,columnNumber:19},this),n.jsxDEV("option",{value:"lifeskills",children:"Life Skills "},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:171,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:157,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:155,columnNumber:15},this),n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"courseType",style:{fontSize:"0.9rem",marginBottom:"0.25rem"},children:"Course Type *"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:176,columnNumber:17},this),n.jsxDEV("select",{id:"courseType",name:"courseType",value:a.courseType,onChange:c,required:!0,style:{padding:"0.5rem"},children:[n.jsxDEV("option",{value:"group",children:"Group Class "},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:185,columnNumber:19},this),n.jsxDEV("option",{value:"one-on-one",children:"One-on-One "},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:186,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:177,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:175,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:154,columnNumber:13},this),n.jsxDEV("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"price",style:{fontSize:"0.9rem",marginBottom:"0.25rem"},children:"Price ($)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:193,columnNumber:17},this),n.jsxDEV("input",{id:"price",name:"price",type:"number",value:"0.00",disabled:!0,style:{backgroundColor:"#f3f4f6",cursor:"not-allowed",color:"#6b7280",padding:"0.5rem"},placeholder:"0.00"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:194,columnNumber:17},this),n.jsxDEV("p",{style:{fontSize:"0.75rem",color:"#10b981",margin:"0.25rem 0 0 0"},children:" Free for all"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:208,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:192,columnNumber:15},this),n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"enrollmentLimit",style:{fontSize:"0.9rem",marginBottom:"0.25rem"},children:"Max Students"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:214,columnNumber:17},this),n.jsxDEV("input",{id:"enrollmentLimit",name:"enrollmentLimit",type:"number",value:a.enrollmentLimit,onChange:c,min:"1",placeholder:"Unlimited",style:{padding:"0.5rem"}},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:217,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:213,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:191,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:125,columnNumber:11},this),n.jsxDEV("div",{children:[a.courseType==="one-on-one"&&n.jsxDEV("div",{style:{background:"#dbeafe",borderLeft:"4px solid #3b82f6",padding:"0.75rem",borderRadius:"0.5rem",marginBottom:"1rem",fontSize:"0.85rem"},children:n.jsxDEV("p",{style:{margin:0,color:"#1e40af"},children:" Schedule individual sessions with each student after enrollment."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:242,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:234,columnNumber:15},this),a.courseType==="group"&&n.jsxDEV(n.Fragment,{children:[n.jsxDEV("h3",{style:{fontSize:"1.1rem",marginBottom:"0.75rem",color:"#374151"},children:"Schedule"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:250,columnNumber:17},this),n.jsxDEV("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"sessionDuration",style:{fontSize:"0.9rem",marginBottom:"0.25rem"},children:"Duration (min) *"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:254,columnNumber:21},this),n.jsxDEV("input",{id:"sessionDuration",name:"sessionDuration",type:"number",value:a.sessionDuration,onChange:c,required:!0,min:"15",step:"15",placeholder:"60",style:{padding:"0.5rem"}},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:255,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:253,columnNumber:19},this),n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"sessionTime",style:{fontSize:"0.9rem",marginBottom:"0.25rem"},children:"Time *"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:270,columnNumber:21},this),n.jsxDEV("input",{id:"sessionTime",name:"sessionTime",type:"time",value:a.sessionTime,onChange:c,required:!0,style:{padding:"0.5rem"}},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:271,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:269,columnNumber:19},this),n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"timezone",style:{fontSize:"0.9rem",marginBottom:"0.25rem"},children:"Timezone *"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:283,columnNumber:21},this),n.jsxDEV("select",{id:"timezone",name:"timezone",value:a.timezone,onChange:c,required:!0,style:{padding:"0.5rem"},children:[n.jsxDEV("option",{value:"America/New_York",children:"Eastern Time (ET)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:292,columnNumber:23},this),n.jsxDEV("option",{value:"America/Chicago",children:"Central Time (CT)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:293,columnNumber:23},this),n.jsxDEV("option",{value:"America/Denver",children:"Mountain Time (MT)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:294,columnNumber:23},this),n.jsxDEV("option",{value:"America/Los_Angeles",children:"Pacific Time (PT)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:295,columnNumber:23},this),n.jsxDEV("option",{value:"America/Anchorage",children:"Alaska Time (AKT)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:296,columnNumber:23},this),n.jsxDEV("option",{value:"Pacific/Honolulu",children:"Hawaii Time (HT)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:297,columnNumber:23},this),n.jsxDEV("option",{value:"Europe/London",children:"London (GMT/BST)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:298,columnNumber:23},this),n.jsxDEV("option",{value:"Europe/Paris",children:"Paris (CET/CEST)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:299,columnNumber:23},this),n.jsxDEV("option",{value:"Europe/Berlin",children:"Berlin (CET/CEST)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:300,columnNumber:23},this),n.jsxDEV("option",{value:"Asia/Dubai",children:"Dubai (GST)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:301,columnNumber:23},this),n.jsxDEV("option",{value:"Asia/Kolkata",children:"India (IST)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:302,columnNumber:23},this),n.jsxDEV("option",{value:"Asia/Singapore",children:"Singapore (SGT)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:303,columnNumber:23},this),n.jsxDEV("option",{value:"Asia/Tokyo",children:"Tokyo (JST)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:304,columnNumber:23},this),n.jsxDEV("option",{value:"Australia/Sydney",children:"Sydney (AEDT/AEST)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:305,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:284,columnNumber:21},this),n.jsxDEV("p",{style:{fontSize:"0.75rem",color:"#666",marginTop:"0.25rem"},children:"Students will see times in their local timezone"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:307,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:282,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:252,columnNumber:17},this),n.jsxDEV("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"startDate",style:{fontSize:"0.9rem",marginBottom:"0.25rem"},children:"Start Date *"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:315,columnNumber:21},this),n.jsxDEV("input",{id:"startDate",name:"startDate",type:"date",value:a.startDate,onChange:c,required:!0,style:{padding:"0.5rem"}},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:316,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:314,columnNumber:19},this),a.hasEndDate&&n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"endDate",style:{fontSize:"0.9rem",marginBottom:"0.25rem"},children:"End Date *"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:329,columnNumber:23},this),n.jsxDEV("input",{id:"endDate",name:"endDate",type:"date",value:a.endDate,onChange:c,min:a.startDate,required:a.hasEndDate,style:{padding:"0.5rem"}},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:330,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:328,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:313,columnNumber:17},this),n.jsxDEV("div",{className:"form-group",style:{marginBottom:"1rem"},children:[n.jsxDEV("label",{style:{fontSize:"0.9rem",marginBottom:"0.25rem"},children:"Repeat Every *"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:345,columnNumber:19},this),n.jsxDEV("div",{style:{display:"flex",gap:"0.5rem"},children:[n.jsxDEV("input",{type:"number",name:"repeatEvery",value:a.repeatEvery,onChange:c,min:"1",max:"52",required:!0,style:{width:"80px",padding:"0.5rem"}},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:347,columnNumber:21},this),n.jsxDEV("select",{name:"repeatUnit",value:a.repeatUnit,onChange:c,required:!0,style:{flex:1,padding:"0.5rem"},children:[n.jsxDEV("option",{value:"day",children:"Day(s)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:364,columnNumber:23},this),n.jsxDEV("option",{value:"week",children:"Week(s)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:365,columnNumber:23},this),n.jsxDEV("option",{value:"month",children:"Month(s)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:366,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:357,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:346,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:344,columnNumber:17},this),a.repeatUnit==="week"&&n.jsxDEV("div",{className:"form-group",style:{marginBottom:"1rem"},children:[n.jsxDEV("label",{style:{fontSize:"0.9rem",marginBottom:"0.5rem"},children:"On These Days *"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:373,columnNumber:21},this),n.jsxDEV("div",{className:"days-selector",children:[{short:"M",full:"Monday"},{short:"T",full:"Tuesday"},{short:"W",full:"Wednesday"},{short:"T",full:"Thursday"},{short:"F",full:"Friday"},{short:"S",full:"Saturday"},{short:"S",full:"Sunday"}].map((m,f)=>n.jsxDEV("button",{type:"button",className:`day-button ${a.selectedDays.includes(m.full)?"active":""}`,onClick:()=>u(m.full),style:{padding:"0.5rem 0.75rem",fontSize:"0.9rem"},children:m.short},f,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:384,columnNumber:25},this))},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:374,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:372,columnNumber:19},this),n.jsxDEV("div",{className:"form-group",children:n.jsxDEV("label",{style:{display:"flex",alignItems:"center",fontSize:"0.9rem"},children:[n.jsxDEV("input",{type:"checkbox",name:"hasEndDate",checked:a.hasEndDate,onChange:c,style:{marginRight:"0.5rem"}},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:400,columnNumber:21},this),"Set an end date"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:399,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:398,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:249,columnNumber:15},this),n.jsxDEV("div",{className:"form-group",style:{marginTop:"1rem"},children:[n.jsxDEV("label",{htmlFor:"meetingLink",style:{fontSize:"0.9rem",marginBottom:"0.25rem"},children:"Meeting Link (Optional)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:414,columnNumber:15},this),n.jsxDEV("input",{id:"meetingLink",name:"meetingLink",type:"url",value:a.meetingLink,onChange:c,placeholder:"https://zoom.us/j/... or https://meet.google.com/...",style:{padding:"0.5rem"}},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:417,columnNumber:15},this),n.jsxDEV("p",{style:{fontSize:"0.75rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:" This link will be used for all sessions. You can add or update it later."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:426,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:413,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:232,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:122,columnNumber:9},this),n.jsxDEV("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem",paddingTop:"1rem",borderTop:"1px solid #e5e7eb"},children:[n.jsxDEV("button",{type:"button",onClick:()=>e(-1),className:"btn-secondary",style:{minWidth:"120px"},children:"Cancel"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:435,columnNumber:11},this),n.jsxDEV("button",{type:"submit",className:"btn-primary",disabled:r,style:{minWidth:"120px"},children:r?"Creating...":"Create Course"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:438,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:434,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:120,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CreateCourse.jsx",lineNumber:104,columnNumber:5},this)}function Sm(){var $e,ns;const{courseId:e}=Ar(),s=bs(),{user:r}=ke(),[t,i]=j.useState(null),[o,a]=j.useState([]),[l,c]=j.useState([]),[u,d]=j.useState(!0),[m,f]=j.useState(""),[h,g]=j.useState(""),[p,N]=j.useState(!1),[y,E]=j.useState(""),[R,A]=j.useState(null),[_,C]=j.useState({title:"",date:"",time:"",duration:60}),[S,I]=j.useState(!1),[F,U]=j.useState({studentId:"",date:"",time:"",topic:"",meetingLink:""}),[T,w]=j.useState(!1),[v,D]=j.useState({studentId:"",selectedDays:[],time:"",duration:60,startDate:"",endDate:"",frequency:"weekly"}),[H,z]=j.useState({}),$=(t==null?void 0:t.course_type)==="group",O=o.length;t!=null&&t.enrollment_limit;const V=$?null:o.map(k=>({student:k,sessions:l.filter(K=>K.student_id===k.id)}));j.useEffect(()=>{e&&r&&M()},[e,r]);const M=async()=>{try{d(!0),f("");const k=await Z(X.courses.getById,e);i(k),g(k.meeting_link||""),E(k.meeting_link||"");const K=await Z(X.sessions.getCourse,e,r.id);if(k.course_type==="group"&&(!K||K.length===0)&&k.selected_days&&k.selected_days.length>0&&k.session_time&&k.start_date){console.log("Auto-generating sessions for group course...");const be=await B(k);c(be)}else c(K||[]);const Y=(await Z(X.enrollments.getCourse,e,r.id)).map(be=>be.profiles?{...be.profiles}:null).filter(be=>be!==null);a(Y)}catch(k){console.error("Error fetching course data:",k),f("Failed to load course data")}finally{d(!1)}},B=async k=>{const K=[],ae=new Date(k.start_date),Y=k.has_end_date&&k.end_date,be=Y?new Date(k.end_date):null,J=Y?1e3:5,[_e,Ve]=k.session_time.split(":");let ie=new Date(ae),ds=1,is=0;for(;is<J&&(!be||ie<=be);){const ys=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][ie.getDay()];if(k.selected_days.includes(ys)){const xs=new Date(ie);xs.setHours(parseInt(_e),parseInt(Ve),0,0);const fr={title:`Topic ${ds}`,description:"",session_date:xs.toISOString(),duration:k.session_duration||60,meeting_link:k.meeting_link||"",student_id:null};try{const Es=await Z(X.sessions.create,e,fr,r.id);K.push(Es),ds++,is++}catch(Es){console.error("Error creating session:",Es)}}ie.setDate(ie.getDate()+1)}return console.log(`Generated ${K.length} sessions${Y?"":" (5 initial sessions for open-ended course)"}`),K.sort((ys,xs)=>new Date(ys.session_date)-new Date(xs.session_date))};if(u)return n.jsxDEV("div",{className:"manage-sessions",children:n.jsxDEV("div",{className:"loading-state",style:{textAlign:"center",padding:"3rem"},children:n.jsxDEV("p",{children:"Loading sessions..."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:242,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:241,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:240,columnNumber:7},this);if(m||!t)return n.jsxDEV("div",{className:"manage-sessions",children:n.jsxDEV("div",{className:"error-state",style:{textAlign:"center",padding:"3rem"},children:[n.jsxDEV("p",{children:m||"Course not found"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:252,columnNumber:11},this),n.jsxDEV("button",{onClick:()=>s("/instructor/dashboard"),className:"btn-primary",children:"Back to Dashboard"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:253,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:251,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:250,columnNumber:7},this);const W=k=>{const K=new Date(k.session_date);A(k.id),C({title:k.title||"",date:K.toISOString().split("T")[0],time:K.toTimeString().slice(0,5),duration:k.duration_minutes||60})},Q=async()=>{try{await Z(X.courses.update,e,{meeting_link:y},r.id),g(y),N(!1)}catch(k){console.error("Error updating meeting link:",k),alert("Failed to update meeting link")}},me=()=>{E(h),N(!1)},je=async k=>{try{const K=new Date(`${_.date}T${_.time}`),ae={title:_.title,session_date:K.toISOString(),duration_minutes:parseInt(_.duration)};await Z(X.sessions.update,k,ae,r.id),c(l.map(Y=>Y.id===k?{...Y,...ae}:Y)),A(null),C({title:"",date:"",time:"",duration:60})}catch(K){console.error("Error updating session:",K),alert("Failed to update session")}},ze=()=>{A(null),C({title:"",date:"",time:"",duration:60})},Me=async k=>{if(confirm("Are you sure you want to delete this session? This action cannot be undone."))try{await Z(X.sessions.delete,k,r.id),c(l.filter(K=>K.id!==k)),console.log("Session deleted successfully")}catch(K){console.error("Error deleting session:",K),alert("Failed to delete session")}},Pe=async()=>{if(!F.date||!F.time){alert("Please fill in date and time");return}if(!$&&!F.studentId){alert("Please select a student");return}try{const k=new Date(`${F.date}T${F.time}`),K=o.find(be=>be.id===F.studentId),ae={title:F.topic||"Session",description:"",session_date:k.toISOString(),duration_minutes:60,meeting_link:F.meetingLink||h};!$&&K&&(ae.student_id=K.id);const Y=await Z(X.sessions.create,e,ae,r.id);c([...l,Y].sort((be,J)=>new Date(be.session_date)-new Date(J.session_date))),I(!1),U({studentId:"",date:"",time:"",topic:"",meetingLink:""})}catch(k){console.error("Error creating session:",k),alert(k.message||"Failed to create session")}},Ye=()=>{I(!1),U({studentId:"",date:"",time:"",topic:"",meetingLink:""})},Fe=(k=null)=>{const K=k?H[k]:H.group;D(K||{studentId:k||"",selectedDays:[],time:"",duration:60,startDate:new Date().toISOString().split("T")[0],endDate:"",frequency:"weekly"}),w(!0)},mr=k=>{D(K=>({...K,selectedDays:K.selectedDays.includes(k)?K.selectedDays.filter(ae=>ae!==k):[...K.selectedDays,k]}))},dr=async()=>{if(!v.selectedDays.length||!v.time||!v.startDate){alert("Please fill in all required fields");return}if(!$&&!v.studentId){alert("Please select a student");return}try{const k=[],K=new Date(v.startDate),ae=v.endDate&&v.endDate.trim()!=="",Y=ae?new Date(v.endDate):null,be=ae?1e3:5;let J=new Date(K),_e=1,Ve=0;for(;Ve<be&&(!Y||J<=Y);){const is=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][J.getDay()];if(v.selectedDays.includes(is)){const ys=new Date(J),[xs,fr]=v.time.split(":");ys.setHours(parseInt(xs),parseInt(fr),0,0);const Es=o.find(Un=>Un.id===v.studentId),Ct={title:`Session ${_e}`,description:"",session_date:ys.toISOString(),duration_minutes:v.duration,meeting_link:h};!$&&Es&&(Ct.student_id=Es.id);const wn=await Z(X.sessions.create,e,Ct,r.id);k.push(wn),_e++,Ve++}J.setDate(J.getDate()+1)}c([...l,...k].sort((is,ys)=>new Date(is.session_date)-new Date(ys.session_date)));const ie=$?"group":v.studentId;z({...H,[ie]:v}),w(!1);const ds=ae?`Created ${k.length} sessions from ${K.toLocaleDateString()} to ${Y.toLocaleDateString()}`:`Created ${k.length} initial sessions starting ${K.toLocaleDateString()}`;alert(ds)}catch(k){console.error("Error generating recurring sessions:",k),alert("Failed to generate sessions")}},Js=()=>{w(!1)},ts=k=>{const K=new Date(k.session_date);return{date:K.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),time:K.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}};return n.jsxDEV("div",{className:"manage-sessions",children:[n.jsxDEV("div",{className:"sessions-header",children:n.jsxDEV("div",{children:[n.jsxDEV("button",{onClick:()=>s(-1),className:"back-button",children:" Back"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:539,columnNumber:11},this),n.jsxDEV("h1",{children:"Manage Sessions"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:542,columnNumber:11},this),n.jsxDEV("p",{className:"course-title",children:t.title},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:543,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:538,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:537,columnNumber:7},this),n.jsxDEV("div",{className:"sessions-info-banner",children:n.jsxDEV("p",{children:[" ",$?"Set session topics for your group classes. All enrolled students will see the same schedule.":"Set session topics based on each student's progress and learning needs. Topics help students prepare for upcoming classes."]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:548,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:547,columnNumber:7},this),$&&t.selected_days&&t.selected_days.length>0&&n.jsxDEV("div",{className:"course-schedule-info",children:[n.jsxDEV("h3",{children:" Course Schedule"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:557,columnNumber:11},this),n.jsxDEV("div",{className:"schedule-details-grid",children:[n.jsxDEV("div",{className:"schedule-detail",children:[n.jsxDEV("span",{className:"detail-label",children:"Days:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:560,columnNumber:15},this),n.jsxDEV("span",{className:"detail-value",children:t.selected_days.join(", ")},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:561,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:559,columnNumber:13},this),n.jsxDEV("div",{className:"schedule-detail",children:[n.jsxDEV("span",{className:"detail-label",children:"Time:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:564,columnNumber:15},this),n.jsxDEV("span",{className:"detail-value",children:t.session_time||"Not set"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:565,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:563,columnNumber:13},this),n.jsxDEV("div",{className:"schedule-detail",children:[n.jsxDEV("span",{className:"detail-label",children:"Duration:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:568,columnNumber:15},this),n.jsxDEV("span",{className:"detail-value",children:[t.session_duration," minutes"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:569,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:567,columnNumber:13},this),n.jsxDEV("div",{className:"schedule-detail",children:[n.jsxDEV("span",{className:"detail-label",children:"Frequency:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:572,columnNumber:15},this),n.jsxDEV("span",{className:"detail-value",children:t.frequency||"Weekly"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:573,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:571,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:558,columnNumber:11},this),t.start_date&&n.jsxDEV("div",{className:"schedule-dates",children:[n.jsxDEV("span",{className:"detail-label",children:"Start Date:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:578,columnNumber:15},this),n.jsxDEV("span",{className:"detail-value",children:new Date(t.start_date).toLocaleDateString()},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:579,columnNumber:15},this),t.has_end_date&&t.end_date&&n.jsxDEV(n.Fragment,{children:[n.jsxDEV("span",{className:"detail-label",style:{marginLeft:"2rem"},children:"End Date:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:582,columnNumber:19},this),n.jsxDEV("span",{className:"detail-value",children:new Date(t.end_date).toLocaleDateString()},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:583,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:581,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:577,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:556,columnNumber:9},this),n.jsxDEV("div",{className:"course-meeting-link-section",children:[n.jsxDEV("h3",{children:" Course Meeting Link"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:592,columnNumber:9},this),n.jsxDEV("p",{className:"meeting-link-description",children:"Set one meeting link for all sessions in this course"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:593,columnNumber:9},this),p?n.jsxDEV("div",{className:"meeting-link-edit",children:[n.jsxDEV("input",{type:"url",value:y,onChange:k=>E(k.target.value),placeholder:"https://zoom.us/j/... or https://meet.google.com/...",className:"meeting-link-input",autoFocus:!0},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:596,columnNumber:13},this),n.jsxDEV("div",{className:"meeting-link-actions",children:[n.jsxDEV("button",{onClick:Q,className:"btn-primary btn-sm",children:"Save Link"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:605,columnNumber:15},this),n.jsxDEV("button",{onClick:me,className:"btn-secondary btn-sm",children:"Cancel"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:608,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:604,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:595,columnNumber:11},this):n.jsxDEV("div",{className:"meeting-link-display-section",children:[n.jsxDEV("div",{className:"meeting-link-value",children:[" ",h||"No meeting link set"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:615,columnNumber:13},this),n.jsxDEV("button",{onClick:()=>N(!0),className:"btn-secondary btn-sm",children:h?"Edit Link":"Set Link"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:618,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:614,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:591,columnNumber:7},this),$?n.jsxDEV(n.Fragment,{children:n.jsxDEV("div",{className:"sessions-container",children:[n.jsxDEV("div",{className:"sessions-header-row",children:[n.jsxDEV("h2",{children:"Group Sessions Schedule"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:629,columnNumber:15},this),n.jsxDEV("div",{className:"header-actions",children:n.jsxDEV("button",{onClick:()=>I(!0),className:"btn-primary",children:"+ Create Single Session"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:631,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:630,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:628,columnNumber:13},this),n.jsxDEV("div",{className:"sessions-list",children:l.map(k=>{const{date:K,time:ae}=ts(k);return n.jsxDEV("div",{className:"session-item",children:[n.jsxDEV("div",{className:"session-date-time",children:[n.jsxDEV("div",{className:"session-date",children:K},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:642,columnNumber:23},this),n.jsxDEV("div",{className:"session-time",children:ae},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:643,columnNumber:23},this),n.jsxDEV("div",{className:"session-attendees",children:[" ",O," students"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:644,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:641,columnNumber:21},this),n.jsxDEV("div",{className:"session-topic-area",children:R===k.id?n.jsxDEV("div",{className:"topic-edit",children:[n.jsxDEV("div",{className:"edit-fields",children:[n.jsxDEV("input",{type:"text",value:_.title,onChange:Y=>C({..._,title:Y.target.value}),placeholder:"Enter session topic...",className:"topic-input",autoFocus:!0},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:651,columnNumber:29},this),n.jsxDEV("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"0.5rem"},children:[n.jsxDEV("input",{type:"date",value:_.date,onChange:Y=>C({..._,date:Y.target.value}),className:"topic-input"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:660,columnNumber:31},this),n.jsxDEV("input",{type:"time",value:_.time,onChange:Y=>C({..._,time:Y.target.value}),className:"topic-input"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:666,columnNumber:31},this),n.jsxDEV("input",{type:"number",value:_.duration,onChange:Y=>C({..._,duration:Y.target.value}),placeholder:"Duration (min)",className:"topic-input",min:"15",step:"15"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:672,columnNumber:31},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:659,columnNumber:29},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:650,columnNumber:27},this),n.jsxDEV("div",{className:"topic-actions",children:[n.jsxDEV("button",{onClick:()=>je(k.id),className:"btn-primary btn-sm",children:"Save"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:684,columnNumber:29},this),n.jsxDEV("button",{onClick:ze,className:"btn-secondary btn-sm",children:"Cancel"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:690,columnNumber:29},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:683,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:649,columnNumber:25},this):n.jsxDEV("div",{className:"topic-display",children:[n.jsxDEV("div",{className:"topic-info",children:k.title&&k.title.trim()?n.jsxDEV(n.Fragment,{children:[n.jsxDEV("div",{className:"topic-text",children:k.title},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:703,columnNumber:33},this),n.jsxDEV("span",{className:"topic-status set",children:" Ready"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:704,columnNumber:33},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:702,columnNumber:31},this):n.jsxDEV(n.Fragment,{children:[n.jsxDEV("div",{className:"topic-text empty",children:"No topic set yet"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:708,columnNumber:33},this),n.jsxDEV("span",{className:"topic-status pending",children:" Pending"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:709,columnNumber:33},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:707,columnNumber:31},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:700,columnNumber:27},this),n.jsxDEV("div",{style:{display:"flex",gap:"0.5rem"},children:[n.jsxDEV("button",{onClick:()=>W(k),className:"btn-secondary btn-sm",children:k.title?"Edit":"Set Details"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:714,columnNumber:29},this),n.jsxDEV("button",{onClick:()=>Me(k.id),className:"btn-secondary btn-sm",style:{color:"#dc2626"},children:"Delete"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:720,columnNumber:29},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:713,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:699,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:647,columnNumber:21},this)]},k.id,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:640,columnNumber:19},this)})},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:636,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:627,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:626,columnNumber:9},this):n.jsxDEV("div",{className:"students-sessions",children:[n.jsxDEV("div",{className:"create-session-section",children:n.jsxDEV("button",{onClick:()=>I(!0),className:"btn-primary",children:"+ Create Single Session"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:740,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:739,columnNumber:11},this),V.map(({student:k,sessions:K})=>n.jsxDEV("div",{className:"student-section",children:[n.jsxDEV("div",{className:"student-header",children:[n.jsxDEV("div",{children:n.jsxDEV("h2",{children:[k.first_name," ",k.last_name]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:749,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:748,columnNumber:17},this),n.jsxDEV("div",{className:"student-actions",children:n.jsxDEV("button",{onClick:()=>Fe(k.id),className:"btn-secondary btn-sm",children:H[k.id]?" Edit Schedule":" Set Schedule"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:752,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:751,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:747,columnNumber:15},this),n.jsxDEV("div",{className:"sessions-list",children:K.map(ae=>{const{date:Y,time:be}=ts(ae);return n.jsxDEV("div",{className:"session-item",children:[n.jsxDEV("div",{className:"session-date-time",children:[n.jsxDEV("div",{className:"session-date",children:Y},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:767,columnNumber:25},this),n.jsxDEV("div",{className:"session-time",children:be},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:768,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:766,columnNumber:23},this),n.jsxDEV("div",{className:"session-topic-area",children:R===ae.id?n.jsxDEV("div",{className:"topic-edit",children:[n.jsxDEV("div",{className:"edit-fields",children:[n.jsxDEV("input",{type:"text",value:_.title,onChange:J=>C({..._,title:J.target.value}),placeholder:"Enter session topic...",className:"topic-input",autoFocus:!0},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:775,columnNumber:31},this),n.jsxDEV("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"0.5rem"},children:[n.jsxDEV("input",{type:"date",value:_.date,onChange:J=>C({..._,date:J.target.value}),className:"topic-input"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:784,columnNumber:33},this),n.jsxDEV("input",{type:"time",value:_.time,onChange:J=>C({..._,time:J.target.value}),className:"topic-input"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:790,columnNumber:33},this),n.jsxDEV("input",{type:"number",value:_.duration,onChange:J=>C({..._,duration:J.target.value}),placeholder:"Duration (min)",className:"topic-input",min:"15",step:"15"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:796,columnNumber:33},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:783,columnNumber:31},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:774,columnNumber:29},this),n.jsxDEV("div",{className:"topic-actions",children:[n.jsxDEV("button",{onClick:()=>je(ae.id),className:"btn-primary btn-sm",children:"Save"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:808,columnNumber:31},this),n.jsxDEV("button",{onClick:ze,className:"btn-secondary btn-sm",children:"Cancel"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:814,columnNumber:31},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:807,columnNumber:29},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:773,columnNumber:27},this):n.jsxDEV("div",{className:"topic-display",children:[n.jsxDEV("div",{className:"topic-info",children:ae.title&&ae.title.trim()?n.jsxDEV(n.Fragment,{children:[n.jsxDEV("div",{className:"topic-text",children:ae.title},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:827,columnNumber:35},this),n.jsxDEV("span",{className:"topic-status set",children:" Ready"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:828,columnNumber:35},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:826,columnNumber:33},this):n.jsxDEV(n.Fragment,{children:[n.jsxDEV("div",{className:"topic-text empty",children:"No topic set yet"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:832,columnNumber:35},this),n.jsxDEV("span",{className:"topic-status pending",children:" Pending"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:833,columnNumber:35},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:831,columnNumber:33},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:824,columnNumber:29},this),n.jsxDEV("div",{style:{display:"flex",gap:"0.5rem"},children:[n.jsxDEV("button",{onClick:()=>W(ae),className:"btn-secondary btn-sm",children:ae.title?"Edit":"Set Details"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:838,columnNumber:31},this),n.jsxDEV("button",{onClick:()=>Me(ae.id),className:"btn-secondary btn-sm",style:{color:"#dc2626"},children:"Delete"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:844,columnNumber:31},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:837,columnNumber:29},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:823,columnNumber:27},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:771,columnNumber:23},this)]},ae.id,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:765,columnNumber:21},this)})},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:761,columnNumber:15},this)]},k.id,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:746,columnNumber:13},this))]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:738,columnNumber:9},this),S&&n.jsxDEV("div",{className:"modal-overlay",onClick:Ye,children:n.jsxDEV("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[n.jsxDEV("div",{className:"modal-header",children:[n.jsxDEV("h2",{children:"Create New Session"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:869,columnNumber:15},this),n.jsxDEV("button",{className:"close-button",onClick:Ye,children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:870,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:868,columnNumber:13},this),n.jsxDEV("div",{className:"modal-body",children:[!$&&n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"student",children:"Student *"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:876,columnNumber:19},this),n.jsxDEV("select",{id:"student",value:F.studentId,onChange:k=>U({...F,studentId:k.target.value}),className:"form-input",children:[n.jsxDEV("option",{value:"",children:"Select a student"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:883,columnNumber:21},this),o.map(k=>n.jsxDEV("option",{value:k.id,children:[k.first_name," ",k.last_name]},k.id,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:885,columnNumber:23},this))]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:877,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:875,columnNumber:17},this),n.jsxDEV("div",{className:"form-row",children:[n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"date",children:"Date *"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:895,columnNumber:19},this),n.jsxDEV("input",{id:"date",type:"date",value:F.date,onChange:k=>U({...F,date:k.target.value}),className:"form-input",min:new Date().toISOString().split("T")[0]},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:896,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:894,columnNumber:17},this),n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"time",children:"Time *"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:907,columnNumber:19},this),n.jsxDEV("input",{id:"time",type:"time",value:F.time,onChange:k=>U({...F,time:k.target.value}),className:"form-input"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:908,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:906,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:893,columnNumber:15},this),n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"topic",children:"Session Topic (Optional)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:919,columnNumber:17},this),n.jsxDEV("input",{id:"topic",type:"text",value:F.topic,onChange:k=>U({...F,topic:k.target.value}),placeholder:"e.g., Review scales and introduce new piece",className:"form-input"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:920,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:918,columnNumber:15},this),n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"meetingLink",children:"Meeting Link (Optional)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:931,columnNumber:17},this),n.jsxDEV("input",{id:"meetingLink",type:"url",value:F.meetingLink,onChange:k=>U({...F,meetingLink:k.target.value}),placeholder:"https://zoom.us/j/... or https://meet.google.com/...",className:"form-input"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:932,columnNumber:17},this),n.jsxDEV("p",{className:"form-hint",children:["Leave blank to use course default: ",h]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:940,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:930,columnNumber:15},this),n.jsxDEV("div",{className:"info-banner-modal",children:[n.jsxDEV("span",{className:"info-icon",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:944,columnNumber:17},this),n.jsxDEV("p",{children:$?"This session will be visible to all enrolled students.":"After creating the session, you can discuss details with the student via chat."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:945,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:943,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:873,columnNumber:13},this),n.jsxDEV("div",{className:"modal-footer",children:[n.jsxDEV("button",{className:"btn-secondary",onClick:Ye,children:"Cancel"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:954,columnNumber:15},this),n.jsxDEV("button",{className:"btn-primary",onClick:Pe,children:"Create Session"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:957,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:953,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:867,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:866,columnNumber:9},this),T&&n.jsxDEV("div",{className:"modal-overlay",onClick:Js,children:n.jsxDEV("div",{className:"modal-content modal-large",onClick:k=>k.stopPropagation(),children:[n.jsxDEV("div",{className:"modal-header",children:[n.jsxDEV("h2",{children:H[v.studentId||"group"]?"Edit Recurring Schedule":"Set up Recurring Schedule"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:970,columnNumber:15},this),n.jsxDEV("button",{className:"close-button",onClick:Js,children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:971,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:969,columnNumber:13},this),n.jsxDEV("div",{className:"modal-body",children:[!$&&n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"recurring-student",children:"Student *"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:977,columnNumber:19},this),n.jsxDEV("select",{id:"recurring-student",value:v.studentId,onChange:k=>D({...v,studentId:k.target.value}),className:"form-input",children:[n.jsxDEV("option",{value:"",children:"Select a student"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:984,columnNumber:21},this),o.map(k=>n.jsxDEV("option",{value:k.id,children:[k.first_name," ",k.last_name]},k.id,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:986,columnNumber:23},this))]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:978,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:976,columnNumber:17},this),n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{children:"On These Days *"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:995,columnNumber:17},this),n.jsxDEV("div",{className:"day-selector",children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(k=>n.jsxDEV("button",{type:"button",className:`day-button ${v.selectedDays.includes(k)?"selected":""}`,onClick:()=>mr(k),children:k.substring(0,3)},k,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:998,columnNumber:21},this))},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:996,columnNumber:17},this),n.jsxDEV("p",{className:"form-hint",children:"Select the days of the week when sessions will occur"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1008,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:994,columnNumber:15},this),n.jsxDEV("div",{className:"form-row",children:[n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"recurring-time",children:"Session Time *"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1013,columnNumber:19},this),n.jsxDEV("input",{id:"recurring-time",type:"time",value:v.time,onChange:k=>D({...v,time:k.target.value}),className:"form-input"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1014,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1012,columnNumber:17},this),n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"duration",children:"Duration (minutes)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1024,columnNumber:19},this),n.jsxDEV("input",{id:"duration",type:"number",value:v.duration,onChange:k=>D({...v,duration:parseInt(k.target.value)}),className:"form-input",min:"15",step:"15"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1025,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1023,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1011,columnNumber:15},this),n.jsxDEV("div",{className:"form-row",children:[n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"start-date",children:"Start Date *"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1039,columnNumber:19},this),n.jsxDEV("input",{id:"start-date",type:"date",value:v.startDate,onChange:k=>D({...v,startDate:k.target.value}),className:"form-input",min:new Date().toISOString().split("T")[0]},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1040,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1038,columnNumber:17},this),n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"end-date",children:"End Date (Optional)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1051,columnNumber:19},this),n.jsxDEV("input",{id:"end-date",type:"date",value:v.endDate,onChange:k=>D({...v,endDate:k.target.value}),className:"form-input",min:v.startDate},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1052,columnNumber:19},this),n.jsxDEV("p",{className:"form-hint",children:"Leave blank to create 5 initial sessions"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1060,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1050,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1037,columnNumber:15},this),n.jsxDEV("div",{className:"info-banner-modal",children:[n.jsxDEV("span",{className:"info-icon",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1065,columnNumber:17},this),n.jsxDEV("p",{children:$?"This will create recurring sessions for all enrolled students on the selected days and time.":"This will create recurring sessions for the selected student. You can set different schedules for each student."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1066,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1064,columnNumber:15},this),v.selectedDays.length>0&&v.time&&v.startDate&&n.jsxDEV("div",{className:"schedule-preview",children:[n.jsxDEV("h4",{children:"Schedule Preview:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1075,columnNumber:19},this),n.jsxDEV("p",{children:[n.jsxDEV("strong",{children:v.selectedDays.join(", ")},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1077,columnNumber:21},this)," at ",n.jsxDEV("strong",{children:v.time},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1077,columnNumber:85},this),!$&&v.studentId&&n.jsxDEV(n.Fragment,{children:[" for ",n.jsxDEV("strong",{children:[($e=o.find(k=>k.id===v.studentId))==null?void 0:$e.first_name," ",(ns=o.find(k=>k.id===v.studentId))==null?void 0:ns.last_name]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1079,columnNumber:30},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1079,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1076,columnNumber:19},this),n.jsxDEV("p",{className:"preview-detail",children:["Starting ",new Date(v.startDate).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}),v.endDate&&n.jsxDEV(n.Fragment,{children:[" until ",new Date(v.endDate).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1085,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1082,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1074,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:974,columnNumber:13},this),n.jsxDEV("div",{className:"modal-footer",children:[n.jsxDEV("button",{className:"btn-secondary",onClick:Js,children:"Cancel"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1093,columnNumber:15},this),n.jsxDEV("button",{className:"btn-primary",onClick:dr,children:H[v.studentId||"group"]?"Update Schedule":"Generate Sessions"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1096,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:1092,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:968,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:967,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageSessions.jsx",lineNumber:536,columnNumber:5},this)}function lx({course:e}){const{courseId:s}=Ar(),{user:r}=ke(),[t,i]=j.useState([]),[o,a]=j.useState(!0),[l,c]=j.useState(""),u=(e==null?void 0:e.course_type)==="group";j.useEffect(()=>{s&&r&&d()},[s,r]);const d=async()=>{try{a(!0),c("");const N=(await Z(X.enrollments.getCourse,s,r.id)).map(y=>({...y.profiles?{id:y.profiles.id,first_name:y.profiles.first_name,last_name:y.profiles.last_name,full_name:y.profiles.full_name,neurodiversity_profile:y.profiles.neurodiversity_profile||[],avatar_url:y.profiles.avatar_url}:{},enrollmentId:y.id,enrolledAt:y.enrolled_at,status:y.status})).filter(y=>y.id);i(N)}catch(p){console.error("Error fetching enrolled students:",p),c("Failed to load enrolled students")}finally{a(!1)}},m=async p=>{const N=`${p.first_name} ${p.last_name}`;if(confirm(`Are you sure you want to remove ${N} from this course? This action cannot be undone.`))try{await Z(X.enrollments.withdraw,s,p.id),i(t.filter(y=>y.id!==p.id)),alert(`${N} has been removed from the course.`)}catch(y){console.error("Error removing student:",y),alert("Failed to remove student. Please try again.")}};if(o)return n.jsxDEV("div",{className:"course-students",children:n.jsxDEV("div",{className:"loading-state",style:{textAlign:"center",padding:"2rem"},children:n.jsxDEV("p",{children:"Loading students..."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:85,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:84,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:83,columnNumber:7},this);if(l)return n.jsxDEV("div",{className:"course-students",children:n.jsxDEV("div",{className:"error-state",style:{textAlign:"center",padding:"2rem"},children:[n.jsxDEV("p",{children:l},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:95,columnNumber:11},this),n.jsxDEV("button",{onClick:d,className:"btn-primary",style:{marginTop:"1rem"},children:"Try Again"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:96,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:94,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:93,columnNumber:7},this);const f=t.length,h=(e==null?void 0:e.enrollment_limit)||0,g=h>0?Math.max(0,h-f):"";return n.jsxDEV("div",{className:"course-students",children:[u&&n.jsxDEV("div",{className:"course-stats-grid",children:[n.jsxDEV("div",{className:"stat-card",children:[n.jsxDEV("div",{className:"stat-value",children:f},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:113,columnNumber:13},this),n.jsxDEV("div",{className:"stat-label",children:"Enrolled Students"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:114,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:112,columnNumber:11},this),n.jsxDEV("div",{className:"stat-card",children:[n.jsxDEV("div",{className:"stat-value",children:g},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:117,columnNumber:13},this),n.jsxDEV("div",{className:"stat-label",children:"Spots Remaining"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:118,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:116,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:111,columnNumber:9},this),n.jsxDEV("div",{className:"students-section",children:[n.jsxDEV("div",{className:"students-header",children:[n.jsxDEV("h2",{children:u?" Enrolled Students":" Individual Students"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:125,columnNumber:11},this),n.jsxDEV("div",{className:"info-banner",children:n.jsxDEV("p",{children:[" ",u?"All students attend the same group sessions together":"Each student has their own schedule and individual sessions"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:127,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:126,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:124,columnNumber:9},this),t.length>0?n.jsxDEV("div",{className:"students-list",children:t.map(p=>n.jsxDEV("div",{className:"student-card",children:[n.jsxDEV("div",{className:"student-info",children:[n.jsxDEV("div",{className:"student-name",children:[" ",p.first_name," ",p.last_name]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:139,columnNumber:19},this),p.neurodiversity_profile&&p.neurodiversity_profile.length>0&&n.jsxDEV("div",{className:"student-profile",children:p.neurodiversity_profile.map((N,y)=>n.jsxDEV("span",{className:"profile-badge",children:[" ",N]},y,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:146,columnNumber:25},this))},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:144,columnNumber:21},this),n.jsxDEV("div",{className:"student-meta",children:n.jsxDEV("span",{className:"enrolled-date",children:["Enrolled: ",new Date(p.enrolledAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:152,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:151,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:138,columnNumber:17},this),n.jsxDEV("div",{className:"student-actions",children:n.jsxDEV("button",{onClick:()=>m(p),className:"btn-secondary btn-sm remove-btn",children:"Remove from Course"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:163,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:162,columnNumber:17},this)]},p.id,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:137,columnNumber:15},this))},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:135,columnNumber:11},this):n.jsxDEV("div",{className:"empty-state",children:n.jsxDEV("p",{children:"No students enrolled yet. Share your course link to get students!"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:175,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:174,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:123,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseStudents.jsx",lineNumber:109,columnNumber:5},this)}function cx({course:e}){return n.jsxDEV("div",{className:"course-homework",children:n.jsxDEV(Dn,{featureName:"homework assignments"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseHomework.jsx",lineNumber:7,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseHomework.jsx",lineNumber:6,columnNumber:5},this)}function ux({course:e}){return n.jsxDEV("div",{className:"course-resources",children:n.jsxDEV(Dn,{featureName:"course resources"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseResources.jsx",lineNumber:7,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseResources.jsx",lineNumber:6,columnNumber:5},this)}function mx({course:e}){const{courseId:s}=Ar(),{user:r}=ke(),[t,i]=j.useState([]),[o,a]=j.useState(""),[l,c]=j.useState(!0),[u,d]=j.useState(!1),[m,f]=j.useState(""),[h,g]=j.useState(null),[p,N]=j.useState([]),[y,E]=j.useState(new Set),R=j.useRef(null),A=j.useRef(null),_=j.useRef(null),C=(e==null?void 0:e.course_type)==="group";j.useEffect(()=>(s&&r&&(S(),F()),()=>{A.current&&A.current.unsubscribe(),_.current&&_.current.unsubscribe()}),[s,r,h]),j.useEffect(()=>{U()},[t]),j.useEffect(()=>{!C&&s&&r&&I()},[C,s,r,t]);const S=async()=>{try{c(!0),f("");let V;C?V=await Z(X.messages.getCourse,s,r.id):h?V=await Z(X.messages.getConversation,s,r.id,h):V=[],i(V||[])}catch(V){console.error("Error loading messages:",V),f("Failed to load messages")}finally{c(!1)}},I=async()=>{try{const V=await Z(X.messages.getThreads,s,r.id);N(V||[])}catch(V){console.error("Error loading conversation threads:",V)}},F=()=>{A.current=Em(s,{onMessage:V=>{if(console.log(" Received new message:",V),V.sender_id===r.id){console.log("Skipping own message from broadcast");return}C&&!V.recipient_id?i(M=>[...M,V]):!C&&h&&(V.sender_id===h&&V.recipient_id===r.id||V.sender_id===r.id&&V.recipient_id===h)&&i(M=>[...M,V])}}),_.current=jm(s,r.id,{name:r.full_name||`${r.firstName} ${r.lastName}`,role:"instructor"},{onSync:V=>{const M=new Set;Object.values(V).forEach(B=>{B.forEach(W=>{W.user_id!==r.id&&M.add(W.user_id)})}),E(M)}})},U=()=>{var V;(V=R.current)==null||V.scrollIntoView({behavior:"smooth"})},T=async V=>{if(V.preventDefault(),!(!o.trim()||u))try{d(!0);const M={content:o.trim(),recipient_id:!C&&h?h:null},B=await Z(X.messages.send,s,M,r.id);B&&i(W=>[...W,B]),a("")}catch(M){console.error("Error sending message:",M),alert("Failed to send message. Please try again.")}finally{d(!1)}},w=V=>{g(V)},v=()=>{g(null)},D=V=>{const M=new Date(V);return(new Date-M)/(1e3*60*60)<24?M.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):M.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})},H=V=>{if(!V)return"";const M=new Date(V),W=Math.floor((new Date-M)/(1e3*60));if(W<1)return"Just now";if(W<60)return`${W} min ago`;const Q=Math.floor(W/60);if(Q<24)return`${Q} hour${Q>1?"s":""} ago`;const me=Math.floor(Q/24);return me<7?`${me} day${me>1?"s":""} ago`:M.toLocaleDateString("en-US",{month:"short",day:"numeric"})},z=V=>{var M;return V.students&&V.students.first_name?`${V.students.first_name} ${V.students.last_name}`:((M=V.profiles)==null?void 0:M.full_name)||"Unknown"},$=()=>{const V=p.find(M=>M.student.id===h);return V?V.student.full_name:""},O=V=>y.has(V);if(l)return n.jsxDEV("div",{className:"course-chat",children:n.jsxDEV("div",{className:"loading-state",style:{textAlign:"center",padding:"2rem"},children:n.jsxDEV("p",{children:"Loading chat..."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:244,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:243,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:242,columnNumber:7},this);if(m)return n.jsxDEV("div",{className:"course-chat",children:n.jsxDEV("div",{className:"error-state",style:{textAlign:"center",padding:"2rem"},children:[n.jsxDEV("p",{children:m},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:254,columnNumber:11},this),n.jsxDEV("button",{onClick:S,className:"btn-primary",style:{marginTop:"1rem"},children:"Try Again"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:255,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:253,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:252,columnNumber:7},this);if(!C&&!h)return n.jsxDEV("div",{className:"course-chat",children:[n.jsxDEV("div",{className:"chat-header",children:[n.jsxDEV("h2",{children:" Student Messages"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:268,columnNumber:11},this),n.jsxDEV("div",{className:"info-banner",children:n.jsxDEV("p",{children:"Private conversations with each student. Click on a student to view and send messages."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:270,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:269,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:267,columnNumber:9},this),n.jsxDEV("div",{className:"chat-thread-list",children:p.length===0?n.jsxDEV("div",{className:"no-threads",children:n.jsxDEV("p",{children:"No students enrolled yet."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:280,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:279,columnNumber:13},this):p.map(V=>n.jsxDEV("div",{className:"chat-thread-item",onClick:()=>w(V.student.id),role:"button",tabIndex:0,children:[n.jsxDEV("div",{className:"thread-header",children:[n.jsxDEV("div",{className:"thread-student-info",children:[n.jsxDEV("span",{className:"thread-icon",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:293,columnNumber:21},this),n.jsxDEV("span",{className:"thread-student-name",children:V.student.full_name},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:294,columnNumber:21},this),O(V.student.id)&&n.jsxDEV("span",{className:"online-indicator",title:"Online",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:296,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:292,columnNumber:19},this),V.unreadCount>0&&n.jsxDEV("span",{className:"unread-badge",children:V.unreadCount},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:300,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:291,columnNumber:17},this),n.jsxDEV("div",{className:"thread-preview",children:[n.jsxDEV("span",{className:"thread-last-message",children:V.lastMessage?V.lastMessage.content:"No messages yet"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:304,columnNumber:19},this),V.lastMessage&&n.jsxDEV("span",{className:"thread-time",children:H(V.lastMessage.created_at)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:308,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:303,columnNumber:17},this)]},V.student.id,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:284,columnNumber:15},this))},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:277,columnNumber:9},this),n.jsxDEV("div",{className:"thread-list-footer",children:n.jsxDEV("p",{children:"Click a student to open chat"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:319,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:318,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:266,columnNumber:7},this);if(!C&&h){p.find(M=>M.student.id===h);const V=O(h);return n.jsxDEV("div",{className:"course-chat",children:[n.jsxDEV("div",{className:"chat-header",children:[n.jsxDEV("button",{onClick:v,className:"back-button","aria-label":"Back to messages",children:" Back to Messages"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:333,columnNumber:11},this),n.jsxDEV("h2",{children:[" Chat with ",$(),V&&n.jsxDEV("span",{className:"online-indicator",title:"Online",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:342,columnNumber:33},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:340,columnNumber:11},this),n.jsxDEV("div",{className:"info-banner",children:n.jsxDEV("p",{children:["Private conversation - only you and ",$()," can see these messages."]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:345,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:344,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:332,columnNumber:9},this),n.jsxDEV("div",{className:"chat-messages",children:[t.length===0?n.jsxDEV("div",{className:"no-messages",children:n.jsxDEV("p",{children:"No messages yet. Start the conversation!"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:354,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:353,columnNumber:13},this):t.map(M=>n.jsxDEV("div",{className:`message ${M.sender_id===r.id?"instructor-message":"student-message"}`,children:[n.jsxDEV("div",{className:"message-header",children:[n.jsxDEV("span",{className:"sender-name",children:M.sender_id===r.id?"You":z(M)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:363,columnNumber:19},this),n.jsxDEV("span",{className:"message-time",children:D(M.created_at)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:366,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:362,columnNumber:17},this),n.jsxDEV("div",{className:"message-content",children:M.content},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:368,columnNumber:17},this)]},M.id,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:358,columnNumber:15},this)),n.jsxDEV("div",{ref:R},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:374,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:351,columnNumber:9},this),n.jsxDEV("form",{onSubmit:T,className:"chat-input-form",children:[n.jsxDEV("input",{type:"text",value:o,onChange:M=>a(M.target.value),placeholder:"Type your message...",className:"chat-input","aria-label":"Message input",disabled:u},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:378,columnNumber:11},this),n.jsxDEV("button",{type:"submit",className:"btn btn-primary send-button",disabled:!o.trim()||u,children:u?"Sending...":"Send"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:387,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:377,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:331,columnNumber:7},this)}return n.jsxDEV("div",{className:"course-chat",children:[n.jsxDEV("div",{className:"chat-header",children:[n.jsxDEV("h2",{children:" Group Chat"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:403,columnNumber:9},this),n.jsxDEV("div",{className:"info-banner",children:n.jsxDEV("p",{children:"All students can see these messages. Use this space to share updates, answer questions, and build community."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:405,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:404,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:402,columnNumber:7},this),n.jsxDEV("div",{className:"chat-messages",children:[t.length===0?n.jsxDEV("div",{className:"no-messages",children:n.jsxDEV("p",{children:"No messages yet. Start the conversation!"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:415,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:414,columnNumber:11},this):t.map(V=>n.jsxDEV("div",{className:`message ${V.sender_id===r.id?"instructor-message":"student-message"}`,children:[n.jsxDEV("div",{className:"message-header",children:[n.jsxDEV("span",{className:"sender-name",children:[V.sender_id===r.id?"You (Instructor)":z(V),O(V.sender_id)&&V.sender_id!==r.id&&n.jsxDEV("span",{className:"online-indicator",title:"Online",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:427,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:424,columnNumber:17},this),n.jsxDEV("span",{className:"message-time",children:D(V.created_at)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:430,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:423,columnNumber:15},this),n.jsxDEV("div",{className:"message-content",children:V.content},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:432,columnNumber:15},this)]},V.id,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:419,columnNumber:13},this)),n.jsxDEV("div",{ref:R},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:438,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:412,columnNumber:7},this),n.jsxDEV("form",{onSubmit:T,className:"chat-input-form",children:[n.jsxDEV("input",{type:"text",value:o,onChange:V=>a(V.target.value),placeholder:"Type your message...",className:"chat-input","aria-label":"Message input",disabled:u},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:442,columnNumber:9},this),n.jsxDEV("button",{type:"submit",className:"btn btn-primary send-button",disabled:!o.trim()||u,children:u?"Sending...":"Send"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:451,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:441,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/CourseChat.jsx",lineNumber:401,columnNumber:5},this)}function dx(){const{courseId:e}=Ar(),s=bs(),[r,t]=$i(),{user:i}=ke(),[o,a]=j.useState(0),[l,c]=j.useState(null),[u,d]=j.useState([]),[m,f]=j.useState([]),[h,g]=j.useState(!0),[p,N]=j.useState(""),y=r.get("tab")||"sessions";if(j.useEffect(()=>{e&&(async()=>{try{g(!0);const F=await Z(X.courses.getById,e);c(F);const U=await Z(X.sessions.getCourse,e,i.id);d(U||[]);const T=await Z(X.enrollments.getCourse,e,i.id);f(T||[])}catch(F){console.error("Error fetching course:",F),N("Failed to load course")}finally{g(!1)}})()},[e,i]),j.useEffect(()=>{const I=()=>{const U=localStorage.getItem(`chat_${e}`);if(U){const w=JSON.parse(U).filter(v=>v.senderRole!=="instructor"&&!v.readBy.includes(i.id)).length;a(w)}};I();const F=setInterval(I,5e3);return()=>clearInterval(F)},[e,i.id,y]),h)return n.jsxDEV("div",{className:"manage-course",children:n.jsxDEV("div",{className:"loading-state",children:"Loading course..."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:77,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:76,columnNumber:7},this);if(p||!l)return n.jsxDEV("div",{className:"manage-course",children:n.jsxDEV("div",{className:"error-state",children:[n.jsxDEV("p",{children:p||"Course not found"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:86,columnNumber:11},this),n.jsxDEV("button",{onClick:()=>s("/instructor/dashboard"),className:"btn-primary",children:"Back to Dashboard"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:87,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:85,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:84,columnNumber:7},this);const E=I=>{t({tab:I}),I==="chat"&&a(0)},R=m.length,A=(l==null?void 0:l.enrollment_limit)||0,_=A>0?Math.max(0,A-R):"",C=new Date,S=u.filter(I=>new Date(I.session_date)>C).length;return n.jsxDEV("div",{className:"manage-course",children:[n.jsxDEV("div",{className:"manage-course-header",children:[n.jsxDEV("button",{onClick:()=>s("/instructor/dashboard"),className:"back-button",children:" Back to Dashboard"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:115,columnNumber:9},this),n.jsxDEV("h1",{children:l.title},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:118,columnNumber:9},this),n.jsxDEV("p",{className:"course-subtitle",children:"Manage your course content and students"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:119,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:114,columnNumber:7},this),n.jsxDEV("div",{className:"course-stats",children:[n.jsxDEV("div",{className:"stat-card",children:[n.jsxDEV("div",{className:"stat-value",children:R},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:125,columnNumber:11},this),n.jsxDEV("div",{className:"stat-label",children:"Enrolled Students"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:126,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:124,columnNumber:9},this),n.jsxDEV("div",{className:"stat-card",children:[n.jsxDEV("div",{className:"stat-value",children:_},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:129,columnNumber:11},this),n.jsxDEV("div",{className:"stat-label",children:"Spots Remaining"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:130,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:128,columnNumber:9},this),n.jsxDEV("div",{className:"stat-card",children:[n.jsxDEV("div",{className:"stat-value",children:S},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:133,columnNumber:11},this),n.jsxDEV("div",{className:"stat-label",children:"Upcoming Sessions"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:134,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:132,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:123,columnNumber:7},this),n.jsxDEV("div",{className:"course-tabs",children:[n.jsxDEV("button",{className:`tab-button ${y==="sessions"?"active":""}`,onClick:()=>E("sessions"),children:" Sessions"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:139,columnNumber:9},this),n.jsxDEV("button",{className:`tab-button ${y==="students"?"active":""}`,onClick:()=>E("students"),children:" Students"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:145,columnNumber:9},this),n.jsxDEV("button",{className:`tab-button ${y==="homework"?"active":""}`,onClick:()=>E("homework"),children:" Homework"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:151,columnNumber:9},this),n.jsxDEV("button",{className:`tab-button ${y==="resources"?"active":""}`,onClick:()=>E("resources"),children:" Resources"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:157,columnNumber:9},this),n.jsxDEV("button",{className:`tab-button ${y==="chat"?"active":""}`,onClick:()=>E("chat"),children:[" Chat",o>0&&n.jsxDEV("span",{className:"notification-badge",children:o},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:168,columnNumber:31},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:163,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:138,columnNumber:7},this),n.jsxDEV("div",{className:"tab-content",children:[y==="sessions"&&n.jsxDEV(Sm,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:173,columnNumber:38},this),y==="students"&&n.jsxDEV(lx,{course:l},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:174,columnNumber:38},this),y==="homework"&&n.jsxDEV(cx,{course:l},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:175,columnNumber:38},this),y==="resources"&&n.jsxDEV(ux,{course:l},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:176,columnNumber:39},this),y==="chat"&&n.jsxDEV(mx,{course:l},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:177,columnNumber:34},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:172,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/ManageCourse.jsx",lineNumber:113,columnNumber:5},this)}function fx(){const{user:e,profile:s}=ke(),[r,t]=j.useState({firstName:(s==null?void 0:s.first_name)||"",lastName:(s==null?void 0:s.last_name)||"",email:(s==null?void 0:s.email)||(e==null?void 0:e.email)||"",bio:(s==null?void 0:s.bio)||"",expertise:(s==null?void 0:s.expertise)||[],neurodiversityProfile:(s==null?void 0:s.neurodiversity_profile)||[],otherExpertise:""}),[i,o]=j.useState(!1),[a,l]=j.useState(null);j.useEffect(()=>{if(s){const p={firstName:s.first_name||"",lastName:s.last_name||"",email:s.email||(e==null?void 0:e.email)||"",bio:s.bio||"",expertise:s.expertise||[],neurodiversityProfile:s.neurodiversity_profile||[],otherExpertise:""};t(p),l(p)}},[s,e]),j.useEffect(()=>{if(a){const p=r.firstName!==a.firstName||r.lastName!==a.lastName||r.email!==a.email||r.bio!==a.bio||JSON.stringify(r.expertise)!==JSON.stringify(a.expertise)||JSON.stringify(r.neurodiversityProfile)!==JSON.stringify(a.neurodiversityProfile);o(p)}},[r,a]);const c=[{value:"none",label:"None / Neurotypical"},{value:"autism",label:"Autism Spectrum"},{value:"adhd",label:"ADHD"},{value:"dyslexia",label:"Dyslexia"},{value:"dysgraphia",label:"Dysgraphia"},{value:"dyscalculia",label:"Dyscalculia"},{value:"other",label:"Other"}],u=p=>{const N=r.neurodiversityProfile;N.includes(p)?t({...r,neurodiversityProfile:N.filter(y=>y!==p)}):t({...r,neurodiversityProfile:[...N,p]})},d=p=>{const N=r.expertise||[];N.includes(p)?t({...r,expertise:N.filter(y=>y!==p)}):t({...r,expertise:[...N,p]})},m=p=>{t({...r,[p.target.name]:p.target.value})},f=async p=>{if(p.preventDefault(),!e){alert("You must be logged in to update your profile");return}try{let N=[...r.expertise];N.includes("other")&&r.otherExpertise.trim()&&(N=N.filter(E=>E!=="other"),N.push(r.otherExpertise.trim()));const{error:y}=await x.from("profiles").update({first_name:r.firstName,last_name:r.lastName,email:r.email,bio:r.bio,expertise:N,neurodiversity_profile:r.neurodiversityProfile}).eq("id",e.id);if(y){console.error("Error updating profile:",y),alert("Failed to update profile. Please try again.");return}alert("Profile updated successfully!"),l(r),o(!1)}catch(N){console.error("Error updating profile:",N),alert("An error occurred. Please try again.")}},h=()=>{t(a),o(!1)},g=(s==null?void 0:s.role)==="instructor";return n.jsxDEV("div",{className:"student-profile",children:[n.jsxDEV("div",{className:"profile-header",children:n.jsxDEV("div",{children:[n.jsxDEV("h1",{children:"My Profile"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:155,columnNumber:11},this),n.jsxDEV("p",{className:"profile-subtitle",children:g?"Manage your personal information and teaching profile":"Manage your personal information and learning preferences"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:156,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:154,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:153,columnNumber:7},this),n.jsxDEV("form",{onSubmit:f,className:"profile-form",children:[n.jsxDEV("div",{className:"profile-section",children:[n.jsxDEV("h2",{children:"Personal Information"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:166,columnNumber:11},this),n.jsxDEV("div",{className:"form-row",children:[n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"firstName",children:"First Name"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:169,columnNumber:15},this),n.jsxDEV("input",{id:"firstName",name:"firstName",type:"text",value:r.firstName,onChange:m,required:!0},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:170,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:168,columnNumber:13},this),n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"lastName",children:"Last Name"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:180,columnNumber:15},this),n.jsxDEV("input",{id:"lastName",name:"lastName",type:"text",value:r.lastName,onChange:m,required:!0},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:181,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:179,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:167,columnNumber:11},this),n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"email",children:"Email Address"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:193,columnNumber:13},this),n.jsxDEV("input",{id:"email",name:"email",type:"email",value:r.email,onChange:m,required:!0},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:194,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:192,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:165,columnNumber:9},this),g&&n.jsxDEV("div",{className:"profile-section",children:[n.jsxDEV("h2",{children:"About You"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:207,columnNumber:13},this),n.jsxDEV("p",{className:"section-description",children:"Tell families about your teaching experience, approach, and any additional information that helps them understand your expertise."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:208,columnNumber:13},this),n.jsxDEV("div",{className:"form-group",children:n.jsxDEV("textarea",{id:"bio",name:"bio",value:r.bio,onChange:m,rows:"6",placeholder:"e.g., I'm a certified special education teacher with 10 years of experience working with neurodivergent children. I specialize in creating inclusive learning environments and adapting teaching methods to each student's unique needs..."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:213,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:212,columnNumber:13},this),n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{children:"Your Teaching Specializations"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:224,columnNumber:15},this),n.jsxDEV("p",{className:"field-hint",children:"What neurodiversity areas do you specialize in or have experience teaching?"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:225,columnNumber:15},this),n.jsxDEV("div",{className:"checkbox-grid",children:c.map(p=>n.jsxDEV("label",{className:"checkbox-label",children:[n.jsxDEV("input",{type:"checkbox",checked:r.expertise.includes(p.value),onChange:()=>d(p.value)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:229,columnNumber:21},this),n.jsxDEV("span",{children:p.label},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:234,columnNumber:21},this)]},p.value,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:228,columnNumber:19},this))},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:226,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:223,columnNumber:13},this),r.expertise.includes("other")&&n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"otherExpertise",children:"Please specify other expertise:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:242,columnNumber:17},this),n.jsxDEV("input",{type:"text",id:"otherExpertise",name:"otherExpertise",value:r.otherExpertise,onChange:m,placeholder:"e.g., Sensory Processing Disorder"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:243,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:241,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:206,columnNumber:11},this),!g&&n.jsxDEV("div",{className:"profile-section",children:[n.jsxDEV("h2",{children:"About You"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:258,columnNumber:13},this),n.jsxDEV("p",{className:"section-description",children:"Tell us about yourself, your learning goals, and any additional information that helps instructors support you better."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:259,columnNumber:13},this),n.jsxDEV("div",{className:"form-group",children:n.jsxDEV("textarea",{id:"bio",name:"bio",value:r.bio,onChange:m,rows:"4",placeholder:"e.g., I love art and music, and I'm excited to learn new things. I learn best with visual aids and hands-on activities..."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:264,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:263,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:257,columnNumber:11},this),n.jsxDEV("div",{className:"profile-section",children:[n.jsxDEV("h2",{children:g?"Your Unique Mind":"Your Learning Style"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:277,columnNumber:11},this),n.jsxDEV("p",{className:"section-description",children:g?"Share what makes your mind unique to help students understand your teaching approach and create a more inclusive learning environment. This information is visible to enrolled students.":"Help us understand what makes your mind unique so instructors can provide the best support. This information is private and only shared with your enrolled instructors."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:278,columnNumber:11},this),n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{children:"What's unique about your mind? (Select all that apply)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:285,columnNumber:13},this),n.jsxDEV("div",{className:"checkbox-grid",children:c.map(p=>n.jsxDEV("label",{className:"checkbox-label",children:[n.jsxDEV("input",{type:"checkbox",checked:r.neurodiversityProfile.includes(p.value),onChange:()=>u(p.value)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:289,columnNumber:19},this),n.jsxDEV("span",{children:p.label},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:294,columnNumber:19},this)]},p.value,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:288,columnNumber:17},this))},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:286,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:284,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:276,columnNumber:9},this),i&&n.jsxDEV("div",{className:"profile-actions",children:[n.jsxDEV("button",{type:"button",onClick:h,className:"btn-secondary",children:"Cancel"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:303,columnNumber:13},this),n.jsxDEV("button",{type:"submit",className:"btn-primary",children:"Save Changes"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:306,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:302,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:164,columnNumber:7},this),n.jsxDEV("div",{className:"profile-section danger-zone",children:[n.jsxDEV("h2",{children:"Account Management"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:314,columnNumber:9},this),n.jsxDEV("p",{className:"section-description",children:"Permanently delete your account and all associated data. This action cannot be undone."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:315,columnNumber:9},this),n.jsxDEV("button",{type:"button",onClick:()=>{window.confirm("Are you sure you want to delete your account? This action cannot be undone and all your data will be permanently deleted.")&&alert("Account deletion will be implemented soon.")},className:"btn-danger",children:"Delete Account"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:318,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:313,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/StudentProfile.jsx",lineNumber:152,columnNumber:5},this)}function hx(){return n.jsxDEV("div",{className:"legal-page",children:n.jsxDEV("div",{className:"legal-container",children:[n.jsxDEV("h1",{children:"Privacy Policy"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:7,columnNumber:9},this),n.jsxDEV("p",{className:"last-updated",children:"Last Updated: January 22, 2026"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:8,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"1. Introduction"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:11,columnNumber:11},this),n.jsxDEV("p",{children:'Welcome to UniqueBrains ("we," "our," or "us"). We are committed to protecting your privacy and ensuring the security of your personal information. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our online learning platform at uniquebrains.org.'},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:12,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:10,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"2. Information We Collect"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:18,columnNumber:11},this),n.jsxDEV("h3",{children:"2.1 Personal Information"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:20,columnNumber:11},this),n.jsxDEV("p",{children:"We collect information that you provide directly to us, including:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:21,columnNumber:11},this),n.jsxDEV("ul",{children:[n.jsxDEV("li",{children:"Name, email address, and contact information"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:23,columnNumber:13},this),n.jsxDEV("li",{children:"Account credentials (username and password)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:24,columnNumber:13},this),n.jsxDEV("li",{children:"Profile information (age, grade level, learning preferences)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:25,columnNumber:13},this),n.jsxDEV("li",{children:"Payment and billing information"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:26,columnNumber:13},this),n.jsxDEV("li",{children:"Communications with us"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:27,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:22,columnNumber:11},this),n.jsxDEV("h3",{children:"2.2 Student Information"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:30,columnNumber:11},this),n.jsxDEV("p",{children:"For student accounts, we collect:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:31,columnNumber:11},this),n.jsxDEV("ul",{children:[n.jsxDEV("li",{children:"Student names and ages"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:33,columnNumber:13},this),n.jsxDEV("li",{children:"Grade levels and educational information"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:34,columnNumber:13},this),n.jsxDEV("li",{children:"Neurodiversity profiles and learning accommodations"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:35,columnNumber:13},this),n.jsxDEV("li",{children:"Course enrollment and progress data"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:36,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:32,columnNumber:11},this),n.jsxDEV("h3",{children:"2.3 Automatically Collected Information"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:39,columnNumber:11},this),n.jsxDEV("p",{children:"When you use our platform, we automatically collect:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:40,columnNumber:11},this),n.jsxDEV("ul",{children:[n.jsxDEV("li",{children:"Device information (browser type, operating system)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:42,columnNumber:13},this),n.jsxDEV("li",{children:"Usage data (pages visited, features used, time spent)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:43,columnNumber:13},this),n.jsxDEV("li",{children:"IP address and location data"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:44,columnNumber:13},this),n.jsxDEV("li",{children:"Cookies and similar tracking technologies"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:45,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:41,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:17,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"3. How We Use Your Information"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:50,columnNumber:11},this),n.jsxDEV("p",{children:"We use the information we collect to:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:51,columnNumber:11},this),n.jsxDEV("ul",{children:[n.jsxDEV("li",{children:"Provide, maintain, and improve our educational services"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:53,columnNumber:13},this),n.jsxDEV("li",{children:"Process enrollments and manage course access"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:54,columnNumber:13},this),n.jsxDEV("li",{children:"Facilitate communication between students and instructors"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:55,columnNumber:13},this),n.jsxDEV("li",{children:"Personalize learning experiences based on individual needs"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:56,columnNumber:13},this),n.jsxDEV("li",{children:"Process payments and prevent fraud"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:57,columnNumber:13},this),n.jsxDEV("li",{children:"Send important updates, notifications, and educational content"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:58,columnNumber:13},this),n.jsxDEV("li",{children:"Analyze usage patterns to improve our platform"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:59,columnNumber:13},this),n.jsxDEV("li",{children:"Comply with legal obligations"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:60,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:52,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:49,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"4. Information Sharing and Disclosure"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:65,columnNumber:11},this),n.jsxDEV("h3",{children:"4.1 With Your Consent"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:67,columnNumber:11},this),n.jsxDEV("p",{children:"We may share your information with third parties when you give us explicit consent to do so."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:68,columnNumber:11},this),n.jsxDEV("h3",{children:"4.2 Service Providers"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:70,columnNumber:11},this),n.jsxDEV("p",{children:"We share information with trusted service providers who assist us in operating our platform, including:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:71,columnNumber:11},this),n.jsxDEV("ul",{children:[n.jsxDEV("li",{children:"Cloud hosting services (Supabase)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:73,columnNumber:13},this),n.jsxDEV("li",{children:"Payment processors"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:74,columnNumber:13},this),n.jsxDEV("li",{children:"Email service providers"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:75,columnNumber:13},this),n.jsxDEV("li",{children:"Analytics providers"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:76,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:72,columnNumber:11},this),n.jsxDEV("h3",{children:"4.3 Instructors"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:79,columnNumber:11},this),n.jsxDEV("p",{children:"Course instructors have access to enrolled student information necessary to provide educational services, including names, progress data, and submitted assignments."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:80,columnNumber:11},this),n.jsxDEV("h3",{children:"4.4 Legal Requirements"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:82,columnNumber:11},this),n.jsxDEV("p",{children:"We may disclose information if required by law or in response to valid legal requests."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:83,columnNumber:11},this),n.jsxDEV("h3",{children:"4.5 What We Don't Do"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:85,columnNumber:11},this),n.jsxDEV("p",{children:"We do NOT:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:86,columnNumber:11},this),n.jsxDEV("ul",{children:[n.jsxDEV("li",{children:"Sell your personal information to third parties"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:88,columnNumber:13},this),n.jsxDEV("li",{children:"Use student data for advertising purposes"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:89,columnNumber:13},this),n.jsxDEV("li",{children:"Share information with unauthorized parties"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:90,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:87,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:64,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"5. Children's Privacy"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:95,columnNumber:11},this),n.jsxDEV("p",{children:"UniqueBrains is designed to serve students of all ages, including children under 13. We comply with the Children's Online Privacy Protection Act (COPPA) and similar regulations:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:96,columnNumber:11},this),n.jsxDEV("ul",{children:[n.jsxDEV("li",{children:"We require parental consent before collecting information from users under 18"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:100,columnNumber:13},this),n.jsxDEV("li",{children:"We collect only the minimum information necessary to provide educational services"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:101,columnNumber:13},this),n.jsxDEV("li",{children:"Student data is never used for advertising or marketing purposes"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:102,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:99,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:94,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"6. Data Security"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:107,columnNumber:11},this),n.jsxDEV("p",{children:"We implement industry-standard security measures to protect your information, including:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:108,columnNumber:11},this),n.jsxDEV("ul",{children:[n.jsxDEV("li",{children:"Encryption of data in transit and at rest"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:112,columnNumber:13},this),n.jsxDEV("li",{children:"Secure authentication and access controls"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:113,columnNumber:13},this),n.jsxDEV("li",{children:"Regular security audits and updates"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:114,columnNumber:13},this),n.jsxDEV("li",{children:"Row-level security policies in our database"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:115,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:111,columnNumber:11},this),n.jsxDEV("p",{children:"However, no method of transmission over the internet is 100% secure. While we strive to protect your information, we cannot guarantee absolute security."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:117,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:106,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"7. Your Rights and Choices"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:123,columnNumber:11},this),n.jsxDEV("h3",{children:"7.1 Access and Update"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:125,columnNumber:11},this),n.jsxDEV("p",{children:"You can access and update your account information at any time through your profile settings."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:126,columnNumber:11},this),n.jsxDEV("h3",{children:"7.2 Data Deletion"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:128,columnNumber:11},this),n.jsxDEV("p",{children:"You can request deletion of your account and associated data by contacting us at privacy@uniquebrains.org."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:129,columnNumber:11},this),n.jsxDEV("h3",{children:"7.3 Marketing Communications"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:131,columnNumber:11},this),n.jsxDEV("p",{children:"You can opt out of marketing emails by clicking the unsubscribe link in any promotional email."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:132,columnNumber:11},this),n.jsxDEV("h3",{children:"7.4 Cookies"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:134,columnNumber:11},this),n.jsxDEV("p",{children:"You can control cookies through your browser settings, though some features may not function properly if cookies are disabled."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:135,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:122,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"8. Data Retention"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:139,columnNumber:11},this),n.jsxDEV("p",{children:"We retain your information for as long as your account is active or as needed to provide services. After account deletion, we may retain certain information for legal compliance, dispute resolution, and legitimate business purposes."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:140,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:138,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"9. International Data Transfers"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:146,columnNumber:11},this),n.jsxDEV("p",{children:"Your information may be transferred to and processed in countries other than your country of residence. We ensure appropriate safeguards are in place to protect your information in accordance with this Privacy Policy."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:147,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:145,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"10. Third-Party Links"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:153,columnNumber:11},this),n.jsxDEV("p",{children:"Our platform may contain links to third-party websites. We are not responsible for the privacy practices of these external sites. We encourage you to review their privacy policies."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:154,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:152,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"11. Changes to This Privacy Policy"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:160,columnNumber:11},this),n.jsxDEV("p",{children:'We may update this Privacy Policy from time to time. We will notify you of significant changes by posting the new policy on this page and updating the "Last Updated" date. Your continued use of our platform after changes constitutes acceptance of the updated policy.'},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:161,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:159,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"12. Contact Us"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:167,columnNumber:11},this),n.jsxDEV("p",{children:"If you have questions or concerns about this Privacy Policy or our data practices, please contact us:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:168,columnNumber:11},this),n.jsxDEV("ul",{children:[n.jsxDEV("li",{children:"Email: privacy@uniquebrains.org"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:170,columnNumber:13},this),n.jsxDEV("li",{children:"Website: https://uniquebrains.org"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:171,columnNumber:13},this),n.jsxDEV("li",{children:"Instagram: @ouruniquebrains"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:172,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:169,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:166,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"13. California Privacy Rights"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:177,columnNumber:11},this),n.jsxDEV("p",{children:"California residents have additional rights under the California Consumer Privacy Act (CCPA), including the right to know what personal information we collect, the right to delete personal information, and the right to opt-out of the sale of personal information. We do not sell personal information."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:178,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:176,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"14. GDPR Compliance"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:184,columnNumber:11},this),n.jsxDEV("p",{children:"For users in the European Economic Area (EEA), we comply with the General Data Protection Regulation (GDPR). You have the right to access, rectify, erase, restrict processing, data portability, and object to processing of your personal data."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:185,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:183,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:6,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/PrivacyPolicy.jsx",lineNumber:5,columnNumber:5},this)}function gx(){return n.jsxDEV("div",{className:"legal-page",children:n.jsxDEV("div",{className:"legal-container",children:[n.jsxDEV("h1",{children:"Terms of Service"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:7,columnNumber:9},this),n.jsxDEV("p",{className:"last-updated",children:"Last Updated: January 22, 2026"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:8,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"1. Acceptance of Terms"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:11,columnNumber:11},this),n.jsxDEV("p",{children:'Welcome to UniqueBrains! By accessing or using our online learning platform at uniquebrains.org ("Platform"), you agree to be bound by these Terms of Service ("Terms"). If you do not agree to these Terms, please do not use our Platform.'},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:12,columnNumber:11},this),n.jsxDEV("p",{children:'These Terms constitute a legally binding agreement between you and UniqueBrains ("we," "us," or "our").'},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:15,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:10,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"2. Description of Service"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:21,columnNumber:11},this),n.jsxDEV("p",{children:"UniqueBrains provides an online learning platform that connects students with instructors for educational courses. Our services include:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:22,columnNumber:11},this),n.jsxDEV("ul",{children:[n.jsxDEV("li",{children:"Course marketplace and enrollment"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:26,columnNumber:13},this),n.jsxDEV("li",{children:"Live online classes and recorded sessions"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:27,columnNumber:13},this),n.jsxDEV("li",{children:"Educational resources and materials"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:28,columnNumber:13},this),n.jsxDEV("li",{children:"Homework assignments and progress tracking"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:29,columnNumber:13},this),n.jsxDEV("li",{children:"Communication tools between students and instructors"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:30,columnNumber:13},this),n.jsxDEV("li",{children:"Support for neurodiverse learners"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:31,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:25,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:20,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"3. User Accounts"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:36,columnNumber:11},this),n.jsxDEV("h3",{children:"3.1 Account Creation"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:38,columnNumber:11},this),n.jsxDEV("p",{children:"To use certain features of our Platform, you must create an account. You agree to:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:39,columnNumber:11},this),n.jsxDEV("ul",{children:[n.jsxDEV("li",{children:"Provide accurate, current, and complete information"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:41,columnNumber:13},this),n.jsxDEV("li",{children:"Maintain and update your information to keep it accurate"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:42,columnNumber:13},this),n.jsxDEV("li",{children:"Maintain the security of your password"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:43,columnNumber:13},this),n.jsxDEV("li",{children:"Accept responsibility for all activities under your account"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:44,columnNumber:13},this),n.jsxDEV("li",{children:"Notify us immediately of any unauthorized use"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:45,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:40,columnNumber:11},this),n.jsxDEV("h3",{children:"3.2 Account Types"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:48,columnNumber:11},this),n.jsxDEV("p",{children:"We offer two types of accounts:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:49,columnNumber:11},this),n.jsxDEV("ul",{children:[n.jsxDEV("li",{children:[n.jsxDEV("strong",{children:"Student Accounts:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:51,columnNumber:17},this)," For individual learners"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:51,columnNumber:13},this),n.jsxDEV("li",{children:[n.jsxDEV("strong",{children:"Instructor Accounts:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:52,columnNumber:17},this)," For educators creating and teaching courses"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:52,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:50,columnNumber:11},this),n.jsxDEV("h3",{children:"3.3 Age Requirements"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:55,columnNumber:11},this),n.jsxDEV("p",{children:"Users under 18 should have parental consent to use the Platform."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:56,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:35,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"4. User Conduct"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:62,columnNumber:11},this),n.jsxDEV("p",{children:"You agree NOT to:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:63,columnNumber:11},this),n.jsxDEV("ul",{children:[n.jsxDEV("li",{children:"Violate any applicable laws or regulations"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:65,columnNumber:13},this),n.jsxDEV("li",{children:"Infringe on intellectual property rights of others"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:66,columnNumber:13},this),n.jsxDEV("li",{children:"Upload malicious code, viruses, or harmful content"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:67,columnNumber:13},this),n.jsxDEV("li",{children:"Harass, bully, or threaten other users"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:68,columnNumber:13},this),n.jsxDEV("li",{children:"Share inappropriate or offensive content"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:69,columnNumber:13},this),n.jsxDEV("li",{children:"Impersonate others or misrepresent your identity"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:70,columnNumber:13},this),n.jsxDEV("li",{children:"Attempt to gain unauthorized access to the Platform"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:71,columnNumber:13},this),n.jsxDEV("li",{children:"Interfere with the proper functioning of the Platform"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:72,columnNumber:13},this),n.jsxDEV("li",{children:"Use the Platform for commercial purposes without authorization"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:73,columnNumber:13},this),n.jsxDEV("li",{children:"Share your account credentials with others"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:74,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:64,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:61,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"5. Course Enrollment and Payment"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:79,columnNumber:11},this),n.jsxDEV("h3",{children:"5.1 Course Enrollment"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:81,columnNumber:11},this),n.jsxDEV("p",{children:"When you enroll in a course, you agree to participate actively and respectfully. Course availability, schedules, and content are subject to change."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:82,columnNumber:11},this),n.jsxDEV("h3",{children:"5.2 Payment Terms"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:86,columnNumber:11},this),n.jsxDEV("ul",{children:[n.jsxDEV("li",{children:"Course fees are displayed at the time of enrollment"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:88,columnNumber:13},this),n.jsxDEV("li",{children:"Payment is required before accessing course content"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:89,columnNumber:13},this),n.jsxDEV("li",{children:"All fees are in USD unless otherwise stated"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:90,columnNumber:13},this),n.jsxDEV("li",{children:"We use secure third-party payment processors"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:91,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:87,columnNumber:11},this),n.jsxDEV("h3",{children:"5.3 Refund Policy"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:94,columnNumber:11},this),n.jsxDEV("p",{children:"Refund requests must be submitted within 7 days of enrollment. Refunds are granted at our discretion based on:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:95,columnNumber:11},this),n.jsxDEV("ul",{children:[n.jsxDEV("li",{children:"Course attendance and participation"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:99,columnNumber:13},this),n.jsxDEV("li",{children:"Amount of content accessed"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:100,columnNumber:13},this),n.jsxDEV("li",{children:"Reason for refund request"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:101,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:98,columnNumber:11},this),n.jsxDEV("p",{children:"No refunds are provided after 14 days of enrollment or after 50% of the course has been completed."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:103,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:78,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"6. Instructor Responsibilities"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:109,columnNumber:11},this),n.jsxDEV("p",{children:"If you are an instructor, you agree to:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:110,columnNumber:11},this),n.jsxDEV("ul",{children:[n.jsxDEV("li",{children:"Provide accurate course descriptions and information"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:112,columnNumber:13},this),n.jsxDEV("li",{children:"Deliver courses as described and scheduled"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:113,columnNumber:13},this),n.jsxDEV("li",{children:"Maintain professional conduct with students"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:114,columnNumber:13},this),n.jsxDEV("li",{children:"Protect student privacy and data"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:115,columnNumber:13},this),n.jsxDEV("li",{children:"Provide quality educational content"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:116,columnNumber:13},this),n.jsxDEV("li",{children:"Respond to student questions and concerns promptly"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:117,columnNumber:13},this),n.jsxDEV("li",{children:"Comply with all applicable educational regulations"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:118,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:111,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:108,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"7. Intellectual Property"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:123,columnNumber:11},this),n.jsxDEV("h3",{children:"7.1 Platform Content"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:125,columnNumber:11},this),n.jsxDEV("p",{children:"All content on the Platform, including text, graphics, logos, images, and software, is owned by UniqueBrains or our licensors and is protected by copyright and other intellectual property laws."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:126,columnNumber:11},this),n.jsxDEV("h3",{children:"7.2 Course Content"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:130,columnNumber:11},this),n.jsxDEV("p",{children:"Instructors retain ownership of their course content but grant us a license to display, distribute, and promote their courses on the Platform."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:131,columnNumber:11},this),n.jsxDEV("h3",{children:"7.3 User Content"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:135,columnNumber:11},this),n.jsxDEV("p",{children:"You retain ownership of content you submit (assignments, messages, etc.) but grant us a license to use it as necessary to provide our services."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:136,columnNumber:11},this),n.jsxDEV("h3",{children:"7.4 Restrictions"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:140,columnNumber:11},this),n.jsxDEV("p",{children:"You may NOT:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:141,columnNumber:11},this),n.jsxDEV("ul",{children:[n.jsxDEV("li",{children:"Copy, modify, or distribute Platform content without permission"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:143,columnNumber:13},this),n.jsxDEV("li",{children:"Record or share course materials without instructor consent"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:144,columnNumber:13},this),n.jsxDEV("li",{children:"Use content for commercial purposes"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:145,columnNumber:13},this),n.jsxDEV("li",{children:"Remove copyright or proprietary notices"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:146,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:142,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:122,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"8. Privacy and Data Protection"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:151,columnNumber:11},this),n.jsxDEV("p",{children:["Your privacy is important to us. Our collection and use of personal information is governed by our ",n.jsxDEV("a",{href:"/privacy-policy",children:"Privacy Policy"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:153,columnNumber:112},this),", which is incorporated into these Terms by reference."]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:152,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:150,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"9. Disclaimers and Limitations of Liability"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:158,columnNumber:11},this),n.jsxDEV("h3",{children:'9.1 Service "As Is"'},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:160,columnNumber:11},this),n.jsxDEV("p",{children:'The Platform is provided "as is" and "as available" without warranties of any kind, either express or implied. We do not guarantee that the Platform will be uninterrupted, secure, or error-free.'},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:161,columnNumber:11},this),n.jsxDEV("h3",{children:"9.2 Educational Outcomes"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:165,columnNumber:11},this),n.jsxDEV("p",{children:"We do not guarantee specific educational outcomes or results. Learning success depends on many factors including student effort, engagement, and individual circumstances."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:166,columnNumber:11},this),n.jsxDEV("h3",{children:"9.3 Third-Party Content"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:170,columnNumber:11},this),n.jsxDEV("p",{children:"We are not responsible for the accuracy, quality, or appropriateness of instructor-created content or third-party links."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:171,columnNumber:11},this),n.jsxDEV("h3",{children:"9.4 Limitation of Liability"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:175,columnNumber:11},this),n.jsxDEV("p",{children:"To the maximum extent permitted by law, UniqueBrains shall not be liable for any indirect, incidental, special, consequential, or punitive damages, or any loss of profits or revenues, whether incurred directly or indirectly, or any loss of data, use, goodwill, or other intangible losses."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:176,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:157,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"10. Indemnification"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:182,columnNumber:11},this),n.jsxDEV("p",{children:"You agree to indemnify and hold harmless UniqueBrains, its officers, directors, employees, and agents from any claims, damages, losses, liabilities, and expenses (including legal fees) arising from:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:183,columnNumber:11},this),n.jsxDEV("ul",{children:[n.jsxDEV("li",{children:"Your use of the Platform"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:187,columnNumber:13},this),n.jsxDEV("li",{children:"Your violation of these Terms"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:188,columnNumber:13},this),n.jsxDEV("li",{children:"Your violation of any rights of another party"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:189,columnNumber:13},this),n.jsxDEV("li",{children:"Content you submit to the Platform"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:190,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:186,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:181,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"11. Termination"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:195,columnNumber:11},this),n.jsxDEV("h3",{children:"11.1 By You"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:197,columnNumber:11},this),n.jsxDEV("p",{children:"You may terminate your account at any time by contacting us or using account settings."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:198,columnNumber:11},this),n.jsxDEV("h3",{children:"11.2 By Us"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:200,columnNumber:11},this),n.jsxDEV("p",{children:"We may suspend or terminate your account if you:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:201,columnNumber:11},this),n.jsxDEV("ul",{children:[n.jsxDEV("li",{children:"Violate these Terms"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:203,columnNumber:13},this),n.jsxDEV("li",{children:"Engage in fraudulent or illegal activity"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:204,columnNumber:13},this),n.jsxDEV("li",{children:"Pose a security or legal risk"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:205,columnNumber:13},this),n.jsxDEV("li",{children:"Fail to pay required fees"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:206,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:202,columnNumber:11},this),n.jsxDEV("h3",{children:"11.3 Effect of Termination"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:209,columnNumber:11},this),n.jsxDEV("p",{children:"Upon termination, your right to use the Platform ceases immediately. We may delete your account data in accordance with our Privacy Policy."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:210,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:194,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"12. Modifications to Terms"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:216,columnNumber:11},this),n.jsxDEV("p",{children:'We reserve the right to modify these Terms at any time. We will notify users of significant changes by posting the updated Terms on the Platform and updating the "Last Updated" date. Your continued use after changes constitutes acceptance of the modified Terms.'},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:217,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:215,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"13. Modifications to Service"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:223,columnNumber:11},this),n.jsxDEV("p",{children:"We reserve the right to modify, suspend, or discontinue any part of the Platform at any time, with or without notice. We are not liable for any modification, suspension, or discontinuation of the service."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:224,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:222,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"14. Dispute Resolution"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:230,columnNumber:11},this),n.jsxDEV("h3",{children:"14.1 Informal Resolution"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:232,columnNumber:11},this),n.jsxDEV("p",{children:"If you have a dispute with us, please contact us first at support@uniquebrains.org to attempt to resolve it informally."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:233,columnNumber:11},this),n.jsxDEV("h3",{children:"14.2 Governing Law"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:237,columnNumber:11},this),n.jsxDEV("p",{children:"These Terms are governed by the laws of the United States, without regard to conflict of law principles."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:238,columnNumber:11},this),n.jsxDEV("h3",{children:"14.3 Arbitration"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:242,columnNumber:11},this),n.jsxDEV("p",{children:"Any disputes that cannot be resolved informally shall be resolved through binding arbitration, except where prohibited by law."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:243,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:229,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"15. General Provisions"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:249,columnNumber:11},this),n.jsxDEV("h3",{children:"15.1 Entire Agreement"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:251,columnNumber:11},this),n.jsxDEV("p",{children:"These Terms, together with our Privacy Policy, constitute the entire agreement between you and UniqueBrains."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:252,columnNumber:11},this),n.jsxDEV("h3",{children:"15.2 Severability"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:256,columnNumber:11},this),n.jsxDEV("p",{children:"If any provision of these Terms is found to be unenforceable, the remaining provisions will remain in full effect."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:257,columnNumber:11},this),n.jsxDEV("h3",{children:"15.3 Waiver"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:261,columnNumber:11},this),n.jsxDEV("p",{children:"Our failure to enforce any right or provision of these Terms does not constitute a waiver of that right or provision."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:262,columnNumber:11},this),n.jsxDEV("h3",{children:"15.4 Assignment"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:266,columnNumber:11},this),n.jsxDEV("p",{children:"You may not assign or transfer these Terms without our written consent. We may assign our rights and obligations without restriction."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:267,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:248,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"16. Contact Information"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:273,columnNumber:11},this),n.jsxDEV("p",{children:"If you have questions about these Terms, please contact us:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:274,columnNumber:11},this),n.jsxDEV("ul",{children:[n.jsxDEV("li",{children:"Email: support@uniquebrains.org"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:276,columnNumber:13},this),n.jsxDEV("li",{children:"Website: https://uniquebrains.org"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:277,columnNumber:13},this),n.jsxDEV("li",{children:"Instagram: @ouruniquebrains"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:278,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:275,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:272,columnNumber:9},this),n.jsxDEV("section",{children:[n.jsxDEV("h2",{children:"17. Acknowledgment"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:283,columnNumber:11},this),n.jsxDEV("p",{children:"By using the Platform, you acknowledge that you have read, understood, and agree to be bound by these Terms of Service."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:284,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:282,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:6,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/TermsOfService.jsx",lineNumber:5,columnNumber:5},this)}function px(){const e=bs(),[s,r]=j.useState(null),t=j.useRef(!1);return j.useEffect(()=>{if(t.current)return;(async()=>{var o,a,l;t.current=!0;try{const{data:{session:c},error:u}=await x.auth.getSession();if(u)throw u;if(c){console.log("=== OAuth Callback Debug ==="),console.log("User ID:",c.user.id),console.log("User Email:",c.user.email),console.log("User Metadata:",c.user.user_metadata),console.log("========================");let d=null,m=null;try{const g=await x.from("profiles").select("*").eq("id",c.user.id).single();d=g.data,m=g.error}catch(g){console.log("Profile query error (will attempt to create):",g.message),m=g}if(console.log(" Profile check result:",{profile:d,profileError:m}),!d||m){console.log(" No profile found, creating new profile...");try{const g=c.user.user_metadata||{};console.log("User metadata:",g);let p="User",N="";if(g.given_name)p=g.given_name,N=g.family_name||"";else if(g.full_name){const A=g.full_name.split(" ");p=A[0]||"User",N=A.slice(1).join(" ")||""}else if(g.name){const A=g.name.split(" ");p=A[0]||"User",N=A.slice(1).join(" ")||""}const y=localStorage.getItem("oauth_role_preference")||"student";console.log(" OAuth role preference from localStorage:",y),localStorage.removeItem("oauth_role_preference"),console.log("Attempting to create profile with:",{id:c.user.id,email:c.user.email,first_name:p,last_name:N,role:y,avatar_url:g.avatar_url||g.picture||null});const{data:E,error:R}=await x.from("profiles").insert({id:c.user.id,email:c.user.email,first_name:p,last_name:N,role:y,avatar_url:g.avatar_url||g.picture||null,neurodiversity_profile:[],expertise:[]}).select();if(R)if(R.code==="23505"){console.log(" Profile already exists (returning user)");const{data:A}=await x.from("profiles").select("*").eq("id",c.user.id).single();if(d=A,d&&d.role!=="instructor"&&d.role!=="student"&&y!==d.role){console.log(` Updating existing profile role from '${d.role}' to '${y}'`);const{error:_}=await x.from("profiles").update({role:y}).eq("id",c.user.id);_?console.error(" Failed to update profile role:",_):(d.role=y,console.log(" Profile role updated successfully"))}}else console.error(" Error creating profile:",R),console.error("Error code:",R.code),console.error("Error message:",R.message),console.error("Error details:",R.details);else{console.log(" Profile created successfully! (new user)"),console.log("Profile data:",E),console.log("Name:",p,N),d=(E==null?void 0:E[0])||{role:"student"},console.log("Redirecting new user to onboarding..."),e("/onboarding",{state:{userId:c.user.id,userName:p},replace:!0});return}}catch(g){console.error("Insert error:",g)}}else if(console.log(" Profile already exists"),console.log(" Existing profile role:",d==null?void 0:d.role),d&&d.role!=="instructor"&&d.role!=="student"){console.log(" Existing profile has invalid role, checking for role preference...");const g=localStorage.getItem("oauth_role_preference")||"student";if(console.log(" OAuth role preference from localStorage:",g),localStorage.removeItem("oauth_role_preference"),g!=="student"){console.log(` Updating existing profile role from 'student' to '${g}'`);try{const{error:p}=await x.from("profiles").update({role:g}).eq("id",c.user.id);p?console.error(" Failed to update profile role:",p):(d.role=g,console.log(" Profile role updated successfully"))}catch(p){console.error(" Update error:",p)}}}const f=(d==null?void 0:d.role)||"student",h=!(d!=null&&d.bio)&&!((o=d==null?void 0:d.neurodiversity_profile)!=null&&o.length);console.log("User role:",f),console.log("Needs onboarding:",h),console.log("Profile completeness:",{bio:d==null?void 0:d.bio,neurodiversity_profile:d==null?void 0:d.neurodiversity_profile}),h?(console.log("Redirecting to onboarding (incomplete profile)"),e("/onboarding",{state:{userId:c.user.id,userName:(d==null?void 0:d.first_name)||((l=(a=c.user.user_metadata)==null?void 0:a.full_name)==null?void 0:l.split(" ")[0])||"there"},replace:!0})):(console.log("Redirecting returning user with role:",f),f==="instructor"?e("/teach/dashboard",{replace:!0}):f==="student"?e("/learn/dashboard",{replace:!0}):e("/marketplace",{replace:!0}))}else e("/login")}catch(c){console.error("Auth callback error:",c),r(c.message),setTimeout(()=>{e("/login")},3e3)}})()},[e]),s?n.jsxDEV("div",{className:"auth-callback",children:n.jsxDEV("div",{className:"auth-callback-error",children:[n.jsxDEV("h2",{children:"Authentication Error"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/AuthCallback.jsx",lineNumber:264,columnNumber:11},this),n.jsxDEV("p",{children:s},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/AuthCallback.jsx",lineNumber:265,columnNumber:11},this),n.jsxDEV("p",{children:"Redirecting to login..."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/AuthCallback.jsx",lineNumber:266,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/AuthCallback.jsx",lineNumber:263,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/AuthCallback.jsx",lineNumber:262,columnNumber:7},this):n.jsxDEV("div",{className:"auth-callback",children:n.jsxDEV("div",{className:"auth-callback-loading",children:[n.jsxDEV("div",{className:"spinner"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/AuthCallback.jsx",lineNumber:275,columnNumber:9},this),n.jsxDEV("p",{children:"Completing sign in..."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/AuthCallback.jsx",lineNumber:276,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/AuthCallback.jsx",lineNumber:274,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/AuthCallback.jsx",lineNumber:273,columnNumber:5},this)}function Ul(){var g,p,N,y;const e=bs(),s=Il(),{user:r}=ke(),t=(r==null?void 0:r.id)||((g=s.state)==null?void 0:g.userId),i=((p=s.state)==null?void 0:p.userName)||((y=(N=r==null?void 0:r.user_metadata)==null?void 0:N.full_name)==null?void 0:y.split(" ")[0])||"there",[o,a]=j.useState({neurodiversityProfile:[],expertise:[],bio:"",otherNeurodiversity:"",otherExpertise:"",role:"student"}),[l,c]=j.useState(!1);j.useEffect(()=>{(async()=>{if(!t){console.error("No user ID available for onboarding");return}console.log("Fetching profile for user ID:",t);try{const{data:R,error:A}=await x.from("profiles").select("*").eq("id",t).single();if(A){console.error("Error fetching profile:",A);return}R&&a({neurodiversityProfile:R.neurodiversity_profile||[],expertise:R.expertise||[],bio:R.bio||"",otherNeurodiversity:"",otherExpertise:"",role:R.role||"student"})}catch(R){console.error("Profile fetch error:",R)}})()},[t]);const u=[{value:"none",label:"None / Neurotypical"},{value:"autism",label:"Autism Spectrum"},{value:"adhd",label:"ADHD"},{value:"dyslexia",label:"Dyslexia"},{value:"dysgraphia",label:"Dysgraphia"},{value:"dyscalculia",label:"Dyscalculia"},{value:"other",label:"Other"}],d=E=>{const R=o.neurodiversityProfile;R.includes(E)?a({...o,neurodiversityProfile:R.filter(A=>A!==E)}):a({...o,neurodiversityProfile:[...R,E]})},m=E=>{const R=o.expertise||[];R.includes(E)?a({...o,expertise:R.filter(A=>A!==E)}):a({...o,expertise:[...R,E]})},f=E=>{a({...o,role:E})},h=async E=>{if(E.preventDefault(),c(!0),!t){alert("User ID not found. Please try logging in again."),c(!1);return}try{let R=[...o.neurodiversityProfile];R.includes("other")&&o.otherNeurodiversity.trim()&&(R=R.filter(C=>C!=="other"),R.push(o.otherNeurodiversity.trim()));let A=[...o.expertise||[]];A.includes("other")&&o.otherExpertise.trim()&&(A=A.filter(C=>C!=="other"),A.push(o.otherExpertise.trim()));const{error:_}=await x.from("profiles").update({role:o.role,neurodiversity_profile:R,expertise:o.role==="instructor"?A:[],bio:o.bio.trim()||null}).eq("id",t);if(_){console.error("Error updating profile:",_),alert("Failed to save profile. Please try again."),c(!1);return}o.role==="instructor"?e("/teach/dashboard"):e("/learn/dashboard")}catch(R){console.error("Onboarding error:",R),alert("An error occurred. Please try again."),c(!1)}};return n.jsxDEV("div",{className:"onboarding-container",children:n.jsxDEV("div",{className:"onboarding-content",children:[n.jsxDEV("div",{className:"onboarding-header",children:[n.jsxDEV("h1",{children:["Welcome to UniqueBrains, ",i,"! "]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:172,columnNumber:11},this),n.jsxDEV("p",{children:"Let's set up your profile to get started"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:173,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:171,columnNumber:9},this),n.jsxDEV("form",{onSubmit:h,className:"onboarding-form",children:[n.jsxDEV("div",{className:"form-section",children:[n.jsxDEV("h2",{children:"I am a..."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:179,columnNumber:13},this),n.jsxDEV("div",{className:"role-cards",children:[n.jsxDEV("div",{className:`role-card ${o.role==="student"?"selected":""}`,onClick:()=>f("student"),children:[n.jsxDEV("div",{className:"role-icon",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:185,columnNumber:17},this),n.jsxDEV("h3",{children:"Student"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:186,columnNumber:17},this),n.jsxDEV("p",{children:"Enroll in courses and learn"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:187,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:181,columnNumber:15},this),n.jsxDEV("div",{className:`role-card ${o.role==="instructor"?"selected":""}`,onClick:()=>f("instructor"),children:[n.jsxDEV("div",{className:"role-icon",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:194,columnNumber:17},this),n.jsxDEV("h3",{children:"Instructor"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:195,columnNumber:17},this),n.jsxDEV("p",{children:"Create and teach courses"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:196,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:190,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:180,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:178,columnNumber:11},this),o.role==="instructor"&&n.jsxDEV("div",{className:"form-section",children:[n.jsxDEV("h2",{children:"Your Teaching Specializations"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:204,columnNumber:15},this),n.jsxDEV("p",{className:"section-description",children:"What neurodiversity areas do you specialize in or have experience teaching?"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:205,columnNumber:15},this),n.jsxDEV("div",{className:"checkbox-group",children:u.map(E=>n.jsxDEV("label",{className:"checkbox-label",children:[n.jsxDEV("input",{type:"checkbox",checked:o.expertise.includes(E.value),onChange:()=>m(E.value)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:212,columnNumber:21},this),n.jsxDEV("span",{children:E.label},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:217,columnNumber:21},this)]},E.value,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:211,columnNumber:19},this))},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:209,columnNumber:15},this),o.expertise.includes("other")&&n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"otherExpertise",children:"Please specify:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:224,columnNumber:19},this),n.jsxDEV("input",{type:"text",id:"otherExpertise",value:o.otherExpertise,onChange:E=>a({...o,otherExpertise:E.target.value}),placeholder:"e.g., Sensory Processing Disorder"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:225,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:223,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:203,columnNumber:13},this),n.jsxDEV("div",{className:"form-section",children:[n.jsxDEV("h2",{children:"Your Neurodiversity Profile (Optional)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:239,columnNumber:13},this),n.jsxDEV("p",{className:"section-description",children:o.role==="instructor"?"Share your own neurodiversity profile if you'd like. This helps build trust with families.":"Help us personalize your learning experience by sharing your neurodiversity profile."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:240,columnNumber:13},this),n.jsxDEV("div",{className:"checkbox-group",children:u.map(E=>n.jsxDEV("label",{className:"checkbox-label",children:[n.jsxDEV("input",{type:"checkbox",checked:o.neurodiversityProfile.includes(E.value),onChange:()=>d(E.value)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:250,columnNumber:19},this),n.jsxDEV("span",{children:E.label},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:255,columnNumber:19},this)]},E.value,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:249,columnNumber:17},this))},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:247,columnNumber:13},this),o.neurodiversityProfile.includes("other")&&n.jsxDEV("div",{className:"form-group",children:[n.jsxDEV("label",{htmlFor:"otherNeurodiversity",children:"Please specify:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:262,columnNumber:17},this),n.jsxDEV("input",{type:"text",id:"otherNeurodiversity",value:o.otherNeurodiversity,onChange:E=>a({...o,otherNeurodiversity:E.target.value}),placeholder:"e.g., Sensory Processing Disorder"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:263,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:261,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:238,columnNumber:11},this),n.jsxDEV("div",{className:"form-section",children:[n.jsxDEV("h2",{children:"About You"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:276,columnNumber:13},this),n.jsxDEV("p",{className:"section-description",children:o.role==="instructor"?"Tell families about your teaching experience and approach.":"Tell us a bit about yourself and your learning goals."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:277,columnNumber:13},this),n.jsxDEV("div",{className:"form-group",children:n.jsxDEV("textarea",{value:o.bio,onChange:E=>a({...o,bio:E.target.value}),placeholder:o.role==="instructor"?"e.g., I'm a certified special education teacher with 10 years of experience...":"e.g., I love art and music, and I'm excited to learn new things...",rows:"4"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:285,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:284,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:275,columnNumber:11},this),n.jsxDEV("div",{className:"form-actions",children:n.jsxDEV("button",{type:"submit",className:"btn-primary btn-full",disabled:l,children:l?"Saving...":"Complete Setup"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:299,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:298,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:176,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:170,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/Onboarding.jsx",lineNumber:169,columnNumber:5},this)}function Nx(){const e=bs(),{user:s}=ke(),[r,t]=j.useState("student"),[i,o]=j.useState(!1),[a,l]=j.useState(""),c=async()=>{if(!s){l("You must be logged in to update your role");return}o(!0),l("");try{const{error:u}=await x.from("profiles").update({role:r}).eq("id",s.id);if(u)throw u;r==="instructor"?e("/instructor/dashboard",{replace:!0}):r==="student"&&e("/onboarding",{replace:!0})}catch(u){console.error("Error updating role:",u),l("Failed to update role. Please try again.")}finally{o(!1)}};return n.jsxDEV("div",{className:"auth-container",children:n.jsxDEV("div",{className:"auth-card",children:[n.jsxDEV("h2",{children:"Select Your Role"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/RoleSelection.jsx",lineNumber:50,columnNumber:9},this),n.jsxDEV("p",{className:"auth-subtitle",children:"We need to know your role to set up your account properly"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/RoleSelection.jsx",lineNumber:51,columnNumber:9},this),a&&n.jsxDEV("div",{className:"error-message",children:a},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/RoleSelection.jsx",lineNumber:55,columnNumber:19},this),n.jsxDEV("div",{className:"role-selection",children:n.jsxDEV("div",{className:"role-cards",children:[n.jsxDEV("div",{className:`role-card ${r==="student"?"selected":""}`,onClick:()=>t("student"),children:[n.jsxDEV("div",{className:"role-icon",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/RoleSelection.jsx",lineNumber:63,columnNumber:15},this),n.jsxDEV("h3",{children:"Student"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/RoleSelection.jsx",lineNumber:64,columnNumber:15},this),n.jsxDEV("p",{children:"Enroll in courses and learn"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/RoleSelection.jsx",lineNumber:65,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/RoleSelection.jsx",lineNumber:59,columnNumber:13},this),n.jsxDEV("div",{className:`role-card ${r==="instructor"?"selected":""}`,onClick:()=>t("instructor"),children:[n.jsxDEV("div",{className:"role-icon",children:""},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/RoleSelection.jsx",lineNumber:71,columnNumber:15},this),n.jsxDEV("h3",{children:"Instructor"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/RoleSelection.jsx",lineNumber:72,columnNumber:15},this),n.jsxDEV("p",{children:"Teach and inspire"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/RoleSelection.jsx",lineNumber:73,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/RoleSelection.jsx",lineNumber:67,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/RoleSelection.jsx",lineNumber:58,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/RoleSelection.jsx",lineNumber:57,columnNumber:9},this),n.jsxDEV("button",{onClick:c,disabled:i,className:"btn-primary btn-full",children:i?"Updating...":`Continue as ${r==="instructor"?"Instructor":"Student"}`},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/RoleSelection.jsx",lineNumber:78,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/RoleSelection.jsx",lineNumber:49,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/pages/RoleSelection.jsx",lineNumber:48,columnNumber:5},this)}function bx(){var d;const{user:e}=ke(),[s,r]=j.useState(!1),[t,i]=j.useState([]),[o,a]=j.useState(""),l=(m,f)=>{i(h=>[...h,{test:m,result:f,timestamp:new Date().toLocaleTimeString()}])},c=async()=>{if(!e){a("Please log in as an instructor first");return}r(!0),a(""),i([]);try{l("Creating course...","Starting");const m={title:"Backend Test Course",description:"This course tests the backend integration",category:"parenting",courseType:"group",sessionDuration:60,enrollmentLimit:10,isSelfPaced:!1,startDate:"2024-02-01",sessionTime:"10:00",selectedDays:["Monday","Wednesday"],hasEndDate:!0,endDate:"2024-04-01"},f=await Z(X.courses.create,m,e);l("Course Creation",` Success: ${f.course.title}`);const h=f.course.id;l("Creating homework...","Starting");const g={title:"Test Assignment",description:"This is a test assignment",due_date:"2024-02-08T23:59:59Z",points:100,submission_type:"text",is_published:!0},p=await Z(X.homework.create,h,g,e.id);l("Homework Creation",` Success: ${p.title}`),l("Creating resource...","Starting");const N={title:"Test Resource",description:"This is a test resource",resource_type:"link",link_url:"https://example.com/test.pdf"},y=await Z(X.resources.create,h,N,e.id);l("Resource Creation",` Success: ${y.title}`),l("Sending message...","Starting");const E={content:"This is a test message from the backend integration test.",is_announcement:!1},R=await Z(X.messages.send,h,E,e.id);l("Message Sending"," Success: Message sent"),l("Fetching courses...","Starting");const A=await Z(X.courses.getInstructorCourses,e.id);l("Fetch Courses",` Success: Found ${A.length} courses`),l("Getting statistics...","Starting");const _=await Z(X.courses.getStats,e.id);l("Course Statistics",` Success: ${_.totalCourses} total courses`),l("All Tests"," All tests completed successfully!")}catch(m){console.error("Test failed:",m),a(m.message),l("Test Failed",` Error: ${m.message}`)}finally{r(!1)}},u=()=>{i([]),a("")};return e?n.jsxDEV("div",{style:{padding:"2rem",border:"2px solid #3b82f6",borderRadius:"0.5rem",margin:"1rem"},children:[n.jsxDEV("h3",{children:" Backend Integration Test"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/BackendTestComponent.jsx",lineNumber:125,columnNumber:7},this),n.jsxDEV("p",{children:["User: ",e.email," (Role: ",((d=e.user_metadata)==null?void 0:d.role)||"Unknown",")"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/BackendTestComponent.jsx",lineNumber:126,columnNumber:7},this),n.jsxDEV("div",{style:{marginBottom:"1rem"},children:[n.jsxDEV("button",{onClick:c,disabled:s,style:{padding:"0.75rem 1.5rem",backgroundColor:s?"#9ca3af":"#3b82f6",color:"white",border:"none",borderRadius:"0.5rem",marginRight:"0.5rem"},children:s?"Running Tests...":"Run All Tests"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/BackendTestComponent.jsx",lineNumber:129,columnNumber:9},this),n.jsxDEV("button",{onClick:u,style:{padding:"0.75rem 1.5rem",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"0.5rem"},children:"Clear Results"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/BackendTestComponent.jsx",lineNumber:144,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/BackendTestComponent.jsx",lineNumber:128,columnNumber:7},this),o&&n.jsxDEV("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",border:"1px solid #fecaca",borderRadius:"0.5rem",color:"#dc2626",marginBottom:"1rem"},children:[n.jsxDEV("strong",{children:"Error:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/BackendTestComponent.jsx",lineNumber:167,columnNumber:11},this)," ",o]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/BackendTestComponent.jsx",lineNumber:159,columnNumber:9},this),t.length>0&&n.jsxDEV("div",{style:{backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"0.5rem",padding:"1rem",maxHeight:"400px",overflowY:"auto"},children:[n.jsxDEV("h4",{children:"Test Results:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/BackendTestComponent.jsx",lineNumber:180,columnNumber:11},this),t.map((m,f)=>n.jsxDEV("div",{style:{padding:"0.5rem",borderBottom:"1px solid #e2e8f0",fontFamily:"monospace",fontSize:"0.875rem"},children:[n.jsxDEV("span",{style:{color:"#6b7280"},children:["[",m.timestamp,"]"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/BackendTestComponent.jsx",lineNumber:188,columnNumber:15},this)," ",n.jsxDEV("strong",{children:[m.test,":"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/BackendTestComponent.jsx",lineNumber:189,columnNumber:15},this)," ",m.result]},f,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/BackendTestComponent.jsx",lineNumber:182,columnNumber:13},this))]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/BackendTestComponent.jsx",lineNumber:172,columnNumber:9},this),n.jsxDEV("div",{style:{marginTop:"1rem",padding:"1rem",backgroundColor:"#f0f9ff",border:"1px solid #bae6fd",borderRadius:"0.5rem",fontSize:"0.875rem"},children:[n.jsxDEV("h4",{children:"What this test does:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/BackendTestComponent.jsx",lineNumber:203,columnNumber:9},this),n.jsxDEV("ul",{children:[n.jsxDEV("li",{children:" Creates a test course with sessions"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/BackendTestComponent.jsx",lineNumber:205,columnNumber:11},this),n.jsxDEV("li",{children:" Creates a homework assignment"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/BackendTestComponent.jsx",lineNumber:206,columnNumber:11},this),n.jsxDEV("li",{children:" Creates a course resource"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/BackendTestComponent.jsx",lineNumber:207,columnNumber:11},this),n.jsxDEV("li",{children:" Sends a test message"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/BackendTestComponent.jsx",lineNumber:208,columnNumber:11},this),n.jsxDEV("li",{children:" Fetches instructor courses"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/BackendTestComponent.jsx",lineNumber:209,columnNumber:11},this),n.jsxDEV("li",{children:" Gets course statistics"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/BackendTestComponent.jsx",lineNumber:210,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/BackendTestComponent.jsx",lineNumber:204,columnNumber:9},this),n.jsxDEV("p",{children:[n.jsxDEV("strong",{children:"Note:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/BackendTestComponent.jsx",lineNumber:212,columnNumber:12},this)," This creates real data in your database. You may want to delete the test course afterward."]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/BackendTestComponent.jsx",lineNumber:212,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/BackendTestComponent.jsx",lineNumber:195,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/BackendTestComponent.jsx",lineNumber:124,columnNumber:5},this):n.jsxDEV("div",{style:{padding:"2rem",border:"2px solid #f59e0b",borderRadius:"0.5rem",margin:"1rem"},children:[n.jsxDEV("h3",{children:"Backend Integration Test"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/BackendTestComponent.jsx",lineNumber:117,columnNumber:9},this),n.jsxDEV("p",{children:"Please log in as an instructor to test the backend integration."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/BackendTestComponent.jsx",lineNumber:118,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/BackendTestComponent.jsx",lineNumber:116,columnNumber:7},this)}function yx(){var m;const{user:e}=ke(),[s,r]=j.useState(!1),[t,i]=j.useState([]),[o,a]=j.useState(""),l=(f,h,g="info")=>{i(p=>[...p,{test:f,result:h,status:g,timestamp:new Date().toLocaleTimeString()}])},c=async()=>{var f,h;if(!e){a("Please log in first");return}r(!0),a(""),i([]);try{l("Security Test Suite","Starting RLS policy verification...","info"),l("Current User",`${e.email} (Role: ${((f=e.user_metadata)==null?void 0:f.role)||"Unknown"})`,"info"),l("Course Policies","Testing course access control...","info");try{const g=await Z(X.courses.getInstructorCourses,e.id);l("Course Access",` Can access ${g.length} courses as expected`,"success")}catch(g){l("Course Access",` Unexpected error: ${g.message}`,"error")}if(((h=e.user_metadata)==null?void 0:h.role)==="instructor"){l("Course Creation","Testing instructor course creation...","info");try{const g={title:"RLS Test Course",description:"Testing RLS policies",category:"parenting",courseType:"group",sessionDuration:60,enrollmentLimit:5,isSelfPaced:!1,startDate:"2024-02-01",sessionTime:"14:00",selectedDays:["Tuesday"],hasEndDate:!0,endDate:"2024-03-01"},p=await Z(X.courses.create,g,e);l("Course Creation",` Successfully created course: ${p.course.title}`,"success"),l("Homework Policies","Testing homework creation for owned course...","info");try{const N={title:"RLS Test Assignment",description:"Testing homework RLS",due_date:"2024-02-15T23:59:59Z",points:50,submission_type:"text",is_published:!0},y=await Z(X.homework.create,p.course.id,N,e.id);l("Homework Creation",` Successfully created homework: ${y.title}`,"success")}catch(N){l("Homework Creation",` Failed: ${N.message}`,"error")}l("Resource Policies","Testing resource creation for owned course...","info");try{const N={title:"RLS Test Resource",description:"Testing resource RLS",resource_type:"link",link_url:"https://example.com/test-resource"},y=await Z(X.resources.create,p.course.id,N,e.id);l("Resource Creation",` Successfully created resource: ${y.title}`,"success")}catch(N){l("Resource Creation",` Failed: ${N.message}`,"error")}l("Message Policies","Testing message sending for owned course...","info");try{const N={content:"RLS test message - verifying security policies",is_announcement:!1};await Z(X.messages.send,p.course.id,N,e.id),l("Message Sending"," Successfully sent message","success")}catch(N){l("Message Sending",` Failed: ${N.message}`,"error")}}catch(g){l("Course Creation",` Failed: ${g.message}`,"error")}}else l("Course Creation"," Skipped - User is not an instructor","warning");l("Statistics Policies","Testing statistics access...","info");try{const g=await Z(X.courses.getStats,e.id);l("Statistics Access",` Successfully retrieved stats: ${g.totalCourses} courses`,"success")}catch(g){l("Statistics Access",` Failed: ${g.message}`,"error")}l("Profile Policies","Testing profile access...","info"),l("Profile Access"," Can access own profile data","success"),l("Security Test Complete"," RLS policy verification completed!","success")}catch(g){console.error("Security test failed:",g),a(g.message),l("Security Test Failed",` Error: ${g.message}`,"error")}finally{r(!1)}},u=()=>{i([]),a("")};if(!e)return n.jsxDEV("div",{style:{padding:"2rem",border:"2px solid #f59e0b",borderRadius:"0.5rem",margin:"1rem"},children:[n.jsxDEV("h3",{children:" RLS Security Test"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/RLSSecurityTest.jsx",lineNumber:162,columnNumber:9},this),n.jsxDEV("p",{children:"Please log in to test Row Level Security policies."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/RLSSecurityTest.jsx",lineNumber:163,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/RLSSecurityTest.jsx",lineNumber:161,columnNumber:7},this);const d=f=>{switch(f){case"success":return"#10b981";case"error":return"#ef4444";case"warning":return"#f59e0b";default:return"#6b7280"}};return n.jsxDEV("div",{style:{padding:"2rem",border:"2px solid #8b5cf6",borderRadius:"0.5rem",margin:"1rem"},children:[n.jsxDEV("h3",{children:" RLS Security Policy Test"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/RLSSecurityTest.jsx",lineNumber:179,columnNumber:7},this),n.jsxDEV("p",{children:["User: ",e.email," (Role: ",((m=e.user_metadata)==null?void 0:m.role)||"Unknown",")"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/RLSSecurityTest.jsx",lineNumber:180,columnNumber:7},this),n.jsxDEV("div",{style:{marginBottom:"1rem"},children:[n.jsxDEV("button",{onClick:c,disabled:s,style:{padding:"0.75rem 1.5rem",backgroundColor:s?"#9ca3af":"#8b5cf6",color:"white",border:"none",borderRadius:"0.5rem",marginRight:"0.5rem"},children:s?"Running Security Tests...":"Run Security Tests"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/RLSSecurityTest.jsx",lineNumber:183,columnNumber:9},this),n.jsxDEV("button",{onClick:u,style:{padding:"0.75rem 1.5rem",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"0.5rem"},children:"Clear Results"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/RLSSecurityTest.jsx",lineNumber:198,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/RLSSecurityTest.jsx",lineNumber:182,columnNumber:7},this),o&&n.jsxDEV("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",border:"1px solid #fecaca",borderRadius:"0.5rem",color:"#dc2626",marginBottom:"1rem"},children:[n.jsxDEV("strong",{children:"Error:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/RLSSecurityTest.jsx",lineNumber:221,columnNumber:11},this)," ",o]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/RLSSecurityTest.jsx",lineNumber:213,columnNumber:9},this),t.length>0&&n.jsxDEV("div",{style:{backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"0.5rem",padding:"1rem",maxHeight:"500px",overflowY:"auto"},children:[n.jsxDEV("h4",{children:"Security Test Results:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/RLSSecurityTest.jsx",lineNumber:234,columnNumber:11},this),t.map((f,h)=>n.jsxDEV("div",{style:{padding:"0.5rem",borderBottom:"1px solid #e2e8f0",fontFamily:"monospace",fontSize:"0.875rem"},children:[n.jsxDEV("span",{style:{color:"#6b7280"},children:["[",f.timestamp,"]"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/RLSSecurityTest.jsx",lineNumber:242,columnNumber:15},this)," ",n.jsxDEV("strong",{style:{color:d(f.status)},children:[f.test,":"]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/RLSSecurityTest.jsx",lineNumber:243,columnNumber:15},this)," ",n.jsxDEV("span",{style:{color:d(f.status)},children:f.result},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/RLSSecurityTest.jsx",lineNumber:244,columnNumber:15},this)]},h,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/RLSSecurityTest.jsx",lineNumber:236,columnNumber:13},this))]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/RLSSecurityTest.jsx",lineNumber:226,columnNumber:9},this),n.jsxDEV("div",{style:{marginTop:"1rem",padding:"1rem",backgroundColor:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"0.5rem",fontSize:"0.875rem"},children:[n.jsxDEV("h4",{children:" What this security test verifies:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/RLSSecurityTest.jsx",lineNumber:258,columnNumber:9},this),n.jsxDEV("ul",{children:[n.jsxDEV("li",{children:" Course access control (instructors can only see their courses)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/RLSSecurityTest.jsx",lineNumber:260,columnNumber:11},this),n.jsxDEV("li",{children:" Course creation permissions (only instructors can create)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/RLSSecurityTest.jsx",lineNumber:261,columnNumber:11},this),n.jsxDEV("li",{children:" Homework management (only course owners can create)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/RLSSecurityTest.jsx",lineNumber:262,columnNumber:11},this),n.jsxDEV("li",{children:" Resource management (only course owners can add)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/RLSSecurityTest.jsx",lineNumber:263,columnNumber:11},this),n.jsxDEV("li",{children:" Message permissions (only course participants can send)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/RLSSecurityTest.jsx",lineNumber:264,columnNumber:11},this),n.jsxDEV("li",{children:" Statistics access (users can only see their own data)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/RLSSecurityTest.jsx",lineNumber:265,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/RLSSecurityTest.jsx",lineNumber:259,columnNumber:9},this),n.jsxDEV("p",{children:[n.jsxDEV("strong",{children:"Security Note:"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/RLSSecurityTest.jsx",lineNumber:267,columnNumber:12},this)," This test creates real data to verify RLS policies work correctly."]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/RLSSecurityTest.jsx",lineNumber:267,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/RLSSecurityTest.jsx",lineNumber:250,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/RLSSecurityTest.jsx",lineNumber:178,columnNumber:5},this)}Wm(()=>import("./fixProfile-CcoEUVAW.js"),__vite__mapDeps([0,1,2]));function Oe({children:e,requirePortal:s}){const{user:r,profile:t,availablePortals:i}=ke();if(!r)return n.jsxDEV(Jt,{to:"/login"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:36,columnNumber:12},this);if(s&&!i.includes(s)){const o=(t==null?void 0:t.role)==="instructor"?"teach":"learn";return n.jsxDEV(Jt,{to:`/${o}/dashboard`},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:43,columnNumber:12},this)}return e}function Ex(){return n.jsxDEV(US,{children:n.jsxDEV(Lm,{children:[n.jsxDEV(IS,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:53,columnNumber:9},this),n.jsxDEV(Fm,{children:[n.jsxDEV(Ne,{path:"/login",element:n.jsxDEV(MS,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:56,columnNumber:41},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:56,columnNumber:11},this),n.jsxDEV(Ne,{path:"/register",element:n.jsxDEV(PS,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:57,columnNumber:44},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:57,columnNumber:11},this),n.jsxDEV(Ne,{path:"/auth/callback",element:n.jsxDEV(px,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:58,columnNumber:49},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:58,columnNumber:11},this),n.jsxDEV(Ne,{path:"/onboarding",element:n.jsxDEV(Ul,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:59,columnNumber:46},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:59,columnNumber:11},this),n.jsxDEV(Ne,{path:"/role-selection",element:n.jsxDEV(Nx,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:60,columnNumber:50},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:60,columnNumber:11},this),n.jsxDEV(Ne,{path:"/",element:n.jsxDEV(VS,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:63,columnNumber:36},this),children:[n.jsxDEV(Ne,{index:!0,element:n.jsxDEV(RS,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:64,columnNumber:35},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:64,columnNumber:13},this),n.jsxDEV(Ne,{path:"marketplace",element:n.jsxDEV(ni,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:65,columnNumber:48},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:65,columnNumber:13},this),n.jsxDEV(Ne,{path:"courses/:courseId",element:n.jsxDEV(Qv,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:66,columnNumber:54},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:66,columnNumber:13},this),n.jsxDEV(Ne,{path:"privacy-policy",element:n.jsxDEV(hx,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:67,columnNumber:51},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:67,columnNumber:13},this),n.jsxDEV(Ne,{path:"terms-of-service",element:n.jsxDEV(gx,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:68,columnNumber:53},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:68,columnNumber:13},this),n.jsxDEV(Ne,{path:"teach",children:[n.jsxDEV(Ne,{path:"dashboard",element:n.jsxDEV(Oe,{requirePortal:"teach",children:n.jsxDEV(wl,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:74,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:73,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:72,columnNumber:15},this),n.jsxDEV(Ne,{path:"marketplace",element:n.jsxDEV(Oe,{requirePortal:"teach",children:n.jsxDEV(ni,{portal:"teach"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:80,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:79,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:78,columnNumber:15},this),n.jsxDEV(Ne,{path:"my-courses",element:n.jsxDEV(Oe,{requirePortal:"teach",children:n.jsxDEV(wl,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:86,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:85,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:84,columnNumber:15},this),n.jsxDEV(Ne,{path:"create-course",element:n.jsxDEV(Oe,{requirePortal:"teach",children:n.jsxDEV(ax,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:92,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:91,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:90,columnNumber:15},this),n.jsxDEV(Ne,{path:"sessions/:courseId",element:n.jsxDEV(Oe,{requirePortal:"teach",children:n.jsxDEV(Sm,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:98,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:97,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:96,columnNumber:15},this),n.jsxDEV(Ne,{path:"course/:courseId/manage",element:n.jsxDEV(Oe,{requirePortal:"teach",children:n.jsxDEV(dx,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:104,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:103,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:102,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:71,columnNumber:13},this),n.jsxDEV(Ne,{path:"learn",children:[n.jsxDEV(Ne,{path:"dashboard",element:n.jsxDEV(Oe,{requirePortal:"learn",children:n.jsxDEV(oi,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:113,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:112,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:111,columnNumber:15},this),n.jsxDEV(Ne,{path:"marketplace",element:n.jsxDEV(Oe,{requirePortal:"learn",children:n.jsxDEV(ni,{portal:"learn"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:119,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:118,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:117,columnNumber:15},this),n.jsxDEV(Ne,{path:"my-courses",element:n.jsxDEV(Oe,{requirePortal:"learn",children:n.jsxDEV(oi,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:125,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:124,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:123,columnNumber:15},this),n.jsxDEV(Ne,{path:"course/:courseId/view",element:n.jsxDEV(Oe,{requirePortal:"learn",children:n.jsxDEV(ox,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:131,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:130,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:129,columnNumber:15},this),n.jsxDEV(Ne,{path:"onboarding",element:n.jsxDEV(Oe,{requirePortal:"learn",children:n.jsxDEV(Ul,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:137,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:136,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:135,columnNumber:15},this),n.jsxDEV(Ne,{path:"manage-students",element:n.jsxDEV(Oe,{requirePortal:"learn",children:n.jsxDEV(Dl,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:143,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:142,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:141,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:110,columnNumber:13},this),n.jsxDEV(Ne,{path:"my-courses",element:n.jsxDEV(Oe,{children:n.jsxDEV(oi,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:151,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:150,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:149,columnNumber:13},this),n.jsxDEV(Ne,{path:"manage-students",element:n.jsxDEV(Oe,{children:n.jsxDEV(Dl,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:157,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:156,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:155,columnNumber:13},this),n.jsxDEV(Ne,{path:"instructor/dashboard",element:n.jsxDEV(Jt,{to:"/teach/dashboard",replace:!0},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:162,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:161,columnNumber:13},this),n.jsxDEV(Ne,{path:"instructor/create-course",element:n.jsxDEV(Jt,{to:"/teach/create-course",replace:!0},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:166,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:165,columnNumber:13},this),n.jsxDEV(Ne,{path:"profile",element:n.jsxDEV(Oe,{children:n.jsxDEV(fx,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:171,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:170,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:169,columnNumber:13},this),n.jsxDEV(Ne,{path:"test-backend",element:n.jsxDEV(Oe,{requirePortal:"teach",children:n.jsxDEV(bx,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:177,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:176,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:175,columnNumber:13},this),n.jsxDEV(Ne,{path:"test-security",element:n.jsxDEV(Oe,{children:n.jsxDEV(yx,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:183,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:182,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:181,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:63,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:54,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:52,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/App.jsx",lineNumber:51,columnNumber:5},this)}class jx extends j.Component{constructor(r){super(r);Tt(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.href="/"});Tt(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,t){console.error("ErrorBoundary caught an error:",r,t),gt(r,{contexts:{react:{componentStack:t.componentStack}},tags:{errorBoundary:"global"}}),this.setState({errorInfo:t})}render(){return this.state.hasError?n.jsxDEV("div",{className:"error-boundary",children:n.jsxDEV("div",{className:"error-boundary-content",children:[n.jsxDEV("h1",{children:" Oops! Something went wrong"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/ErrorBoundary.jsx",lineNumber:55,columnNumber:13},this),n.jsxDEV("p",{className:"error-message",children:"We've been notified and are looking into it."},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/ErrorBoundary.jsx",lineNumber:56,columnNumber:13},this),n.jsxDEV("div",{className:"error-actions",children:[n.jsxDEV("button",{onClick:this.handleReload,className:"btn-primary",children:"Reload Page"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/ErrorBoundary.jsx",lineNumber:61,columnNumber:15},this),n.jsxDEV("button",{onClick:this.handleReset,className:"btn-secondary",children:"Go to Home"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/ErrorBoundary.jsx",lineNumber:64,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/ErrorBoundary.jsx",lineNumber:60,columnNumber:13},this),this.state.error&&n.jsxDEV("details",{className:"error-details",children:[n.jsxDEV("summary",{children:"Error Details (Dev Only)"},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/ErrorBoundary.jsx",lineNumber:71,columnNumber:17},this),n.jsxDEV("pre",{children:this.state.error.toString()},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/ErrorBoundary.jsx",lineNumber:72,columnNumber:17},this),this.state.errorInfo&&n.jsxDEV("pre",{children:this.state.errorInfo.componentStack},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/ErrorBoundary.jsx",lineNumber:74,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/ErrorBoundary.jsx",lineNumber:70,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/ErrorBoundary.jsx",lineNumber:54,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/components/ErrorBoundary.jsx",lineNumber:53,columnNumber:9},this):this.props.children}}wS();li.createRoot(document.getElementById("root")).render(n.jsxDEV($m.StrictMode,{children:n.jsxDEV(jx,{children:n.jsxDEV(Ex,{},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/main.jsx",lineNumber:14,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/main.jsx",lineNumber:13,columnNumber:5},void 0)},void 0,!1,{fileName:"C:/Users/goyalanj/.kiro/NEST/src/main.jsx",lineNumber:12,columnNumber:3},void 0));export{x as s};
//# sourceMappingURL=index-CE0oa-CE.js.map
